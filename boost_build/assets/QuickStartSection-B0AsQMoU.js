import{b as ne,a as le,r as O,j as e,G as n,K as G,V as o,p as ee,ah as A,d as R,a4 as D,a3 as ce,N as me,g as de,D as ue,Q as M,L as te,R as se}from"./index-Bb4T6yJS.js";import{A as Se}from"./helmet-BKDsicQe.js";import{W as je}from"./WebBreadCrumb-CplDcnjI.js";import{P as Te}from"./container-Mdzkb4R0.js";import{u as pe,o as ge,a as Ie}from"./yup-VhrNJgti.js";import{c as Q,a as I,f as ye,d as xe}from"./index.esm-B55s2Mzk.js";import{A as S}from"./apiErrorResonse-CCtXlH33.js";import{d as Ee}from"./CancelTwoTone-g9I4gqmS.js";import{d as Ce}from"./AddPhotoAlternate-Dq9K76ig.js";import{d as he}from"./Send-CIV9xzto.js";import{I as Le}from"./iconify-C-ngdJty.js";import{C as K}from"./Card-Cg269qA4.js";import{T as y}from"./TextField-Dv9saPdb.js";import{B as fe}from"./Box-DzmxXICY.js";import{T as ie}from"./Typography-BvK0EBjx.js";import{T as _e}from"./Tooltip-BPIgMGiH.js";import{A as re}from"./Avatar-CkCB1SYh.js";import{S as Ae}from"./Skeleton-Cv9Q_VQE.js";import{S as V}from"./Stack-yqW3PSS6.js";import{F as z}from"./FormHelperText-D8o68a4M.js";import{B as ae}from"./Button-CoPqx7My.js";import{L as be}from"./LoadingButton-D3WD33Li.js";import{T as Re,a as oe}from"./Tabs-BapWTaVr.js";import"./breadcrumbs-BoNbTSIP.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./Iconify-B2ea3Vhk.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./styled-BzESMtjz.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./List-BGusPRli.js";import"./Popper-BrZsYCFQ.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./colorManipulator-C6WsgVx8.js";import"./KeyboardArrowRight--EGT-K8b.js";const Oe=Q().shape({title:I().trim().required("Title is required."),subtitle:I().trim().required("Subtitle is required."),sections:ye().of(Q().shape({title:I().trim().required("Title is required."),description:I().trim().required("Description is required."),introImage:xe().nullable().test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",i=>i&&i.uploaded_images?!0:i?["image/jpeg","image/png","image/jpg"].includes(i.type):!0).test("fileSize","Image's size cannot be more than 5 MB",i=>i&&i.uploaded_images?!0:i?i.size<=5242880:!0)}))});function Ue(){const{loader:i}=ne(c=>c.request),r=le(),{register:j,setValue:b,handleSubmit:p,trigger:g,control:F,formState:{errors:s}}=pe({mode:"all",resolver:ge(Oe),defaultValues:{sections:[{title:"",description:"",introImage:null}]}}),{fields:l,append:q,remove:P}=Ie({control:F,name:"sections"}),[x,d]=O.useState([]),[$,h]=O.useState(""),C=async(c,t)=>{const a={upload_image_response_id:c};try{r({type:o.PROCESSING});const{status:m,data:{message:u}}=await ee(A.DELETE_IMAGE,a);if(m===R[200])d(T=>{const f=[...T];return f[t]=null,f}),b(`sections[${t}].introImage`,null),r({type:o.SUCCESS,payload:{}}),D.success(u);else throw new Error(S())}catch(m){r({type:o.FAILURE,payload:{message:m.message}})}},U=async(c,t)=>{const a=c.target.files[0];if(!a)return;const m=new FormData;m.append("upload_image",a);try{r({type:o.PROCESSING});const{status:u,data:{message:T,data:f}}=await ee(A.UPLOAD_IMAGE,m);if(u===R[200])d(L=>{const E=[...L];return E[t]={...f,size:a.size},E}),b(`sections[${t}].introImage`,{...f,size:a.size}),await g(`sections[${t}].introImage`),r({type:o.SUCCESS,payload:{}}),D.success(T);else throw new Error(S())}catch(u){r({type:o.FAILURE,payload:{message:S(u)}})}},W=async c=>{let t={key:"QUICK_START",section:"INTRO",value:JSON.stringify({title:c.title,subtitle:c.subtitle,sections:c.sections}),status:1};try{r({type:o.PROCESSING});const{status:a,data:{message:m}}=await ce(A.UPDATE,t);a===R[200]?(r({type:o.SUCCESS,payload:{message:m}}),D.success(m),N()):r({type:o.FAILURE,payload:{message:S()}})}catch(a){r({type:o.FAILURE,payload:{message:S(a)}})}};async function B(c){r({type:o.INIT_LOADER,payload:{loader:!0}});const t=ue.LOCALE;try{const a=await me(c),{status:m}=a,{data:u,success:T}=a.data;if(T&&m===R[200]){const f=JSON.parse(u==null?void 0:u.value),{title:L,subtitle:E,sections:k}=f;b("title",L),b("subtitle",E),b("sections",k),d(k.map(w=>w.introImage||null))}else h(de[t].FETCHING_USERS_LIST)}catch(a){S(a)}r({type:o.INIT_LOADER,payload:{loader:!1}})}const N=()=>{B(`${A.GET}?key=QUICK_START&section=INTRO`)};return O.useEffect(()=>{N()},[]),e.jsx(e.Fragment,{children:e.jsx(n,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(n,{item:!0,md:12,children:e.jsx(K,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:p(W),noValidate:!0,children:[e.jsx(n,{mb:4,children:e.jsx(y,{...j("title"),label:"Title*",disabled:i,error:!!s.title,helperText:s.title?s.title.message:"",name:"title",variant:"outlined",fullWidth:!0})}),e.jsx(n,{mb:4,children:e.jsx(y,{...j("subtitle"),label:"Subtitle*",disabled:i,error:!!s.subtitle,helperText:s.subtitle?s.subtitle.message:"",name:"subtitle",variant:"outlined",fullWidth:!0})}),e.jsx(n,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:l.map((c,t)=>{var a,m,u,T,f,L,E,k,w,H,J,Y,X,Z;return e.jsxs(n,{item:!0,md:6,children:[e.jsx(fe,{sx:{mb:2},children:e.jsx(ie,{variant:"h5",children:`Section ${t+1}`})}),e.jsx(n,{mb:4,children:e.jsx(y,{...j(`sections[${t}].title`),label:"Section Title*",disabled:i,error:!!((m=(a=s==null?void 0:s.sections)==null?void 0:a[t])!=null&&m.title),helperText:(f=(T=(u=s==null?void 0:s.sections)==null?void 0:u[t])==null?void 0:T.title)==null?void 0:f.message,name:`sections[${t}].title`,variant:"outlined",fullWidth:!0})}),e.jsx(n,{mb:4,children:e.jsx(y,{...j(`sections[${t}].description`),label:"Description*",disabled:i,error:!!((E=(L=s==null?void 0:s.sections)==null?void 0:L[t])!=null&&E.description),helperText:(H=(w=(k=s==null?void 0:s.sections)==null?void 0:k[t])==null?void 0:w.description)==null?void 0:H.message,name:`sections[${t}].description`,variant:"outlined",fullWidth:!0})}),e.jsxs(n,{position:"relative",mb:2,children:[(Y=(J=x[t])==null?void 0:J.uploaded_images)!=null&&Y.upload_image_url?e.jsxs(e.Fragment,{children:[e.jsx(_e,{title:"Click to remove image",placement:"top",children:e.jsx(Ee,{sx:{color:G.ERROR_MSG_COLOR,position:"absolute",top:-5,right:-5,cursor:"pointer",fontSize:"18px",zIndex:99,background:"white",borderRadius:"50%"},onClick:()=>{var _,v;(v=(_=x[t])==null?void 0:_.uploaded_images)!=null&&v.upload_image_response_id&&C(x[t].uploaded_images.upload_image_response_id,t),g(`sections[${t}].introImage`)}})}),e.jsx(re,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${s[`sections[${t}].introImage`]?"#ff4842":"#20A2B8"}`,color:`${s[`sections[${t}].introImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",src:x[t].uploaded_images.upload_image_url,className:"create-blog-image"})]}):e.jsxs("label",{htmlFor:`icon-upload-${t}`,children:[i?e.jsx(Ae,{variant:"rectangular",width:"100%",height:"10em"}):e.jsx(re,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${s[`sections[${t}].introImage`]?"#ff4842":"#20A2B8"}`,color:`${s[`sections[${t}].introImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",children:e.jsxs(V,{container:!0,alignItems:"center",justifyContent:"center",children:[e.jsx(Ce,{sx:{fontSize:"3em",color:`${s[`sections[${t}].introImage`]?"#ff4842":G.PRIMARY_COLOR}`}}),e.jsx(ie,{color:G.PRIMARY_COLOR,variant:"h4",children:"Upload file"}),e.jsx(z,{error:!1,children:"Allowed *.jpeg, *.jpg, *.png max size of 5 MB."})]})}),e.jsx("input",{accept:"image/*",id:`icon-upload-${t}`,type:"file",style:{display:"none"},onChange:_=>{U(_,t),g(`sections[${t}].introImage`)}})]}),s[`sections[${t}].introImage`]&&e.jsx(z,{error:!0,children:s[`sections[${t}].introImage`].message||""})]}),((Z=(X=s==null?void 0:s.sections)==null?void 0:X[t])==null?void 0:Z.introImage)&&e.jsx(z,{error:!0,children:s.sections[t].introImage.message}),l.length>1&&e.jsx(n,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(ae,{type:"button",onClick:()=>{P(t),d(_=>{const v=[..._];return v[t]=null,v})},color:"error",children:"Remove Section"})})]},c.id)})}),e.jsx(n,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(ae,{type:"button",onClick:()=>q({title:"",url:"",description:"",introImage:null}),children:e.jsx(Le,{icon:"basil:add-outline",width:"32",height:"32"})})}),e.jsx(V,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(be,{loading:!!i,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(he,{}),variant:"contained",children:i?"PLEASE WAIT...":"SUBMIT"})})]})})})})})}const ke=Q().shape({title:I().trim().required("Title is required."),subtitle:I().trim().required("Subtitle is required."),channelLink:I().trim().required("Channel url is required."),videoLink:I().trim().required("Video url is required.")});function ve(){const i=le(),{loader:r}=ne(d=>d.request),[j,b]=O.useState(""),{register:p,setValue:g,handleSubmit:F,trigger:s,formState:{errors:l}}=pe({mode:"all",resolver:ge(ke)}),q=async d=>{let $={key:"QUICK_START",section:"TUTORIAL",value:JSON.stringify({title:d.title,subtitle:d.subtitle,channelLink:d.channelLink,videoLink:d.videoLink}),status:1};try{i({type:o.PROCESSING});const{status:h,data:{message:C}}=await ce(A.UPDATE,$);h===R[200]?(i({type:o.SUCCESS,payload:{message:C}}),D.success(C),x()):i({type:o.FAILURE,payload:{message:S()}})}catch(h){i({type:o.FAILURE,payload:{message:S(h)}})}};async function P(d){i({type:o.INIT_LOADER,payload:{loader:!0}});const $=ue.LOCALE;try{const h=await me(d),{status:C}=h,{data:U,success:W}=h.data;if(W&&C===R[200]){const B=JSON.parse(U==null?void 0:U.value),{title:N,subtitle:c,channelLink:t,videoLink:a}=B;g("title",N),g("subtitle",c),g("channelLink",t),g("videoLink",a)}else b(de[$].FETCHING_USERS_LIST)}catch(h){S(h)}i({type:o.INIT_LOADER,payload:{loader:!1}})}const x=()=>{P(`${A.GET}?key=QUICK_START&section=TUTORIAL`)};return O.useEffect(()=>{x()},[]),e.jsx(e.Fragment,{children:e.jsx(n,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(n,{item:!0,md:12,children:e.jsx(K,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:F(q),noValidate:!0,children:[e.jsx(n,{mb:4,children:e.jsx(y,{...p("title"),label:"Title*",disabled:r,error:!!l.title,helperText:l.title?l.title.message:"",name:"title",variant:"outlined",fullWidth:!0})}),e.jsx(n,{mb:4,children:e.jsx(y,{...p("subtitle"),label:"Subtitle*",disabled:r,error:!!l.subtitle,helperText:l.subtitle?l.subtitle.message:"",name:"subtitle",variant:"outlined",fullWidth:!0})}),e.jsx(n,{mb:4,children:e.jsx(y,{...p("channelLink"),label:"Channel URL*",disabled:r,error:!!l.channelLink,helperText:l.channelLink?l.channelLink.message:"",name:"channelLink",variant:"outlined",fullWidth:!0})}),e.jsx(n,{mb:4,children:e.jsx(y,{...p("videoLink"),label:"Video URL*",disabled:r,error:!!l.videoLink,helperText:l.videoLink?l.videoLink.message:"",name:"videoLink",variant:"outlined",fullWidth:!0})}),e.jsx(V,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(be,{loading:!!r,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(he,{}),variant:"contained",children:r?"PLEASE WAIT...":"SUBMIT"})})]})})})})})}function Lt(){const[i,r]=O.useState("QUICK_START");function j(p){return{value:p,id:`content-tab-${p}`,"aria-controls":`content-tabpanel-${p}`}}const b=(p,g)=>{r(g)};return e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:M.WEB_CONTENT}),e.jsxs(Te,{className:"page-container users-page",heading:"Web Content",children:[e.jsx(je,{breadcrumbs:[e.jsx(te,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:se.DASHBOARD,children:"dashboard"}),e.jsx(te,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:se.WEB_CONTENT,children:M.WEB_CONTENT}),M.QUICK_START]}),e.jsxs(K,{sx:{mt:4,boxShadow:3},children:[e.jsx(fe,{children:e.jsxs(Re,{value:i,onChange:b,"aria-label":"basic tabs example",children:[e.jsx(oe,{label:"Quick start",...j("QUICK_START")}),e.jsx(oe,{label:"Shot tutorial",...j("TUTORIAL")})]})}),i==="QUICK_START"&&e.jsx(Ue,{}),i==="TUTORIAL"&&e.jsx(ve,{})]})]})]})}export{Lt as default};
