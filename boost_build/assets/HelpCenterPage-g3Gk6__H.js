import{a as ce,b as le,r as x,j as e,G as c,L as B,R as M,K as $,V as n,p as re,ah as I,d as _,a4 as D,a3 as pe,N as me,g as de,Q as Se}from"./index-Bb4T6yJS.js";import{A as be}from"./helmet-BKDsicQe.js";import{P as ye}from"./container-Mdzkb4R0.js";import{W as Ce}from"./WebBreadCrumb-CplDcnjI.js";import{u as ue,o as ge,a as he}from"./yup-VhrNJgti.js";import{c as P,f as Ee,a as z,d as Te}from"./index.esm-B55s2Mzk.js";import{d as W}from"./CancelTwoTone-g9I4gqmS.js";import{d as Ie}from"./AddPhotoAlternate-Dq9K76ig.js";import{d as fe}from"./Send-CIV9xzto.js";import{A as S}from"./apiErrorResonse-CCtXlH33.js";import{I as H}from"./iconify-C-ngdJty.js";import{C as Y}from"./Card-Cg269qA4.js";import{T as q}from"./Typography-BvK0EBjx.js";import{B as K}from"./Box-DzmxXICY.js";import{T as V}from"./Tooltip-BPIgMGiH.js";import{T as J}from"./TextField-Dv9saPdb.js";import{A as ae}from"./Avatar-CkCB1SYh.js";import{S as _e}from"./Skeleton-Cv9Q_VQE.js";import{S as Q}from"./Stack-yqW3PSS6.js";import{F as ie}from"./FormHelperText-D8o68a4M.js";import{B as xe}from"./Button-CoPqx7My.js";import{L as je}from"./LoadingButton-D3WD33Li.js";import{T as Re,a as ne}from"./Tabs-BapWTaVr.js";import"./styled-BzESMtjz.js";import"./breadcrumbs-BoNbTSIP.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./Iconify-B2ea3Vhk.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./Popper-BrZsYCFQ.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./List-BGusPRli.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./colorManipulator-C6WsgVx8.js";import"./KeyboardArrowRight--EGT-K8b.js";const Ne=P().shape({section:Ee().of(P().shape({title:z().trim().required("Title is required."),subtitle:z().trim().required("Subtitle is required."),icon:Te().nullable().test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",s=>s&&s.uploaded_images?!0:s?["image/jpeg","image/png","image/jpg"].includes(s.type):!0).test("fileSize","Image's size cannot be more than 5 MB",s=>s&&s.uploaded_images?!0:s?s.size<=5242880:!0)}))}),Oe=()=>{const s=ce(),{loader:m}=le(o=>o.request),[L,R]=x.useState(""),{register:h,setValue:j,handleSubmit:U,trigger:v,control:k,formState:{errors:r}}=ue({mode:"all",resolver:ge(Ne),defaultValues:{section:[{title:"",subtitle:"",icon:null}]}}),{fields:N,append:F,remove:G}=he({control:k,name:"section"}),[b,y]=x.useState([]),O=async(o,t)=>{const a={upload_image_response_id:o};try{s({type:n.PROCESSING});const{status:i,data:{message:g}}=await re(I.DELETE_IMAGE,a);if(i===_[200])y(f=>{const d=[...f];return d[t]=null,d}),j(`section[${t}].icon`,null),s({type:n.SUCCESS,payload:{}}),D.success(g);else throw new Error(S())}catch(i){s({type:n.FAILURE,payload:{message:i.message}})}},E=async(o,t)=>{const a=o.target.files[0];if(!a)return;const i=new FormData;i.append("upload_image",a);try{s({type:n.PROCESSING});const{status:g,data:{message:f,data:d}}=await re(I.UPLOAD_IMAGE,i);if(g===_[200])y(C=>{const A=[...C];return A[t]={...d,size:a.size},A}),j(`section[${t}].icon`,{...d,size:a.size}),await v(`section[${t}].icon`),s({type:n.SUCCESS,payload:{}}),D.success(f);else throw new Error(S())}catch(g){s({type:n.FAILURE,payload:{message:S(g)}})}},l=async o=>{const t={key:"HELP_CENTER",section:"SECTION",value:JSON.stringify({section:o.section}),status:1};try{s({type:n.PROCESSING});const{status:a,data:{message:i}}=await pe(I.UPDATE,t);if(a===_[200])s({type:n.SUCCESS,payload:{message:i}}),D.success(i),p();else throw new Error(S())}catch(a){s({type:n.FAILURE,payload:{message:a.message}})}},u=async o=>{s({type:n.INIT_LOADER,payload:{loader:!0}});try{const t=await me(o),{statusCode:a,data:i,success:g}=t.data;if(g&&a===_[200]){const f=JSON.parse(i==null?void 0:i.value),{section:d}=f;y(d.map(C=>C.icon||null)),j("section",d)}else throw new Error(de.DEFAULT.FETCHING_USERS_LIST)}catch(t){R(S(t))}finally{s({type:n.INIT_LOADER,payload:{loader:!1}})}},p=x.useCallback(()=>{u(`${I.GET}?key=HELP_CENTER&section=SECTION`)},[]);return x.useEffect(()=>{p()},[p]),e.jsx(e.Fragment,{children:e.jsx(c,{container:!0,spacing:2,my:2,children:e.jsx(c,{item:!0,md:12,children:e.jsx(Y,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:U(l),noValidate:!0,children:[e.jsxs(c,{container:!0,spacing:2,my:2,children:[N.map((o,t)=>{var a,i,g,f,d,C,A,X,Z,ee,te,se,oe;return e.jsxs(c,{item:!0,md:4,children:[e.jsxs(B,{state:{name:o==null?void 0:o.title},to:`${M.HELP_CENTER}/${(a=o==null?void 0:o.title)==null?void 0:a.replace(/[\s/&]+/g,"-").toLowerCase()}`,style:{textDecoration:"none",display:"flex",alignItems:"center",paddingBottom:"10px"},children:[e.jsx(q,{variant:"h5",children:o!=null&&o.title?o==null?void 0:o.title:`Section ${t+1}`}),e.jsx(H,{icon:"gg:arrow-right",width:"28",height:"28",color:"#121926"})]}),e.jsxs(K,{sx:{border:"1px solid #bfc0c2",borderRadius:"12px",padding:"15px 10px",position:"relative"},children:[N.length>1&&e.jsx(V,{placement:"top",title:"Click to remove card",children:e.jsx(W,{sx:{color:$.ERROR_MSG_COLOR,position:"absolute",right:"-5px",top:"-5px",zIndex:"99",cursor:"pointer",fontSize:"18px",background:"#fff",borderRadius:"50%"},onClick:()=>{G(t),y(T=>{const w=[...T];return w[t]=null,w})}})}),e.jsx(c,{mb:2,children:e.jsx(J,{...h(`section[${t}].title`),label:"Title*",disabled:m,error:!!((g=(i=r==null?void 0:r.section)==null?void 0:i[t])!=null&&g.title),helperText:((C=(d=(f=r==null?void 0:r.section)==null?void 0:f[t])==null?void 0:d.title)==null?void 0:C.message)||"",variant:"outlined",fullWidth:!0})}),e.jsx(c,{mb:2,children:e.jsx(J,{...h(`section[${t}].subtitle`),label:"Subtitle*",disabled:m,error:!!((X=(A=r==null?void 0:r.section)==null?void 0:A[t])!=null&&X.subtitle),helperText:((te=(ee=(Z=r==null?void 0:r.section)==null?void 0:Z[t])==null?void 0:ee.subtitle)==null?void 0:te.message)||"",variant:"outlined",fullWidth:!0})}),e.jsxs(c,{position:"relative",mb:2,children:[(oe=(se=b[t])==null?void 0:se.uploaded_images)!=null&&oe.upload_image_url?e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Click to remove image",placement:"top",children:e.jsx(W,{sx:{color:$.ERROR_MSG_COLOR,position:"absolute",top:-5,right:-5,cursor:"pointer",fontSize:"18px",zIndex:99,background:"white",borderRadius:"50%"},onClick:()=>{var T,w;(w=(T=b[t])==null?void 0:T.uploaded_images)!=null&&w.upload_image_response_id&&O(b[t].uploaded_images.upload_image_response_id,t),v(`section[${t}].icon`)}})}),e.jsx(ae,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${r[`section[${t}].icon`]?"#ff4842":"#20A2B8"}`,color:`${r[`section[${t}].icon`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",src:b[t].uploaded_images.upload_image_url,className:"create-blog-image"})]}):e.jsxs("label",{htmlFor:`icon-upload-${t}`,children:[m?e.jsx(_e,{variant:"rectangular",width:"100%",height:"10em"}):e.jsx(ae,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${r[`section[${t}].icon`]?"#ff4842":"#20A2B8"}`,color:`${r[`section[${t}].icon`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",children:e.jsxs(Q,{container:!0,alignItems:"center",justifyContent:"center",children:[e.jsx(Ie,{sx:{fontSize:"3em",color:`${r[`section[${t}].icon`]?"#ff4842":$.PRIMARY_COLOR}`}}),e.jsx(q,{color:$.PRIMARY_COLOR,variant:"h4",children:"Upload file"}),e.jsx(ie,{error:!1,children:"Allowed *.jpeg, *.jpg, *.png max size of 5 MB."})]})}),e.jsx("input",{accept:"image/*",id:`icon-upload-${t}`,type:"file",style:{display:"none"},onChange:T=>{E(T,t),v(`section[${t}].icon`)}})]}),r[`section[${t}].icon`]&&e.jsx(ie,{error:!0,children:r[`section[${t}].icon`].message||""})]})]})]},o.id)}),e.jsx(c,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(xe,{onClick:()=>F({title:"",subtitle:"",icon:null}),type:"button",children:e.jsx(H,{icon:"basil:add-outline",width:"32",height:"32"})})})]}),e.jsx(Q,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(je,{type:"submit",variant:"contained",endIcon:e.jsx(fe,{}),loading:m,sx:{mt:2},children:m?"PLEASE WAIT...":"SUBMIT"})})]})})})})})},Ae=P().shape({section:Ee().of(P().shape({title:z().trim().required("Title is required.")}))}),we=()=>{const s=ce(),{loader:m}=le(E=>E.request),[L,R]=x.useState(""),{register:h,setValue:j,handleSubmit:U,trigger:v,control:k,formState:{errors:r}}=ue({mode:"all",resolver:ge(Ae),defaultValues:{section:[{title:""}]}}),{fields:N,append:F,remove:G}=he({control:k,name:"section"}),b=async E=>{const l={key:"HELP_CENTER",section:"TRENDING",value:JSON.stringify({section:E.section}),status:1};try{s({type:n.PROCESSING});const{status:u,data:{message:p}}=await pe(I.UPDATE,l);if(u===_[200])s({type:n.SUCCESS,payload:{message:p}}),D.success(p),O();else throw new Error(S())}catch(u){s({type:n.FAILURE,payload:{message:u.message}})}},y=async E=>{s({type:n.INIT_LOADER,payload:{loader:!0}});try{const l=await me(E),{statusCode:u,data:p,success:o}=l.data;if(o&&u===_[200]){const t=JSON.parse(p==null?void 0:p.value),{section:a}=t;j("section",a)}else throw new Error(de.DEFAULT.FETCHING_USERS_LIST)}catch(l){R(S(l))}finally{s({type:n.INIT_LOADER,payload:{loader:!1}})}},O=x.useCallback(()=>{y(`${I.GET}?key=HELP_CENTER&section=TRENDING`)},[]);return x.useEffect(()=>{O()},[O]),e.jsx(e.Fragment,{children:e.jsx(c,{container:!0,spacing:2,my:2,children:e.jsx(c,{item:!0,md:12,children:e.jsx(Y,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:U(b),noValidate:!0,children:[e.jsxs(c,{container:!0,spacing:2,my:2,children:[N.map((E,l)=>{var u,p,o,t,a;return e.jsxs(c,{item:!0,md:6,children:[e.jsxs(q,{pb:2,variant:"h5",children:["Article ",l+1]}),e.jsxs(K,{sx:{border:"1px solid #bfc0c2",borderRadius:"12px",padding:"15px 10px",position:"relative"},children:[N.length>1&&e.jsx(V,{placement:"top",title:"Click to remove card",children:e.jsx(W,{sx:{color:$.ERROR_MSG_COLOR,position:"absolute",right:"-5px",top:"-5px",zIndex:"99",cursor:"pointer",fontSize:"18px",background:"#fff",borderRadius:"50%"},onClick:()=>{G(l)}})}),e.jsx(c,{mb:2,children:e.jsx(J,{...h(`section[${l}].title`),label:"Title*",disabled:m,error:!!((p=(u=r==null?void 0:r.section)==null?void 0:u[l])!=null&&p.title),helperText:((a=(t=(o=r==null?void 0:r.section)==null?void 0:o[l])==null?void 0:t.title)==null?void 0:a.message)||"",variant:"outlined",fullWidth:!0})})]})]},E.id)}),e.jsx(c,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(xe,{onClick:()=>F({title:"",subtitle:"",icon:null}),type:"button",children:e.jsx(H,{icon:"basil:add-outline",width:"32",height:"32"})})})]}),e.jsx(Q,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(je,{type:"submit",variant:"contained",endIcon:e.jsx(fe,{}),loading:m,sx:{mt:2},children:m?"PLEASE WAIT...":"SUBMIT"})})]})})})})})};function Tt(){const[s,m]=x.useState("SECTION");function L(h){return{value:h,id:`content-tab-${h}`,"aria-controls":`content-tabpanel-${h}`}}const R=(h,j)=>{m(j)};return e.jsxs(e.Fragment,{children:[e.jsx(be,{title:Se.WEB_CONTENT}),e.jsxs(ye,{className:"page-container users-page",heading:"Web Content",children:[e.jsx(Ce,{breadcrumbs:[e.jsx(B,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:M.DASHBOARD,children:"dashboard"}),e.jsx(B,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:M.WEB_CONTENT,children:"Web-content"}),"help-center"]}),e.jsxs(Y,{sx:{mt:4,boxShadow:3},children:[e.jsx(K,{children:e.jsxs(Re,{value:s,onChange:R,variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example",children:[e.jsx(ne,{label:"Sections",...L("SECTION")}),e.jsx(ne,{label:"Trending Articles",...L("TRENDING")})]})}),s==="SECTION"&&e.jsx(Oe,{}),s==="TRENDING"&&e.jsx(we,{})]})]})]})}export{Tt as default};
