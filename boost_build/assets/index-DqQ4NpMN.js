import{s as ge,P as E,u as K,b as Q,f as he,j as e,a6 as xe,L as R,R as D,a as Ee,r as o,Q as fe,G as f,V as i,Y as Se,a7 as N,d as H,a4 as Y,N as je,g as ye,D as Ce}from"./index-Bb4T6yJS.js";import{P as Pe}from"./breadcrumbs-BoNbTSIP.js";import{P as Te}from"./container-Mdzkb4R0.js";import{A as Ae}from"./helmet-BKDsicQe.js";import{d as De}from"./Add-CMcxYLjt.js";import{A as T}from"./apiErrorResonse-CCtXlH33.js";import{U as S}from"./paginations-D9J1AZ49.js";import{u as Re}from"./textDebounce-D7e2mMPI.js";import{I as A}from"./Iconify-B2ea3Vhk.js";import{S as Oe}from"./SkeltonCardLoader-BFqZXtrl.js";import{C as ve}from"./Card-Cg269qA4.js";import{I as _e}from"./IconButton-BS36y1hM.js";import{P as Ie}from"./Popover-_oog1cCQ.js";import{T as q}from"./Tooltip-BPIgMGiH.js";import{T as Le}from"./Typography-BvK0EBjx.js";import{a as z}from"./colorManipulator-C6WsgVx8.js";import{D as be,a as Ue,b as Ne,c as $e,d as ke,e as we}from"./DeleteOutlineRounded-whF8ow73.js";import{u as Ge}from"./useMediaQuery-B2-mEylA.js";import{S as W}from"./Stack-yqW3PSS6.js";import{B as V}from"./Button-CoPqx7My.js";import{L as Me}from"./LoadingButton-D3WD33Li.js";import{P as Be}from"./Pagination-BX3HLmip.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./styled-BzESMtjz.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./iconify-C-ngdJty.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./Skeleton-Cv9Q_VQE.js";import"./Avatar-CkCB1SYh.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./Popper-BrZsYCFQ.js";import"./LastPage-BwPgK0Bl.js";const Fe=ge("div")(({theme:s})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:s.spacing(8),height:s.spacing(8),justifyContent:"center",marginBottom:s.spacing(3)}));X.propTypes={color:E.string,icon:E.string,title:E.string.isRequired,path:E.string.isRequired,sx:E.object};function X({isLoading:s,path:O,title:p,icon:u,color:a="primary",sx:c,handleDelete:j,handleOpenMenu:m,handlePopoverOpen:g,handlePopoverClose:l,id:h,hoveredUserId:d,anchorEl:y,...$}){const x=K(),v=Q(r=>r.customization);he();const C=!!y;return s&&s!==void 0?e.jsx(Oe,{}):e.jsx(xe,{style:{textDecoration:"none"},to:"#",className:"web-content-card",children:e.jsxs(ve,{sx:{py:5,boxShadow:1,textAlign:"center",background:v.navType==="dark"?"#103C65":x.palette.primary.light,...c},...$,children:[e.jsx(_e,{className:"card_menu_icon",onClick:r=>g(r,h),children:e.jsx(A,{icon:"eva:more-vertical-outline",width:24,height:24})}),e.jsx(Ie,{open:C,anchorEl:y,onClose:l,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs("div",{className:"product_menu_item",children:[e.jsx(R,{to:`${D.PRODUCTS_LIST}/${d}`,variant:"contained",color:"primary",children:e.jsx(q,{title:"Edit",arrow:!0,placement:"right",children:e.jsx(A,{icon:"eva:edit-outline",sx:{color:"rgba(0, 0, 0, 0.54)"}})})}),e.jsx(R,{onClick:()=>{j(),l()},variant:"contained",color:"success",children:e.jsx(q,{title:"Delete",arrow:!0,placement:"right",children:e.jsx(A,{icon:"eva:trash-2-outline",sx:{color:"rgb(189 51 51)"}})})})]})}),e.jsx(Fe,{className:"product_card_icon",sx:{color:r=>r.palette[a].light,backgroundImage:r=>`linear-gradient(135deg, ${z(r.palette[a].light,0)} 0%, ${z(r.palette[a].light,.24)} 100%)`},children:u?e.jsx("img",{src:u,alt:"icon",className:"icon_products"}):e.jsx(A,{icon:"eva:more-vertical-outline",width:24,height:70})}),e.jsx(Le,{variant:"h4",sx:{color:v.navType==="dark"?x.palette.primary.light:"#0e1522"},children:p})]})})}function He(s){const{setIsOpen:O,cancelAction:p,deleteAction:u}=s,{loader:a}=Q(l=>l.request),c=!0,j=K(),m=Ge(j.breakpoints.down("md")),g=(l,h)=>{h&&h==="backdropClick"||(O(!1),p&&p())};return e.jsx("div",{children:e.jsxs(be,{fullScreen:m,open:c,onClose:g,"aria-labelledby":"responsive-dialog-title",children:[e.jsx(Ue,{id:"responsive-dialog-title",children:"Delete product"}),e.jsx(Ne,{children:e.jsx($e,{children:"Are you sure you want to delete product?"})}),e.jsx(ke,{children:e.jsxs(W,{direction:"row",spacing:2,children:[e.jsx(V,{disabled:a,variant:"outlined",onClick:g,children:"CANCEL"}),e.jsx(Me,{loading:a,size:"small",type:"submit",color:"error",loadingPosition:"start",startIcon:e.jsx(we,{}),variant:"contained",onClick:()=>u?u():!1,children:a?"DELETING...":"DELETE"})]})})]})})}const Ut=()=>{const s=Ee(),[O,p]=o.useState(null),[u,a]=o.useState(null),[c,j]=o.useState(10),[m,g]=o.useState(1);o.useState(1);const[l,h]=o.useState(0),[d,y]=o.useState([]),[$,x]=o.useState(!1),[v,C]=o.useState(!1),[r,k]=o.useState(""),[_,I]=o.useState(null),[Ye,J]=o.useState({}),[Z,qe]=o.useState(""),[ee,ze]=Re(),[w,L]=o.useState(!1),[te,G]=o.useState(null),se=(t,n)=>{G(t.currentTarget),I(n)},oe=()=>{G(null)},ae=t=>{const n=d.find(F=>F.id===t);I(t),J(n)},M=t=>{L(t)},b=()=>{p(null),a(null),I(null)},re=(t,n)=>{console.log("newPage",n),g(n)},ne=async()=>{try{s({type:i.PROCESSING});const{status:t,data:{message:n}}=await Se(`${N.DELETE}/${_}`);t===H[200]?(s({type:i.SUCCESS,payload:{message:n}}),Y.success("Product deleted successfull."),B(`${N.LIST}?${S.PAGE_NO.KEY}=1&${S.ROWS_PER_PAGE.KEY}=10`)):s({type:i.FAILURE,payload:{message:T()}}),b(),M(!1)}catch(t){s({type:i.FAILURE,payload:{message:T(t)}}),Y.error(`${t.response.data.message}`),b(),M(!1)}},ie=()=>{B(`${N.LIST}?${S.PAGE_NO.KEY}=${m}&${S.ROWS_PER_PAGE.KEY}=${c}&${S.SEARCH_TEXT.KEY}=${Z}`)};async function B(t,n,F){x(!0),s({type:i.INIT_LOADER,payload:{loader:!0}});let U;const le=Ce.LOCALE;try{const P=await je(t),{status:de}=P,{data:{productsDetails:pe,totalCounts:ue},success:me}=P.data;me&&de===H[200]?(y(pe.rows),x(!1),C(!1),h(ue),s({type:i.INIT_LOADER,payload:{loader:!1}})):(k(ye[le].FETCHING_USERS_LIST),s({type:i.FAILURE,payload:{message:T()}}))}catch(P){U=T(P),C(!0),k(U),x(!1),s({type:i.FAILURE,payload:{message:U}})}}const ce=()=>{L(!0)};return o.useEffect(()=>{ie()},[m,c,ee]),e.jsxs(e.Fragment,{children:[e.jsx(Ae,{title:fe.PRODUCTS}),e.jsxs(Te,{className:"page-container users-page",heading:"Products",children:[e.jsxs(f,{container:!0,justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[e.jsx(f,{item:!0,children:e.jsx(Pe,{breadcrumbs:[e.jsx(R,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:D.DASHBOARD,children:"dashboard"}),"Products"]})}),e.jsx(f,{item:!0,mr:1,children:e.jsx(R,{className:"",to:D.PRODUCTS_CREATE,children:e.jsx(V,{sx:{borderRadius:"2pt"},variant:"contained",color:"primary",startIcon:e.jsx(De,{}),children:"NEW PRODUCT"})})})]}),e.jsx(f,{container:!0,spacing:3,sx:{pt:2},children:d.map(t=>e.jsx(f,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(X,{path:D.HEADER_FOOTER,color:"primary",title:t.name,icon:t.icon,id:t==null?void 0:t.id,hoveredUserId:_,handleOpenMenu:ae,handlePopoverOpen:se,handlePopoverClose:oe,handleDelete:ce,anchorEl:te})},t.id))}),(d==null?void 0:d.length)>0&&e.jsx(W,{spacing:3,sx:{mt:2},children:e.jsx(Be,{style:{display:"flex",justifyContent:"center"},count:Math.ceil(l/c),page:m,onChange:re,color:"primary",variant:"outlined",shape:"rounded"})})]}),w&&e.jsx(He,{cancelAction:b,deleteAction:ne,id:_,setIsOpen:L,isOpen:w})]})};export{Ut as default};
