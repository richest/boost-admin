import{a as J,b as D,f as Z,r as a,V as c,j as e,G as s,K as ee,a4 as te,p as re,a7 as w,d as N,R as g,N as oe,g as se,D as ie,Q as ae,L as S}from"./index-Bb4T6yJS.js";import{P as ne}from"./breadcrumbs-BoNbTSIP.js";import{P as ce}from"./container-Mdzkb4R0.js";import{A as le}from"./helmet-BKDsicQe.js";import{d as de}from"./ArrowBack-huGvzFdU.js";import{u as pe,o as me}from"./yup-VhrNJgti.js";import{c as ue,a as E,d as fe}from"./index.esm-B55s2Mzk.js";import{V as _}from"./regexRules-CPrFAOdY.js";import{A as f}from"./apiErrorResonse-CCtXlH33.js";import{d as ge}from"./Send-CIV9xzto.js";import{d as he}from"./AddAPhoto-D4lISSRu.js";import{d as xe}from"./CancelTwoTone-g9I4gqmS.js";import"./Iconify-B2ea3Vhk.js";import{C as O}from"./Card-Cg269qA4.js";import{A as je}from"./Avatar-CkCB1SYh.js";import{T as ye}from"./Tooltip-BPIgMGiH.js";import{F as I}from"./FormHelperText-D8o68a4M.js";import{S as U}from"./Stack-CwHBEtMS.js";import{T as F,I as Se}from"./TextField-Dv9saPdb.js";import{F as Ee,S as _e}from"./Select-D_KZ1HKa.js";import{M as Ie}from"./MenuItem-Ym5Ln7NP.js";import{L as Te}from"./LoadingButton-D3WD33Li.js";import{B as Ce}from"./Button-CoPqx7My.js";import"./Typography-BvK0EBjx.js";import"./Stack-yqW3PSS6.js";import"./styled-BzESMtjz.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./iconify-C-ngdJty.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./Popper-BrZsYCFQ.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./useFormControl-oNyqkk4W.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./List-BGusPRli.js";import"./dividerClasses-B4fnud8L.js";import"./listItemTextClasses-Kx3W7iDp.js";import"./listItemIconClasses-CKdqSC5K.js";const Le=ue().shape({name:E().required(`${_.NAME.REQUIRED}`).max(30,`${_.NAME.MAX_LENGTH}`),description:E(),product_type_id:E().required(_.PRODUCT_TYPE.REQUIRED),icon:fe().required("Icon is required").test("fileSize","Icon sizie can not be more than 5 MB",r=>(r==null?void 0:r.length)===0?!0:(r==null?void 0:r.length)&&r[0].size<=5242880).test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",r=>r.length===0?!0:r.length&&["image/jpeg","image/png","image/jpg"].includes(r[0].type))}),Re=()=>{const r=J(),{loader:p}=D(t=>t.request),M=Z(),{register:m,setValue:be,handleSubmit:k,trigger:T,formState:{errors:o}}=pe({mode:"all",resolver:me(Le)}),h=D(t=>t.customization),[Ae,x]=a.useState(!1),[C,v]=a.useState([]),[$,Pe]=a.useState(10),[B,De]=a.useState(1),[we,L]=a.useState(""),[Ne,G]=a.useState(!1),[l,R]=a.useState(null),{onChange:b,...q}=m("icon"),[Oe,j]=a.useState(!1),[d,A]=a.useState({name:"",description:"",product_type_id:"",status:""}),z=t=>{A({...d,product_type_id:t.target.value})},H=()=>{x(!0)},V=()=>{p||x(!1)},P=t=>{A({...d,[t.target.name]:t.target.value})},Q=async t=>{if(t.icon.length===0)te.error("Icon is required");else{let n=new FormData;const u={product_type_id:t.product_type_id,name:t.name,description:t.description};Object.keys(u).forEach(function(i){n.append(i,u[i])}),t.icon[0]&&n.append("icon",t.icon[0]);try{r({type:c.PROCESSING});const{status:i,data:{message:y}}=await re(w.CREATE,n);i===N[200]?(r({type:c.SUCCESS,payload:{message:y}}),M(g.PRODUCTS_LIST)):r({type:c.FAILURE,payload:{message:f()}})}catch(i){r({type:c.FAILURE,payload:{message:f(i)}})}}},W=()=>{Y(`${w.LIST_TYPE}`)};async function Y(t){j(!0),r({type:c.INIT_LOADER,payload:{loader:!0}});let n;const u=ie.LOCALE;try{const i=await oe(t),{status:y}=i,{data:{productsDetails:K},success:X}=i.data;X&&y===N[200]?(v(K.rows),j(!1),r({type:c.INIT_LOADER,payload:{loader:!1}})):(L(se[u].FETCHING_USERS_LIST),r({type:c.FAILURE,payload:{message:f()}}))}catch(i){n=f(i),G(!0),L(n),j(!1),r({type:c.FAILURE,payload:{message:n}})}}return a.useEffect(()=>{W()},[B,$]),a.useEffect(()=>{r({type:c.INIT})},[]),e.jsx(e.Fragment,{children:e.jsxs(s,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",spacing:2,my:2,children:[e.jsx(s,{item:!0,md:4,children:e.jsxs(O,{className:"profile-left-section",sx:{px:2,py:3,overflow:"hidden",boxShadow:1,background:h.navType==="dark"?"#103C65":"#fff"},children:[e.jsxs(s,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",position:"relative",sx:{marginTop:"20px"},children:[e.jsxs("div",{onMouseEnter:H,onMouseLeave:V,children:[e.jsx(je,{alt:"",sx:{width:120,height:120,border:`2px dashed ${o.icon?"#ff4842":"#3273ba"}`,color:`${o.icon?"#ff4842":"#fff"}`},color:"danger",src:l&&URL.createObjectURL(l)}),l!=null?e.jsx(ye,{placement:"top",title:"Click to remove icon",children:e.jsx(xe,{sx:{color:ee.ERROR_MSG_COLOR,background:"#fff",borderRadius:"50%",position:"absolute",top:0,left:"55%",cursor:"pointer",fontSize:"18px"},onClick:()=>{R(null),x(!1),b({target:{name:"icon",value:[]}}),T("icon")}})}):"",!l&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx("label",{className:"uploadFileInput",htmlFor:"uploadFileInput",children:e.jsx(he,{color:"#fff"})})}),e.jsx("input",{...q,type:"file",id:"uploadFileInput",accept:"image/*",name:"icon",onChange:t=>{R(t.target.files[0]),b(t),T("icon")},style:{display:"none"}})]}),o.icon&&e.jsx(I,{sx:{my:2,px:5,textAlign:"center"},error:!0,children:o.icon.message})]}),e.jsx(U,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",width:"100%",mb:2,style:{textAlign:"center"},children:e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",color:h.navType==="dark"?"#fff":"#000"},children:"Click to upload product icon"})})]})}),e.jsx(s,{item:!0,md:8,children:e.jsx(O,{className:"profile-right-section",sx:{p:3,boxShadow:1,background:h.navType==="dark"?"#103C65":"#fff"},children:e.jsxs("form",{onSubmit:k(Q),noValidate:!0,children:[e.jsxs(s,{container:!0,spacing:2,mb:3,children:[e.jsx(s,{item:!0,md:6,children:e.jsx(F,{...m("name"),label:"Name*",disabled:p,error:!!o.name,helperText:o.name?o.name.message:"",name:"name",value:d.name,variant:"outlined",onChange:P,fullWidth:!0})}),e.jsx(s,{item:!0,md:6,children:e.jsxs(Ee,{fullWidth:!0,error:!!o.role,children:[e.jsx(Se,{id:"demo-simple-select-label",children:"Product Type"}),e.jsx(_e,{...m("product_type_id"),id:"product_type_id",value:d.product_type_id,label:"Product Type*",onChange:z,children:C.length>0&&C.map((t,n)=>e.jsx(Ie,{value:t.id,children:t.name},n))}),o.product_type_id&&e.jsx(I,{sx:{ml:"15px"},error:!0,children:o.product_type_id.message})]})})]}),e.jsx(s,{container:!0,spacing:2,mb:3,children:e.jsx(s,{item:!0,md:12,children:e.jsx(F,{fullWidth:!0,multiline:!0,...m("description"),error:!!o.description,helperText:o.description?o.description.message:"",label:"Description*",name:"description",value:d.description,rows:4,onChange:P})})}),e.jsx(U,{direction:"row",justifyContent:"flex-end",alignItems:"center",my:2,children:e.jsx(Te,{loading:!!p,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(ge,{}),variant:"contained",children:p?"PLEASE WAIT...":"SUBMIT"})})]})})})]})})},bt=()=>e.jsxs(e.Fragment,{children:[e.jsx(le,{title:ae.CREATE_PRODUCT}),e.jsxs(ce,{className:"page-container users-page",heading:"Create new product",children:[e.jsxs(s,{container:!0,justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[e.jsx(s,{item:!0,children:e.jsx(ne,{breadcrumbs:[e.jsx(S,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:g.DASHBOARD,children:"dashboard"}),e.jsx(S,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:g.PRODUCTS_LIST,children:"products"}),"create new"]})}),e.jsx(s,{item:!0,mr:1,children:e.jsx(S,{className:"h-link",to:g.PRODUCTS_LIST,children:e.jsx(Ce,{sx:{borderRadius:"2pt"},variant:"contained",color:"primary",startIcon:e.jsx(de,{}),children:"Back"})})})]}),e.jsx(Re,{})]})]});export{bt as default};
