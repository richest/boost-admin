import{r as x,a as pe,b as me,j as e,G as d,V as r,p as Q,ah as T,d as O,a4 as F,a3 as ue,N as ge,K as J,g as Ce,D as xe,Q as Te,L as De,R as Ge}from"./index-Bb4T6yJS.js";import{P as ke}from"./container-Mdzkb4R0.js";import{A as ze}from"./helmet-BKDsicQe.js";import{W as Me}from"./WebBreadCrumb-CplDcnjI.js";import{u as he,o as fe,a as Pe}from"./yup-VhrNJgti.js";import{c as Z,a as k,f as Oe,d as de}from"./index.esm-B55s2Mzk.js";import{C as Re,a as Le}from"./ckeditor-DoMhieYw.js";import{A as y}from"./apiErrorResonse-CCtXlH33.js";import{d as je}from"./CancelTwoTone-g9I4gqmS.js";import{d as Ee}from"./AddPhotoAlternate-Dq9K76ig.js";import{d as ye}from"./Send-CIV9xzto.js";import{C as ee}from"./Card-Cg269qA4.js";import{T as W}from"./TextField-Dv9saPdb.js";import{F as q}from"./FormHelperText-D8o68a4M.js";import{S as Se}from"./Skeleton-Cv9Q_VQE.js";import{S as H}from"./Stack-yqW3PSS6.js";import{B as Ae}from"./Box-DzmxXICY.js";import{T as Y}from"./Typography-BvK0EBjx.js";import{T as be}from"./Tooltip-BPIgMGiH.js";import{A as X}from"./Avatar-CkCB1SYh.js";import{L as Ie}from"./LoadingButton-D3WD33Li.js";import{I as Fe}from"./iconify-C-ngdJty.js";import{B as _e}from"./Button-CoPqx7My.js";import{U as Be}from"./index-WvvUu4h8.js";import{T as qe,a as ce}from"./Tabs-BapWTaVr.js";import"./styled-BzESMtjz.js";import"./breadcrumbs-BoNbTSIP.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./Iconify-B2ea3Vhk.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./List-BGusPRli.js";import"./colorManipulator-C6WsgVx8.js";import"./Popper-BrZsYCFQ.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./KeyboardArrowRight--EGT-K8b.js";const We=Z().shape({title:k().trim().required("Title is required."),subtitle:k().trim().required("Subtitle is required."),description:k().trim().required("Description is required."),introImage:Oe().of(de().test("required","Image is required.",t=>t&&t.length>0).test("fileSize","Image's size cannot be more than 5 MB",t=>t&&t[0].size<=5242880).test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",t=>t&&["image/jpeg","image/png","image/jpg"].includes(t[0].type)))}),Ve=()=>{const{register:t,setValue:p,handleSubmit:$,trigger:U,formState:{errors:j}}=he({mode:"all",resolver:fe(We)}),[E,z]=x.useState([]),[o,v]=x.useState(""),i=pe(),{loader:C}=me(n=>n.request),D=async n=>{const l={upload_image_response_id:n};try{i({type:r.PROCESSING});const{status:m,data:{message:_}}=await Q(T.DELETE_IMAGE,l);m===O[200]?(z(R=>R.filter(S=>{var a;return((a=S.uploaded_images)==null?void 0:a.upload_image_response_id)!==n})),i({type:r.SUCCESS}),F.success(_)):i({type:r.FAILURE,payload:{message:y()}})}catch(m){i({type:r.FAILURE,payload:{message:y(m)}})}},M=async n=>{var _;const l=Array.from(n.target.files);if(l.length===0)return;E.length>0&&await D((_=E[0].uploaded_images)==null?void 0:_.upload_image_response_id);const m=l.map(async R=>{const S=new FormData;S.append("upload_image",R);try{i({type:r.PROCESSING});const{status:a,data:{message:g,data:b}}=await Q(T.UPLOAD_IMAGE,S);a===O[200]?(z(u=>[...u,b]),i({type:r.SUCCESS}),F.success(g)):i({type:r.FAILURE,payload:{message:y()}})}catch(a){i({type:r.FAILURE,payload:{message:y(a)}})}});await Promise.all(m)},G=async n=>{const l={key:"EDUCATION_PAGE",section:"INTRO",value:JSON.stringify({title:n.title,subtitle:n.subtitle,description:n.description,introImage:E}),status:1};try{i({type:r.PROCESSING});const{status:m,data:{message:_}}=await ue(T.UPDATE,l);m===O[200]?(i({type:r.SUCCESS,payload:{message:_}}),F.success(_),I()):i({type:r.FAILURE,payload:{message:y()}})}catch(m){i({type:r.FAILURE,payload:{message:y(m)}})}},I=async()=>{try{i({type:r.INIT_LOADER,payload:{loader:!0}});const n=await ge(`${T.GET}?key=EDUCATION_PAGE&section=INTRO`),{status:l,data:m}=n;if(l===O[200]){const _=JSON==null?void 0:JSON.parse(m==null?void 0:m.data.value),{description:R,title:S,subtitle:a,introImage:g}=_;z(g||[]),p("title",S),p("subtitle",a),p("description",R),v(R)}}catch(n){console.error("Error fetching content:",n)}finally{i({type:r.INIT_LOADER,payload:{loader:!1}})}};return x.useEffect(()=>{I()},[]),e.jsx(e.Fragment,{children:e.jsx(d,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(d,{item:!0,md:12,children:e.jsx(ee,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:$(G),noValidate:!0,children:[e.jsx(d,{mb:4,children:e.jsx(W,{...t("title"),label:"Title*",disabled:C,error:!!j.title,helperText:j.title?j.title.message:"",name:"title",variant:"outlined",fullWidth:!0})}),e.jsx(d,{mb:4,children:e.jsx(W,{...t("subtitle"),label:"Subtitle*",disabled:C,error:!!j.subtitle,helperText:j.subtitle?j.subtitle.message:"",name:"subtitle",variant:"outlined",fullWidth:!0})}),e.jsx(d,{mb:4,children:e.jsxs("div",{className:j.description?"errorCkEditor description_div":"description_div",children:[e.jsx(Re,{name:"description",style:{position:"relative",zIndex:"20"},config:{placeholder:"Description*",toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","insertTable","|","undo","redo"]}},editor:Le,data:o,onChange:(n,l)=>{p("description",l.getData()),U("description")},disabled:C,onReady:n=>{n.editing.view.change(l=>{l.setStyle("height","100%",n.editing.view.document.getRoot())})}}),j.description&&e.jsx(q,{error:!0,children:j.description.message})]})}),e.jsx(d,{container:!0,spacing:2,children:E==null?void 0:E.map(n=>{var l,m;return e.jsxs(d,{item:!0,xs:12,sm:6,md:4,position:"relative",children:[C?e.jsx(Se,{variant:"rectangular",width:"100%",height:"15em"}):e.jsx("img",{src:(l=n==null?void 0:n.uploaded_images)==null?void 0:l.upload_image_url,alt:"Uploaded",style:{width:"100%",height:"15em",objectFit:"cover",borderRadius:"4px"}}),e.jsx(je,{onClick:()=>{var _;return D((_=n.uploaded_images)==null?void 0:_.upload_image_response_id)},sx:{position:"absolute",top:5,right:-5,cursor:"pointer",color:"red",background:"#fff",borderRadius:"50%"}})]},(m=n.uploaded_images)==null?void 0:m.upload_image_response_id)})}),e.jsx(H,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsxs(Ae,{children:[e.jsx(Y,{variant:"h5",color:"text.primary",children:"Upload Image(Image Slider)"}),e.jsxs("label",{htmlFor:"file-upload",style:{display:"flex",justifyContent:"center",paddingTop:"10px",cursor:"pointer"},children:[e.jsx("input",{id:"file-upload",type:"file",multiple:!0,onChange:M,accept:"image/jpeg,image/png,image/jpg",style:{display:"none"}}),e.jsx(be,{title:"Add Images",children:e.jsx(X,{sx:{bgcolor:"#E5E8E8",width:60,height:60},children:e.jsx(Ee,{sx:{color:"#20a2b8"}})})})]})]})}),e.jsx(H,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(Ie,{loading:!!C,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(ye,{}),variant:"contained",children:C?"PLEASE WAIT...":"SUBMIT"})})]})})})})})},Je=Z().shape({title:k().trim().required("Title is required."),sections:Oe().of(Z().shape({title:k().trim().required("Title is required."),description:k().trim().required("Description is required."),url:k().trim().required("Link is required."),introImage:de().nullable().test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",t=>t&&t.uploaded_images?!0:t?["image/jpeg","image/png","image/jpg"].includes(t.type):!0).test("fileSize","Image's size cannot be more than 5 MB",t=>t&&t.uploaded_images?!0:t?t.size<=5242880:!0)}))}),He=()=>{const{loader:t}=me(S=>S.request),p=pe(),{register:$,setValue:U,handleSubmit:j,trigger:E,control:z,formState:{errors:o}}=he({mode:"all",resolver:fe(Je),defaultValues:{sections:[{title:"",description:"",url:"",introImage:null}]}}),{fields:v,append:i,remove:C}=Pe({control:z,name:"sections"}),[D,M]=x.useState([]),[G,I]=x.useState(""),n=async(S,a)=>{const g={upload_image_response_id:S};try{p({type:r.PROCESSING});const{status:b,data:{message:u}}=await Q(T.DELETE_IMAGE,g);if(b===O[200])M(s=>{const c=[...s];return c[a]=null,c}),U(`sections[${a}].introImage`,null),p({type:r.SUCCESS,payload:{}}),F.success(u);else throw new Error(y())}catch(b){p({type:r.FAILURE,payload:{message:b.message}})}},l=async(S,a)=>{const g=S.target.files[0];if(!g)return;const b=new FormData;b.append("upload_image",g);try{p({type:r.PROCESSING});const{status:u,data:{message:s,data:c}}=await Q(T.UPLOAD_IMAGE,b);if(u===O[200])M(h=>{const f=[...h];return f[a]={...c,size:g.size},f}),U(`sections[${a}].introImage`,{...c,size:g.size}),await E(`sections[${a}].introImage`),p({type:r.SUCCESS,payload:{}}),F.success(s);else throw new Error(y())}catch(u){p({type:r.FAILURE,payload:{message:y(u)}})}},m=async S=>{let a={key:"EDUCATION_PAGE",section:"ENGAGING",value:JSON.stringify({title:S.title,sections:S.sections}),status:1};try{p({type:r.PROCESSING});const{status:g,data:{message:b}}=await ue(T.UPDATE,a);g===O[200]?(p({type:r.SUCCESS,payload:{message:b}}),F.success(b),R()):p({type:r.FAILURE,payload:{message:y()}})}catch(g){p({type:r.FAILURE,payload:{message:y(g)}})}};async function _(S){p({type:r.INIT_LOADER,payload:{loader:!0}});const a=xe.LOCALE;try{const g=await ge(S),{status:b}=g,{data:u,success:s}=g.data;if(s&&b===O[200]){const c=JSON.parse(u==null?void 0:u.value),{title:h,sections:f}=c;U("title",h),U("sections",f),M(f.map(L=>L.introImage||null))}else I(Ce[a].FETCHING_USERS_LIST)}catch(g){y(g)}p({type:r.INIT_LOADER,payload:{loader:!1}})}const R=()=>{_(`${T.GET}?key=EDUCATION_PAGE&section=ENGAGING`)};return x.useEffect(()=>{R()},[]),e.jsx(e.Fragment,{children:e.jsx(d,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(d,{item:!0,md:12,children:e.jsx(ee,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:j(m),noValidate:!0,children:[e.jsx(d,{mb:4,children:e.jsx(W,{...$("title"),label:"Title*",disabled:t,error:!!o.title,helperText:o.title?o.title.message:"",name:"title",variant:"outlined",fullWidth:!0})}),e.jsx(d,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:v.map((S,a)=>{var g,b,u,s,c,h,f,L,A,P,w,te,se,ie,ae,re,oe,ne,le;return e.jsxs(d,{item:!0,md:6,children:[e.jsx(Ae,{sx:{mb:2},children:e.jsx(Y,{variant:"h5",children:`Section ${a+1}`})}),e.jsx(d,{mb:4,children:e.jsx(W,{...$(`sections[${a}].title`),label:"Section Title*",disabled:t,error:!!((b=(g=o==null?void 0:o.sections)==null?void 0:g[a])!=null&&b.title),helperText:(c=(s=(u=o==null?void 0:o.sections)==null?void 0:u[a])==null?void 0:s.title)==null?void 0:c.message,name:`sections[${a}].title`,variant:"outlined",fullWidth:!0})}),e.jsx(d,{mb:4,children:e.jsx(W,{...$(`sections[${a}].description`),label:"Description*",disabled:t,error:!!((f=(h=o==null?void 0:o.sections)==null?void 0:h[a])!=null&&f.description),helperText:(P=(A=(L=o==null?void 0:o.sections)==null?void 0:L[a])==null?void 0:A.description)==null?void 0:P.message,name:`sections[${a}].description`,variant:"outlined",fullWidth:!0})}),e.jsx(d,{mb:4,children:e.jsx(W,{...$(`sections[${a}].url`),label:"Link*",disabled:t,error:!!((te=(w=o==null?void 0:o.sections)==null?void 0:w[a])!=null&&te.url),helperText:(ae=(ie=(se=o==null?void 0:o.sections)==null?void 0:se[a])==null?void 0:ie.url)==null?void 0:ae.message,name:`sections[${a}].url`,variant:"outlined",fullWidth:!0})}),e.jsxs(d,{position:"relative",mb:2,children:[(oe=(re=D[a])==null?void 0:re.uploaded_images)!=null&&oe.upload_image_url?e.jsxs(e.Fragment,{children:[e.jsx(be,{title:"Click to remove image",placement:"top",children:e.jsx(je,{sx:{color:J.ERROR_MSG_COLOR,position:"absolute",top:-5,right:-5,cursor:"pointer",fontSize:"18px",zIndex:99,background:"white",borderRadius:"50%"},onClick:()=>{var V,K;(K=(V=D[a])==null?void 0:V.uploaded_images)!=null&&K.upload_image_response_id&&n(D[a].uploaded_images.upload_image_response_id,a),E(`sections[${a}].introImage`)}})}),e.jsx(X,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${o[`sections[${a}].introImage`]?"#ff4842":"#20A2B8"}`,color:`${o[`sections[${a}].introImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",src:D[a].uploaded_images.upload_image_url,className:"create-blog-image"})]}):e.jsxs("label",{htmlFor:`icon-upload-${a}`,children:[t?e.jsx(Se,{variant:"rectangular",width:"100%",height:"10em"}):e.jsx(X,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${o[`sections[${a}].introImage`]?"#ff4842":"#20A2B8"}`,color:`${o[`sections[${a}].introImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",children:e.jsxs(H,{container:!0,alignItems:"center",justifyContent:"center",children:[e.jsx(Ee,{sx:{fontSize:"3em",color:`${o[`sections[${a}].introImage`]?"#ff4842":J.PRIMARY_COLOR}`}}),e.jsx(Y,{color:J.PRIMARY_COLOR,variant:"h4",children:"Upload file"}),e.jsx(q,{error:!1,children:"Allowed *.jpeg, *.jpg, *.png max size of 5 MB."})]})}),e.jsx("input",{accept:"image/*",id:`icon-upload-${a}`,type:"file",style:{display:"none"},onChange:V=>{l(V,a),E(`sections[${a}].introImage`)}})]}),o[`sections[${a}].introImage`]&&e.jsx(q,{error:!0,children:o[`sections[${a}].introImage`].message||""})]}),((le=(ne=o==null?void 0:o.sections)==null?void 0:ne[a])==null?void 0:le.introImage)&&e.jsx(q,{error:!0,children:o.sections[a].introImage.message}),v.length>1&&e.jsx(d,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(_e,{type:"button",onClick:()=>{C(a),M(V=>{const K=[...V];return K[a]=null,K})},color:"error",children:"Remove Section"})})]},S.id)})}),e.jsx(d,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(_e,{type:"button",onClick:()=>i({title:"",url:"",description:"",introImage:null}),children:e.jsx(Fe,{icon:"basil:add-outline",width:"32",height:"32"})})}),e.jsx(H,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(Ie,{loading:!!t,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(ye,{}),variant:"contained",children:t?"PLEASE WAIT...":"SUBMIT"})})]})})})})})},Ke=Z().shape({sections:Oe().of(Z().shape({title:k().trim().required("Title is required."),subtitle:k().trim().required("Subtitle is required."),description:k().trim().required("Description is required."),descriptionImage:de().nullable().test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",t=>t&&t.uploaded_images?!0:t?["image/jpeg","image/png","image/jpg"].includes(t.type):!0).test("fileSize","Image's size cannot be more than 5 MB",t=>t&&t.uploaded_images?!0:t?t.size<=5242880:!0),introImage:de().nullable().test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",t=>t&&t.uploaded_images?!0:t?["image/jpeg","image/png","image/jpg"].includes(t.type):!0).test("fileSize","Image's size cannot be more than 5 MB",t=>t&&t.uploaded_images?!0:t?t.size<=5242880:!0)}))}),Ye=()=>{const t=pe(),{loader:p}=me(u=>u.request);x.useState({});const[$,U]=x.useState(""),{register:j,setValue:E,handleSubmit:z,trigger:o,control:v,formState:{errors:i}}=he({mode:"all",resolver:fe(Ke),defaultValues:{sections:[{title:"",subtitle:"",description:"",descriptionImage:null,introImage:null}]}});j("introImage");const{fields:C,append:D,remove:M}=Pe({control:v,name:"sections"}),[G,I]=x.useState([]),[n,l]=x.useState([]),m=async(u,s)=>{const c={upload_image_response_id:u};try{t({type:r.PROCESSING});const{status:h,data:{message:f}}=await Q(T.DELETE_IMAGE,c);if(h===O[200])I(L=>{const A=[...L];return A[s]=null,A}),E(`sections[${s}].introImage`,null),t({type:r.SUCCESS,payload:{}}),F.success(f);else throw new Error(y())}catch(h){t({type:r.FAILURE,payload:{message:h.message}})}},_=async(u,s)=>{const c={upload_image_response_id:u};try{t({type:r.PROCESSING});const{status:h,data:{message:f}}=await Q(T.DELETE_IMAGE,c);if(h===O[200])l(L=>{const A=[...L];return A[s]=null,A}),E(`sections[${s}].descriptionImage`,null),t({type:r.SUCCESS,payload:{}}),F.success(f);else throw new Error(y())}catch(h){t({type:r.FAILURE,payload:{message:h.message}})}},R=async(u,s)=>{const c=u.target.files[0];if(!c)return;const h=new FormData;h.append("upload_image",c);try{t({type:r.PROCESSING});const{status:f,data:{message:L,data:A}}=await Q(T.UPLOAD_IMAGE,h);if(f===O[200])I(P=>{const w=[...P];return w[s]={...A,size:c.size},w}),E(`sections[${s}].introImage`,{...A,size:c.size}),await o(`sections[${s}].introImage`),t({type:r.SUCCESS,payload:{}}),F.success(L);else throw new Error(y())}catch(f){t({type:r.FAILURE,payload:{message:y(f)}})}},S=async(u,s)=>{const c=u.target.files[0];if(!c)return;const h=new FormData;h.append("upload_image",c);try{t({type:r.PROCESSING});const{status:f,data:{message:L,data:A}}=await Q(T.UPLOAD_IMAGE,h);if(f===O[200])l(P=>{const w=[...P];return w[s]={...A,size:c.size},w}),E(`sections[${s}].descriptionImage`,{...A,size:c.size}),await o(`sections[${s}].descriptionImage`),t({type:r.SUCCESS,payload:{}}),F.success(L);else throw new Error(y())}catch(f){t({type:r.FAILURE,payload:{message:y(f)}})}},a=async u=>{let s={key:"EDUCATION_PAGE",section:"BLOCKS",value:JSON.stringify({sections:u.sections}),status:1};try{t({type:r.PROCESSING});const{status:c,data:{message:h}}=await ue(T.UPDATE,s);c===O[200]?(t({type:r.SUCCESS,payload:{message:h}}),F.success(h),b()):t({type:r.FAILURE,payload:{message:y()}})}catch(c){t({type:r.FAILURE,payload:{message:y(c)}})}};async function g(u){t({type:r.INIT_LOADER,payload:{loader:!0}});const s=xe.LOCALE;try{const c=await ge(u),{status:h}=c,{data:f,success:L}=c.data;if(L&&h===O[200]){const A=JSON.parse(f==null?void 0:f.value),{sections:P}=A;E("sections",P),I(P.map(w=>w.introImage||null)),l(P.map(w=>w.descriptionImage||null))}else U(Ce[s].FETCHING_USERS_LIST)}catch(c){y(c)}t({type:r.INIT_LOADER,payload:{loader:!1}})}const b=()=>{g(`${T.GET}?key=EDUCATION_PAGE&section=BLOCKS`)};return x.useEffect(()=>{b()},[]),e.jsx(e.Fragment,{children:e.jsx(d,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(d,{item:!0,md:12,children:e.jsx(ee,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:z(a),noValidate:!0,children:[C.map((u,s)=>{var c,h,f,L,A,P,w,te,se,ie,ae,re,oe,ne,le,V,K,$e,we,Ne,Ue,ve;return e.jsxs(d,{item:!0,md:12,children:[e.jsx(Ae,{sx:{mb:2},children:e.jsx(Y,{variant:"h5",children:u.title?u.title:`Section ${s+1}`})}),e.jsx(d,{mb:4,children:e.jsx(W,{...j(`sections[${s}].title`),label:"Section Title*",disabled:p,error:!!((h=(c=i==null?void 0:i.sections)==null?void 0:c[s])!=null&&h.title),helperText:(A=(L=(f=i==null?void 0:i.sections)==null?void 0:f[s])==null?void 0:L.title)==null?void 0:A.message,name:`sections[${s}].title`,variant:"outlined",fullWidth:!0})}),e.jsx(d,{mb:4,children:e.jsx(W,{...j(`sections[${s}].subtitle`),label:"Section Subtitle*",disabled:p,error:!!((w=(P=i==null?void 0:i.sections)==null?void 0:P[s])!=null&&w.subtitle),helperText:(ie=(se=(te=i==null?void 0:i.sections)==null?void 0:te[s])==null?void 0:se.subtitle)==null?void 0:ie.message,name:`sections[${s}].subtitle`,variant:"outlined",fullWidth:!0})}),e.jsxs(d,{mb:4,children:[e.jsx("div",{className:(re=(ae=i==null?void 0:i.sections)==null?void 0:ae[s])!=null&&re.description?"errorCkEditor description_div":"description_div",children:e.jsx(Re,{editor:Le,data:u.description,onChange:(N,B)=>{E(`sections[${s}].description`,B.getData()),o(`sections[${s}].description`)},config:{placeholder:"Description*",toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","insertTable","|","undo","redo"]}},onReady:N=>{N.editing.view.change(B=>{B.setStyle("height","100%",N.editing.view.document.getRoot())})}})}),((ne=(oe=i==null?void 0:i.sections)==null?void 0:oe[s])==null?void 0:ne.description)&&e.jsx(q,{error:!0,children:i.sections[s].description.message})]}),e.jsx(Y,{py:2,variant:"h5",children:"Description Image"}),e.jsxs(d,{position:"relative",mb:2,children:[(V=(le=n[s])==null?void 0:le.uploaded_images)!=null&&V.upload_image_url?e.jsxs(e.Fragment,{children:[e.jsx(be,{title:"Click to remove image",placement:"top",children:e.jsx(je,{sx:{color:J.ERROR_MSG_COLOR,position:"absolute",top:-5,right:-5,cursor:"pointer",fontSize:"18px",zIndex:99,background:"white",borderRadius:"50%"},onClick:()=>{var N,B;(B=(N=n[s])==null?void 0:N.uploaded_images)!=null&&B.upload_image_response_id&&_(n[s].uploaded_images.upload_image_response_id,s),o(`sections[${s}].descriptionImage`)}})}),e.jsx(X,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${i[`sections[${s}].descriptionImage`]?"#ff4842":"#20A2B8"}`,color:`${i[`sections[${s}].descriptionImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",src:n[s].uploaded_images.upload_image_url,className:"create-blog-image"})]}):e.jsxs("label",{htmlFor:`icon-upload-${s}`,children:[p?e.jsx(Se,{variant:"rectangular",width:"100%",height:"10em"}):e.jsx(X,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${i[`sections[${s}].descriptionImage`]?"#ff4842":"#20A2B8"}`,color:`${i[`sections[${s}].descriptionImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",children:e.jsxs(H,{container:!0,alignItems:"center",justifyContent:"center",children:[e.jsx(Ee,{sx:{fontSize:"3em",color:`${i[`sections[${s}].descriptionImage`]?"#ff4842":J.PRIMARY_COLOR}`}}),e.jsx(Y,{color:J.PRIMARY_COLOR,variant:"h4",children:"Upload file"}),e.jsx(q,{error:!1,children:"Allowed *.jpeg, *.jpg, *.png max size of 5 MB."})]})}),e.jsx("input",{accept:"image/*",id:`icon-upload-${s}`,type:"file",style:{display:"none"},onChange:N=>{S(N,s),o(`sections[${s}].descriptionImage`)}})]}),i[`sections[${s}].descriptionImage`]&&e.jsx(q,{error:!0,children:i[`sections[${s}].descriptionImage`].message||""})]}),(($e=(K=i==null?void 0:i.sections)==null?void 0:K[s])==null?void 0:$e.descriptionImage)&&e.jsx(q,{error:!0,children:i.sections[s].descriptionImage.message}),e.jsx(Y,{py:2,variant:"h5",children:"Main Image"}),e.jsxs(d,{position:"relative",mb:2,children:[(Ne=(we=G[s])==null?void 0:we.uploaded_images)!=null&&Ne.upload_image_url?e.jsxs(e.Fragment,{children:[e.jsx(be,{title:"Click to remove image",placement:"top",children:e.jsx(je,{sx:{color:J.ERROR_MSG_COLOR,position:"absolute",top:-5,right:-5,cursor:"pointer",fontSize:"18px",zIndex:99,background:"white",borderRadius:"50%"},onClick:()=>{var N,B;(B=(N=G[s])==null?void 0:N.uploaded_images)!=null&&B.upload_image_response_id&&m(G[s].uploaded_images.upload_image_response_id,s),o(`sections[${s}].introImage`)}})}),e.jsx(X,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${i[`sections[${s}].introImage`]?"#ff4842":"#20A2B8"}`,color:`${i[`sections[${s}].introImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",src:G[s].uploaded_images.upload_image_url,className:"create-blog-image"})]}):e.jsxs("label",{htmlFor:`icon-upload-${s}`,children:[p?e.jsx(Se,{variant:"rectangular",width:"100%",height:"10em"}):e.jsx(X,{sx:{width:"auto",height:"10em",border:`2.5px dashed ${i[`sections[${s}].introImage`]?"#ff4842":"#20A2B8"}`,color:`${i[`sections[${s}].introImage`]?"#ff4842":"#fff"}`,cursor:"pointer",backgroundColor:"#e6ecec"},variant:"rounded",children:e.jsxs(H,{container:!0,alignItems:"center",justifyContent:"center",children:[e.jsx(Ee,{sx:{fontSize:"3em",color:`${i[`sections[${s}].introImage`]?"#ff4842":J.PRIMARY_COLOR}`}}),e.jsx(Y,{color:J.PRIMARY_COLOR,variant:"h4",children:"Upload file"}),e.jsx(q,{error:!1,children:"Allowed *.jpeg, *.jpg, *.png max size of 5 MB."})]})}),e.jsx("input",{accept:"image/*",id:`icon-upload-${s}`,type:"file",style:{display:"none"},onChange:N=>{R(N,s),o(`sections[${s}].introImage`)}})]}),i[`sections[${s}].introImage`]&&e.jsx(q,{error:!0,children:i[`sections[${s}].introImage`].message||""})]}),((ve=(Ue=i==null?void 0:i.sections)==null?void 0:Ue[s])==null?void 0:ve.introImage)&&e.jsx(q,{error:!0,children:i.sections[s].introImage.message}),C.length>1&&e.jsx(d,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(_e,{type:"button",onClick:()=>{M(s),I(N=>{const B=[...N];return B[s]=null,B})},color:"error",children:"Remove Section"})})]},u.id)}),e.jsx(d,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(_e,{type:"button",onClick:()=>D({title:"",subtitle:"",description:"",introImage:null}),children:e.jsx(Fe,{icon:"basil:add-outline",width:"32",height:"32"})})}),e.jsx(H,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(Ie,{loading:!!p,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(ye,{}),variant:"contained",children:p?"PLEASE WAIT...":"SUBMIT"})})]})})})})})},Qe=Z().shape({title:k().trim().required("Title is required."),description:k().trim().required("Description is required.")}),Xe=()=>{const t=pe(),{loader:p}=me(I=>I.request),[$,U]=x.useState({}),[j,E]=x.useState(""),{register:z,setValue:o,handleSubmit:v,trigger:i,formState:{errors:C}}=he({mode:"all",resolver:fe(Qe)});x.useState({}),z("introImage");const D=async I=>{let n={key:"EDUCATION_PAGE",section:"AVAILABLE",value:JSON.stringify({title:I.title,description:I.description}),status:1};try{t({type:r.PROCESSING});const{status:l,data:{message:m}}=await ue(T.UPDATE,n);l===O[200]?(t({type:r.SUCCESS,payload:{message:m}}),F.success(m),G()):t({type:r.FAILURE,payload:{message:y()}})}catch(l){t({type:r.FAILURE,payload:{message:y(l)}})}};async function M(I){t({type:r.INIT_LOADER,payload:{loader:!0}});const n=xe.LOCALE;try{const l=await ge(I),{status:m}=l,{data:_,success:R}=l.data;if(R&&m===O[200]){const S=JSON.parse(_==null?void 0:_.value),{title:a,description:g}=S;o("title",a),o("description",g),U(g)}else E(Ce[n].FETCHING_USERS_LIST)}catch(l){y(l)}t({type:r.INIT_LOADER,payload:{loader:!1}})}const G=()=>{M(`${T.GET}?key=EDUCATION_PAGE&section=AVAILABLE`)};return x.useEffect(()=>{G()},[]),e.jsx(e.Fragment,{children:e.jsx(d,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(d,{item:!0,md:12,children:e.jsx(ee,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:v(D),noValidate:!0,children:[e.jsx(d,{mb:4,children:e.jsx(W,{...z("title"),label:"Title*",disabled:p,error:!!C.title,helperText:C.title?C.title.message:"",name:"title",variant:"outlined",fullWidth:!0})}),e.jsxs(d,{mb:4,children:[e.jsx("div",{className:C.description?"errorCkEditor description_div":"description_div",children:e.jsx(Re,{name:"description",style:{position:"relative",zIndex:"20"},config:{placeholder:"Description*",toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","insertTable","|","undo","redo"]}},editor:Le,data:$,onChange:(I,n)=>{o("description",n.getData()),i("description")},onReady:I=>{I.editing.view.change(n=>{n.setStyle("height","100%",I.editing.view.document.getRoot())})}})}),C.description?e.jsx(q,{error:!0,children:C.description.message}):""]}),e.jsx(H,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(Ie,{loading:!!p,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(ye,{}),variant:"contained",children:p?"PLEASE WAIT...":"SUBMIT"})})]})})})})})},Ze=Z().shape({title:k().trim().required("Title is required."),introImage:de().test("required","Image is required.",t=>t.length>0).test("fileSize","Image's sizie can not be more than 5 MB",t=>t.length&&t[0].size<=5242880).test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",t=>t.length&&["image/jpeg","image/png","image/jpg"].includes(t[0].type))}),et=()=>{const t=pe(),{loader:p}=me(I=>I.request);x.useState({});const[$,U]=x.useState(""),{register:j,setValue:E,handleSubmit:z,trigger:o,formState:{errors:v}}=he({mode:"all",resolver:fe(Ze)}),[i,C]=x.useState({});j("introImage");const D=async I=>{let n={key:"EDUCATION_PAGE",section:"REMOTE",value:JSON.stringify({title:I.title,introImage:i}),status:1};try{t({type:r.PROCESSING});const{status:l,data:{message:m}}=await ue(T.UPDATE,n);l===O[200]?(t({type:r.SUCCESS,payload:{message:m}}),F.success(m),G()):t({type:r.FAILURE,payload:{message:y()}})}catch(l){t({type:r.FAILURE,payload:{message:y(l)}})}};async function M(I){var l;t({type:r.INIT_LOADER,payload:{loader:!0}});const n=xe.LOCALE;try{const m=await ge(I),{status:_}=m,{data:R,success:S}=m.data;if(S&&_===O[200]){const a=JSON.parse(R==null?void 0:R.value),{title:g,introImage:b}=a;C(b),E("title",g),E("introImage",(l=b==null?void 0:b.uploaded_images)!=null&&l.upload_image_url?[{size:100,type:"image/jpg"}]:{})}else U(Ce[n].FETCHING_USERS_LIST)}catch(m){y(m)}t({type:r.INIT_LOADER,payload:{loader:!1}})}const G=()=>{M(`${T.GET}?key=EDUCATION_PAGE&section=REMOTE`)};return x.useEffect(()=>{G()},[]),e.jsx(e.Fragment,{children:e.jsx(d,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(d,{item:!0,md:12,children:e.jsx(ee,{className:"profile-right-section",sx:{p:3},children:e.jsxs("form",{onSubmit:z(D),noValidate:!0,children:[e.jsx(d,{mb:4,children:e.jsx(W,{...j("title"),label:"Title*",disabled:p,error:!!v.title,helperText:v.title?v.title.message:"",name:"title",variant:"outlined",fullWidth:!0})}),e.jsx(d,{mb:4,children:e.jsx(Be,{setValue:E,imageObj:i,setImageObj:C,errors:v,register:j,trigger:o,name:"introImage",loader:p})}),e.jsx(H,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(Ie,{loading:!!p,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(ye,{}),variant:"contained",children:p?"PLEASE WAIT...":"SUBMIT"})})]})})})})})},Kt=()=>{const[t,p]=x.useState("INTRO");function $(j){return{value:j,id:`content-tab-${j}`,"aria-controls":`content-tabpanel-${j}`}}const U=(j,E)=>{p(E)};return e.jsxs(e.Fragment,{children:[e.jsx(ze,{title:Te.WEB_CONTENT}),e.jsxs(ke,{className:"page-container users-page",heading:Te.WEB_CONTENT,children:[e.jsx(Me,{breadcrumbs:[e.jsx(De,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:Ge.DASHBOARD,children:"dashboard"}),e.jsx(De,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:Ge.WEB_CONTENT,children:Te.WEB_CONTENT}),"education"]}),e.jsxs(ee,{sx:{mt:4,boxShadow:3},children:[e.jsx(Ae,{children:e.jsxs(qe,{value:t,onChange:U,variant:"scrollable",scrollButtons:"auto","aria-label":"basic tabs example",children:[e.jsx(ce,{label:"Introduction",...$("INTRO")}),e.jsx(ce,{label:"engaging materials",...$("ENGAGING")}),e.jsx(ce,{label:"Blocks",...$("BLOCKS")}),e.jsx(ce,{label:"remote learning",...$("REMOTE")}),e.jsx(ce,{label:"Available blocks",...$("AVAILABLE")})]})}),t==="INTRO"&&e.jsx(Ve,{}),t==="ENGAGING"&&e.jsx(He,{}),t==="BLOCKS"&&e.jsx(Ye,{}),t==="REMOTE"&&e.jsx(et,{}),t==="AVAILABLE"&&e.jsx(Xe,{})]})]})]})};export{Kt as default};
