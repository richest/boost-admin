import{a as H,b as Q,r as c,j as e,Q as E,L as C,R as D,G as a,V as l,a3 as $,ah as I,d as A,a4 as J,N as K,g as X,D as Y}from"./index-Bb4T6yJS.js";import{W as Z}from"./WebBreadCrumb-CplDcnjI.js";import{P as ee}from"./container-Mdzkb4R0.js";import{A as te}from"./helmet-BKDsicQe.js";import{u as ie,o as se}from"./yup-VhrNJgti.js";import{c as re,a as u,d as oe}from"./index.esm-B55s2Mzk.js";import{A as x}from"./apiErrorResonse-CCtXlH33.js";import{U as ne}from"./index-WvvUu4h8.js";import{C as O,a as _}from"./ckeditor-DoMhieYw.js";import{d as ae}from"./Send-CIV9xzto.js";import{C as N}from"./Card-Cg269qA4.js";import{T as L}from"./TextField-Dv9saPdb.js";import{F as R}from"./FormHelperText-D8o68a4M.js";import{S as me}from"./Stack-yqW3PSS6.js";import{L as le}from"./LoadingButton-D3WD33Li.js";import"./breadcrumbs-BoNbTSIP.js";import"./Typography-BvK0EBjx.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./Iconify-B2ea3Vhk.js";import"./iconify-C-ngdJty.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./Button-CoPqx7My.js";import"./styled-BzESMtjz.js";import"./CancelTwoTone-g9I4gqmS.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./AddPhotoAlternate-Dq9K76ig.js";import"./Tooltip-BPIgMGiH.js";import"./Popper-BrZsYCFQ.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./Skeleton-Cv9Q_VQE.js";import"./colorManipulator-C6WsgVx8.js";import"./Avatar-CkCB1SYh.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./List-BGusPRli.js";const de=re().shape({title:u().trim().required("Title is required."),description:u().trim().required("Description is required."),missionTitle:u().trim().required("Title is required."),missionDescription:u().trim().required("Description is required."),introImage:oe().test("required","Image is required.",i=>i.length>0).test("fileSize","Image's sizie can not be more than 5 MB",i=>i.length&&i[0].size<=5242880).test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",i=>i.length&&["image/jpeg","image/png","image/jpg"].includes(i[0].type))}),st=()=>{const i=H(),{loader:d}=Q(t=>t.request),[v,U]=c.useState({}),[P,q]=c.useState({}),[ce,B]=c.useState(""),{register:p,setValue:o,handleSubmit:W,trigger:h,formState:{errors:s}}=ie({mode:"all",resolver:se(de)}),[b,j]=c.useState({});p("introImage");const k=async t=>{let r={key:"ABOUT_PAGE",section:"INTRO",value:JSON.stringify({title:t.title,description:t.description,missionTitle:t.missionTitle,missionDescription:t.missionDescription,introImage:b}),status:1};try{i({type:l.PROCESSING});const{status:m,data:{message:n}}=await $(I.UPDATE,r);m===A[200]?(i({type:l.SUCCESS,payload:{message:n}}),J.success(n),f()):i({type:l.FAILURE,payload:{message:x()}})}catch(m){i({type:l.FAILURE,payload:{message:x(m)}})}};async function w(t){var m;i({type:l.INIT_LOADER,payload:{loader:!0}});const r=Y.LOCALE;try{const n=await K(t),{status:F}=n,{data:T,success:G}=n.data;if(G&&F===A[200]){const M=JSON.parse(T==null?void 0:T.value),{title:z,description:y,introImage:g,missionTitle:V,missionDescription:S}=M;j(g),o("title",z),o("description",y),o("missionTitle",V),o("missionDescription",S),U(y),q(S),o("introImage",(m=g==null?void 0:g.uploaded_images)!=null&&m.upload_image_url?[{size:100,type:"image/jpg"}]:{})}else B(X[r].FETCHING_USERS_LIST)}catch(n){x(n)}i({type:l.INIT_LOADER,payload:{loader:!1}})}const f=()=>{w(`${I.GET}?key=ABOUT_PAGE&section=INTRO`)};return c.useEffect(()=>{f()},[]),e.jsxs(e.Fragment,{children:[e.jsx(te,{title:E.WEB_CONTENT}),e.jsxs(ee,{className:"page-container users-page",heading:E.WEB_CONTENT,children:[e.jsx(Z,{breadcrumbs:[e.jsx(C,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:D.DASHBOARD,children:"dashboard"}),e.jsx(C,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:D.WEB_CONTENT,children:E.WEB_CONTENT}),"About-Page"]}),e.jsx(N,{sx:{mt:4,boxShadow:3},children:e.jsx(a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:e.jsx(a,{item:!0,md:12,children:e.jsxs(N,{className:"profile-right-section",sx:{p:3},children:[e.jsx("h3",{style:{margin:"0",fontWeight:"500",marginBottom:"20px"},children:"About Page"}),e.jsxs("form",{onSubmit:W(k),noValidate:!0,children:[e.jsx(a,{mb:4,children:e.jsx(ne,{setValue:o,imageObj:b,setImageObj:j,errors:s,register:p,trigger:h,name:"introImage",loader:d})}),e.jsx(a,{mb:4,children:e.jsx(L,{...p("title"),label:"Title*",disabled:d,error:!!s.title,helperText:s.title?s.title.message:"",name:"title",variant:"outlined",fullWidth:!0})}),e.jsxs(a,{mb:4,children:[e.jsx("div",{className:s.description?"errorCkEditor description_div":"description_div",children:e.jsx(O,{name:"description",style:{position:"relative",zIndex:"20"},config:{placeholder:"Description*",toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","insertTable","|","undo","redo"]}},editor:_,data:v,onChange:(t,r)=>{o("description",r.getData()),h("description")},onReady:t=>{t.editing.view.change(r=>{r.setStyle("height","100%",t.editing.view.document.getRoot())})}})}),s.description?e.jsx(R,{error:!0,children:s.description.message}):""]}),e.jsx(a,{mb:4,children:e.jsx(L,{...p("missionTitle"),label:"Title*",disabled:d,error:!!s.missionTitle,helperText:s.missionTitle?s.missionTitle.message:"",name:"missionTitle",variant:"outlined",fullWidth:!0})}),e.jsxs(a,{mb:4,children:[e.jsx("div",{className:s.missionDescription?"errorCkEditor description_div":"description_div",children:e.jsx(O,{name:"missionDescription",style:{position:"relative",zIndex:"20"},config:{placeholder:"Description*",toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","insertTable","|","undo","redo"]}},editor:_,data:P,onChange:(t,r)=>{o("missionDescription",r.getData()),h("missionDescription")},onReady:t=>{t.editing.view.change(r=>{r.setStyle("height","100%",t.editing.view.document.getRoot())})}})}),s.missionDescription?e.jsx(R,{error:!0,children:s.missionDescription.message}):""]}),e.jsx(me,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:e.jsx(le,{loading:!!d,size:"medium",type:"submit",loadingPosition:"end",endIcon:e.jsx(ae,{}),variant:"contained",children:d?"PLEASE WAIT...":"SUBMIT"})})]})]})})})})]})]})};export{st as default};
