import{s as q,P as d,u as V,b as w,j as t,a6 as W,a as z,r as C,Q as I,G as s,L as S,R as x,V as m,a3 as M,ah as v,d as N,a4 as H,N as J,g as Q,D as K}from"./index-Bb4T6yJS.js";import{A as X}from"./helmet-BKDsicQe.js";import{P as Z}from"./container-Mdzkb4R0.js";import{d as tt}from"./ArrowBack-huGvzFdU.js";import{P as et}from"./breadcrumbs-BoNbTSIP.js";import{u as rt,o as st,a as at}from"./yup-VhrNJgti.js";import{c as B,f as it,a as ot}from"./index.esm-B55s2Mzk.js";import{A as T}from"./apiErrorResonse-CCtXlH33.js";import{I as nt}from"./Iconify-B2ea3Vhk.js";import{S as ct}from"./SkeltonCardLoader-BFqZXtrl.js";import{C as L}from"./Card-Cg269qA4.js";import{T as f}from"./Typography-BvK0EBjx.js";import{d as lt}from"./Add-CMcxYLjt.js";import{d as mt}from"./Delete-DOmi5ats.js";import{d as dt}from"./Send-CIV9xzto.js";import{B as R}from"./Button-CoPqx7My.js";import{S as D}from"./Skeleton-Cv9Q_VQE.js";import{B as pt}from"./Box-DzmxXICY.js";import{T as ut}from"./TextField-Dv9saPdb.js";import{S as gt}from"./Stack-yqW3PSS6.js";import{L as ht}from"./LoadingButton-D3WD33Li.js";import"./styled-BzESMtjz.js";import"./createSvgIcon-Cvxe-UMk.js";import"./ButtonBase-D0CLtmKS.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./Breadcrumbs-CYgmF-zU.js";import"./useSlotProps-CkCdCphK.js";import"./iconify-C-ngdJty.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./Avatar-CkCB1SYh.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./colorManipulator-C6WsgVx8.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./List-BGusPRli.js";import"./FormHelperText-D8o68a4M.js";q("div")(({theme:e})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:e.spacing(8),height:e.spacing(8),justifyContent:"center",marginBottom:e.spacing(3)}));U.propTypes={color:d.string,icon:d.string,title:d.string.isRequired,path:d.string.isRequired,sx:d.object};function U({isLoading:e,path:o,title:y,sx:j,...E}){const p=V(),u=w(A=>A.customization);return e&&e!==void 0?t.jsx(ct,{}):t.jsx(W,{style:{textDecoration:"none"},to:o,state:{category:y.replace(/[\s/]+/g,"-").toLowerCase()},className:"web-content-card",children:t.jsxs(L,{sx:{py:5,boxShadow:1,textAlign:"center",background:u.navType==="dark"?"#0e1522":p.palette.primary.light,...j},...E,children:[t.jsx(nt,{icon:"lsicon:folder-filled",width:30,height:30,style:{color:"#20a2b8"}}),t.jsx(f,{variant:"h4",sx:{color:u.navType==="dark"?p.palette.primary.light:"#0e1522"},children:y})]})})}const xt=B().shape({categories:it().of(B().shape({title:ot().trim().required("Title is required.")}))});function ne(){const e=z(),{loader:o}=w(i=>i.request),[y,j]=C.useState(""),[E,p]=C.useState([]),{register:u,setValue:A,handleSubmit:P,trigger:ft,control:k,formState:{errors:c}}=rt({mode:"all",resolver:st(xt),defaultValues:{categories:[{title:""}]}}),{fields:b,append:$,remove:F}=at({control:k,name:"categories"}),G=async i=>{let r={key:"AUDIO_LIBRARY",section:"CATEGORY",value:JSON.stringify({categories:i.categories}),status:1};try{e({type:m.PROCESSING});const{status:a,data:{message:n}}=await M(v.UPDATE,r);a===N[200]?(e({type:m.SUCCESS,payload:{message:n}}),H.success(n),_()):e({type:m.FAILURE,payload:{message:T()}})}catch(a){e({type:m.FAILURE,payload:{message:T(a)}})}};async function Y(i){e({type:m.INIT_LOADER,payload:{loader:!0}});const r=K.LOCALE;try{const a=await J(i),{status:n}=a,{data:l,success:g}=a.data;if(g&&n===N[200]){const h=JSON.parse(l==null?void 0:l.value),{categories:O}=h;A("categories",O),p(O)}else j(Q[r].FETCHING_USERS_LIST)}catch(a){T(a)}e({type:m.INIT_LOADER,payload:{loader:!1}})}const _=()=>{Y(`${v.GET}?key=AUDIO_LIBRARY&section=CATEGORY`)};return C.useEffect(()=>{_()},[]),t.jsxs(t.Fragment,{children:[t.jsx(X,{title:I.AUDIO_LIBRARY}),t.jsxs(Z,{className:"page-container users-page",heading:I.AUDIO_LIBRARY,children:[t.jsxs(s,{container:!0,justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[t.jsx(s,{item:!0,children:t.jsx(et,{breadcrumbs:[t.jsx(S,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:x.DASHBOARD,children:"dashboard"}),t.jsx(S,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:x.WEB_CONTENT,children:"web content"}),`${I.AUDIO_LIBRARY} Category`]})}),t.jsx(s,{item:!0,mr:1,children:t.jsx(S,{className:"h-link",to:x.WEB_CONTENT,children:t.jsx(R,{sx:{borderRadius:"2pt"},variant:"contained",color:"primary",startIcon:t.jsx(tt,{}),children:"Back"})})})]}),t.jsx(f,{pt:4,variant:"h3",children:"Categories"}),o?t.jsx(D,{variant:"rectangular",width:"100%",height:110}):t.jsx(s,{container:!0,spacing:3,sx:{pt:2},children:E.map((i,r)=>t.jsx(s,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:t.jsx(U,{path:`${x.AUDIO_LIBRARY}/${i.title.replace(/[\s/]+/g,"-").toLowerCase()}`,title:i.title})},r))}),t.jsx(L,{sx:{mt:4,boxShadow:3},children:t.jsx(s,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:t.jsxs(s,{item:!0,md:12,children:[t.jsx(f,{px:3,variant:"h4",children:"Add or update category"}),t.jsx(L,{className:"profile-right-section",sx:{p:3},children:t.jsxs("form",{onSubmit:P(G),noValidate:!0,children:[t.jsx(s,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:b.map((i,r)=>{var a,n,l,g,h;return t.jsx(s,{item:!0,xs:12,sm:6,md:4,children:o?t.jsx(D,{variant:"rectangular",width:"100%",height:118}):t.jsxs(t.Fragment,{children:[t.jsx(pt,{sx:{mb:2},children:t.jsx(f,{variant:"h5",children:`Category ${r+1}`})}),t.jsx(s,{mb:4,children:t.jsx(ut,{...u(`categories[${r}].title`),label:"Title*",disabled:o,error:!!((n=(a=c==null?void 0:c.categories)==null?void 0:a[r])!=null&&n.title),helperText:(h=(g=(l=c==null?void 0:c.categories)==null?void 0:l[r])==null?void 0:g.title)==null?void 0:h.message,name:`categories[${r}].title`,variant:"outlined",fullWidth:!0})}),b.length>1&&t.jsx(s,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:t.jsx(R,{type:"button",size:"medium",startIcon:t.jsx(mt,{}),variant:"outlined",onClick:()=>{F(r)},color:"error",children:"Category"})})]})},i.id)})}),t.jsx(s,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:t.jsx(R,{type:"button",size:"medium",startIcon:t.jsx(lt,{}),variant:"outlined",onClick:()=>$({title:""}),children:"Category"})}),t.jsx(gt,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:t.jsx(ht,{loading:!!o,size:"medium",type:"submit",loadingPosition:"end",endIcon:t.jsx(dt,{}),variant:"contained",children:o?"PLEASE WAIT...":"SUBMIT"})})]})})]})})})]})]})}export{ne as default};
