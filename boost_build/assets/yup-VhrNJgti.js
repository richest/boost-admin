import{T as A}from"./index-Bb4T6yJS.js";var _e=e=>e.type==="checkbox",ue=e=>e instanceof Date,W=e=>e==null;const dr=e=>typeof e=="object";var T=e=>!W(e)&&!Array.isArray(e)&&dr(e)&&!ue(e),yr=e=>T(e)&&e.target?_e(e.target)?e.target.checked:e.target.value:e,Nr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,gr=(e,t)=>e.has(Nr(t)),Pr=e=>{const t=e.constructor&&e.constructor.prototype;return T(t)&&t.hasOwnProperty("isPrototypeOf")},He=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(He&&(e instanceof Blob||e instanceof FileList))&&(r||T(e)))if(t=r?[]:{},!r&&!Pr(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=M(e[s]));else return e;return t}var ve=e=>Array.isArray(e)?e.filter(Boolean):[],C=e=>e===void 0,o=(e,t,r)=>{if(!t||!T(e))return r;const s=ve(t.split(/[,[\].]+?/)).reduce((n,u)=>W(n)?n:n[u],e);return C(s)||s===e?C(e[t])?r:e[t]:s},G=e=>typeof e=="boolean",$e=e=>/^\w*$/.test(e),_r=e=>ve(e.replace(/["|']|\]/g,"").split(/\.|\[/)),D=(e,t,r)=>{let s=-1;const n=$e(t)?[t]:_r(t),u=n.length,f=u-1;for(;++s<u;){const g=n[s];let m=r;if(s!==f){const S=e[g];m=T(S)||Array.isArray(S)?S:isNaN(+n[s+1])?{}:[]}if(g==="__proto__")return;e[g]=m,e=e[g]}return e};const Fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Y={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},re={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vr=A.createContext(null),Se=()=>A.useContext(vr),at=e=>{const{children:t,...r}=e;return A.createElement(vr.Provider,{value:r},t)};var hr=(e,t,r,s=!0)=>{const n={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(n,u,{get:()=>{const f=u;return t._proxyFormState[f]!==Y.all&&(t._proxyFormState[f]=!s||Y.all),r&&(r[f]=!0),e[f]}});return n},j=e=>T(e)&&!Object.keys(e).length,mr=(e,t,r,s)=>{r(e);const{name:n,...u}=e;return j(u)||Object.keys(u).length>=Object.keys(t).length||Object.keys(u).find(f=>t[f]===(!s||Y.all))},q=e=>Array.isArray(e)?e:[e],br=(e,t,r)=>!e||!t||e===t||q(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s)));function we(e){const t=A.useRef(e);t.current=e,A.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Br(e){const t=Se(),{control:r=t.control,disabled:s,name:n,exact:u}=e||{},[f,g]=A.useState(r._formState),m=A.useRef(!0),S=A.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),v=A.useRef(n);return v.current=n,we({disabled:s,next:b=>m.current&&br(v.current,b.name,u)&&mr(b,S.current,r._updateFormState)&&g({...r._formState,...b}),subject:r._subjects.state}),A.useEffect(()=>(m.current=!0,S.current.isValid&&r._updateValid(!0),()=>{m.current=!1}),[r]),hr(f,r,S.current,!1)}var ee=e=>typeof e=="string",Fr=(e,t,r,s,n)=>ee(e)?(s&&t.watch.add(e),o(r,e,n)):Array.isArray(e)?e.map(u=>(s&&t.watch.add(u),o(r,u))):(s&&(t.watchAll=!0),r);function Ir(e){const t=Se(),{control:r=t.control,name:s,defaultValue:n,disabled:u,exact:f}=e||{},g=A.useRef(s);g.current=s,we({disabled:u,subject:r._subjects.values,next:v=>{br(g.current,v.name,f)&&S(M(Fr(g.current,r._names,v.values||r._formValues,!1,n)))}});const[m,S]=A.useState(r._getWatch(s,n));return A.useEffect(()=>r._removeUnmounted()),m}function jr(e){const t=Se(),{name:r,disabled:s,control:n=t.control,shouldUnregister:u}=e,f=gr(n._names.array,r),g=Ir({control:n,name:r,defaultValue:o(n._formValues,r,o(n._defaultValues,r,e.defaultValue)),exact:!0}),m=Br({control:n,name:r,exact:!0}),S=A.useRef(n.register(r,{...e.rules,value:g,...G(e.disabled)?{disabled:e.disabled}:{}}));return A.useEffect(()=>{const v=n._options.shouldUnregister||u,b=(w,H)=>{const L=o(n._fields,w);L&&L._f&&(L._f.mount=H)};if(b(r,!0),v){const w=M(o(n._options.defaultValues,r));D(n._defaultValues,r,w),C(o(n._formValues,r))&&D(n._formValues,r,w)}return()=>{(f?v&&!n._state.action:v)?n.unregister(r):b(r,!1)}},[r,n,f,u]),A.useEffect(()=>{o(n._fields,r)&&n._updateDisabledField({disabled:s,fields:n._fields,name:r,value:o(n._fields,r)._f.value})},[s,r,n]),{field:{name:r,value:g,...G(s)||m.disabled?{disabled:m.disabled||s}:{},onChange:A.useCallback(v=>S.current.onChange({target:{value:yr(v),name:r},type:Fe.CHANGE}),[r]),onBlur:A.useCallback(()=>S.current.onBlur({target:{value:o(n._formValues,r),name:r},type:Fe.BLUR}),[r,n]),ref:A.useCallback(v=>{const b=o(n._fields,r);b&&v&&(b._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:w=>v.setCustomValidity(w),reportValidity:()=>v.reportValidity()})},[n._fields,r])},formState:m,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!o(m.errors,r)},isDirty:{enumerable:!0,get:()=>!!o(m.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!o(m.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!o(m.validatingFields,r)},error:{enumerable:!0,get:()=>o(m.errors,r)}})}}const nt=e=>e.render(jr(e));var Ar=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},se=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},Oe=(e,t,r={})=>r.shouldFocus||C(r.shouldFocus)?r.focusName||`${e}.${C(r.focusIndex)?t:r.focusIndex}.`:"",ge=e=>({isOnSubmit:!e||e===Y.onSubmit,isOnBlur:e===Y.onBlur,isOnChange:e===Y.onChange,isOnAll:e===Y.all,isOnTouch:e===Y.onTouched}),We=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const le=(e,t,r,s)=>{for(const n of r||Object.keys(e)){const u=o(e,n);if(u){const{_f:f,...g}=u;if(f){if(f.refs&&f.refs[0]&&t(f.refs[0],n)&&!s)return!0;if(f.ref&&t(f.ref,f.name)&&!s)return!0;if(le(g,t))break}else if(T(g)&&le(g,t))break}}};var Vr=(e,t,r)=>{const s=q(o(e,r));return D(s,"root",t[r]),D(e,r,s),e},Ke=e=>e.type==="file",te=e=>typeof e=="function",Ae=e=>{if(!He)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},be=e=>ee(e),Ge=e=>e.type==="radio",Ve=e=>e instanceof RegExp;const ir={value:!1,isValid:!1},ar={value:!0,isValid:!0};var xr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!C(e[0].attributes.value)?C(e[0].value)||e[0].value===""?ar:{value:e[0].value,isValid:!0}:ar:ir}return ir};const nr={isValid:!1,value:null};var pr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,nr):nr;function ur(e,t,r="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||G(e)&&!e)return{type:r,message:be(e)?e:"",ref:t}}var ne=e=>T(e)&&!Ve(e)?e:{value:e,message:""},qe=async(e,t,r,s,n)=>{const{ref:u,refs:f,required:g,maxLength:m,minLength:S,min:v,max:b,pattern:w,validate:H,name:L,valueAsNumber:oe,mount:z,disabled:Z}=e._f,p=o(t,L);if(!z||Z)return{};const J=f?f[0]:u,Q=x=>{s&&J.reportValidity&&(J.setCustomValidity(G(x)?"":x||""),J.reportValidity())},_={},F=Ge(u),V=_e(u),O=F||V,$=(oe||Ke(u))&&C(u.value)&&C(p)||Ae(u)&&u.value===""||p===""||Array.isArray(p)&&!p.length,I=Ar.bind(null,L,r,_),he=(x,k,R,B=re.maxLength,X=re.minLength)=>{const K=x?k:R;_[L]={type:x?B:X,message:K,ref:u,...I(x?B:X,K)}};if(n?!Array.isArray(p)||!p.length:g&&(!O&&($||W(p))||G(p)&&!p||V&&!xr(f).isValid||F&&!pr(f).isValid)){const{value:x,message:k}=be(g)?{value:!!g,message:g}:ne(g);if(x&&(_[L]={type:re.required,message:k,ref:J,...I(re.required,k)},!r))return Q(k),_}if(!$&&(!W(v)||!W(b))){let x,k;const R=ne(b),B=ne(v);if(!W(p)&&!isNaN(p)){const X=u.valueAsNumber||p&&+p;W(R.value)||(x=X>R.value),W(B.value)||(k=X<B.value)}else{const X=u.valueAsDate||new Date(p),K=de=>new Date(new Date().toDateString()+" "+de),ce=u.type=="time",fe=u.type=="week";ee(R.value)&&p&&(x=ce?K(p)>K(R.value):fe?p>R.value:X>new Date(R.value)),ee(B.value)&&p&&(k=ce?K(p)<K(B.value):fe?p<B.value:X<new Date(B.value))}if((x||k)&&(he(!!x,R.message,B.message,re.max,re.min),!r))return Q(_[L].message),_}if((m||S)&&!$&&(ee(p)||n&&Array.isArray(p))){const x=ne(m),k=ne(S),R=!W(x.value)&&p.length>+x.value,B=!W(k.value)&&p.length<+k.value;if((R||B)&&(he(R,x.message,k.message),!r))return Q(_[L].message),_}if(w&&!$&&ee(p)){const{value:x,message:k}=ne(w);if(Ve(x)&&!p.match(x)&&(_[L]={type:re.pattern,message:k,ref:u,...I(re.pattern,k)},!r))return Q(k),_}if(H){if(te(H)){const x=await H(p,t),k=ur(x,J);if(k&&(_[L]={...k,...I(re.validate,k.message)},!r))return Q(k.message),_}else if(T(H)){let x={};for(const k in H){if(!j(x)&&!r)break;const R=ur(await H[k](p,t),J,k);R&&(x={...R,...I(k,R.message)},Q(R.message),r&&(_[L]=x))}if(!j(x)&&(_[L]={ref:J,...x},!r))return _}}return Q(!0),_},Ue=(e,t)=>[...e,...q(t)],Te=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Le(e,t,r){return[...e.slice(0,t),...q(r),...e.slice(t)]}var Re=(e,t,r)=>Array.isArray(e)?(C(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],Me=(e,t)=>[...q(t),...q(e)];function Wr(e,t){let r=0;const s=[...e];for(const n of t)s.splice(n-r,1),r++;return ve(s).length?s:[]}var Ne=(e,t)=>C(t)?[]:Wr(e,q(t).sort((r,s)=>r-s)),Pe=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]};function qr(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=C(e)?s++:e[t[s++]];return e}function Hr(e){for(const t in e)if(e.hasOwnProperty(t)&&!C(e[t]))return!1;return!0}function U(e,t){const r=Array.isArray(t)?t:$e(t)?[t]:_r(t),s=r.length===1?e:qr(e,r),n=r.length-1,u=r[n];return s&&delete s[u],n!==0&&(T(s)&&j(s)||Array.isArray(s)&&Hr(s))&&U(e,r.slice(0,-1)),e}var lr=(e,t,r)=>(e[t]=r,e);function ut(e){const t=Se(),{control:r=t.control,name:s,keyName:n="id",shouldUnregister:u}=e,[f,g]=A.useState(r._getFieldArray(s)),m=A.useRef(r._getFieldArray(s).map(se)),S=A.useRef(f),v=A.useRef(s),b=A.useRef(!1);v.current=s,S.current=f,r._names.array.add(s),e.rules&&r.register(s,e.rules),we({next:({values:_,name:F})=>{if(F===v.current||!F){const V=o(_,v.current);Array.isArray(V)&&(g(V),m.current=V.map(se))}},subject:r._subjects.array});const w=A.useCallback(_=>{b.current=!0,r._updateFieldArray(s,_)},[r,s]),H=(_,F)=>{const V=q(M(_)),O=Ue(r._getFieldArray(s),V);r._names.focus=Oe(s,O.length-1,F),m.current=Ue(m.current,V.map(se)),w(O),g(O),r._updateFieldArray(s,O,Ue,{argA:Te(_)})},L=(_,F)=>{const V=q(M(_)),O=Me(r._getFieldArray(s),V);r._names.focus=Oe(s,0,F),m.current=Me(m.current,V.map(se)),w(O),g(O),r._updateFieldArray(s,O,Me,{argA:Te(_)})},oe=_=>{const F=Ne(r._getFieldArray(s),_);m.current=Ne(m.current,_),w(F),g(F),r._updateFieldArray(s,F,Ne,{argA:_})},z=(_,F,V)=>{const O=q(M(F)),$=Le(r._getFieldArray(s),_,O);r._names.focus=Oe(s,_,V),m.current=Le(m.current,_,O.map(se)),w($),g($),r._updateFieldArray(s,$,Le,{argA:_,argB:Te(F)})},Z=(_,F)=>{const V=r._getFieldArray(s);Pe(V,_,F),Pe(m.current,_,F),w(V),g(V),r._updateFieldArray(s,V,Pe,{argA:_,argB:F},!1)},p=(_,F)=>{const V=r._getFieldArray(s);Re(V,_,F),Re(m.current,_,F),w(V),g(V),r._updateFieldArray(s,V,Re,{argA:_,argB:F},!1)},J=(_,F)=>{const V=M(F),O=lr(r._getFieldArray(s),_,V);m.current=[...O].map(($,I)=>!$||I===_?se():m.current[I]),w(O),g([...O]),r._updateFieldArray(s,O,lr,{argA:_,argB:V},!0,!1)},Q=_=>{const F=q(M(_));m.current=F.map(se),w([...F]),g([...F]),r._updateFieldArray(s,[...F],V=>V,{},!0,!1)};return A.useEffect(()=>{if(r._state.action=!1,We(s,r._names)&&r._subjects.state.next({...r._formState}),b.current&&(!ge(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([s]).then(_=>{const F=o(_.errors,s),V=o(r._formState.errors,s);(V?!F&&V.type||F&&(V.type!==F.type||V.message!==F.message):F&&F.type)&&(F?D(r._formState.errors,s,F):U(r._formState.errors,s),r._subjects.state.next({errors:r._formState.errors}))});else{const _=o(r._fields,s);_&&_._f&&!(ge(r._options.reValidateMode).isOnSubmit&&ge(r._options.mode).isOnSubmit)&&qe(_,r._formValues,r._options.criteriaMode===Y.all,r._options.shouldUseNativeValidation,!0).then(F=>!j(F)&&r._subjects.state.next({errors:Vr(r._formState.errors,F,s)}))}r._subjects.values.next({name:s,values:{...r._formValues}}),r._names.focus&&le(r._fields,(_,F)=>{if(r._names.focus&&F.startsWith(r._names.focus)&&_.focus)return _.focus(),1}),r._names.focus="",r._updateValid(),b.current=!1},[f,s,r]),A.useEffect(()=>(!o(r._formValues,s)&&r._updateFieldArray(s),()=>{(r._options.shouldUnregister||u)&&r.unregister(s)}),[s,r,n,u]),{swap:A.useCallback(Z,[w,s,r]),move:A.useCallback(p,[w,s,r]),prepend:A.useCallback(L,[w,s,r]),append:A.useCallback(H,[w,s,r]),remove:A.useCallback(oe,[w,s,r]),insert:A.useCallback(z,[w,s,r]),update:A.useCallback(J,[w,s,r]),replace:A.useCallback(Q,[w,s,r]),fields:A.useMemo(()=>f.map((_,F)=>({..._,[n]:m.current[F]||se()})),[f,n])}}var Be=()=>{let e=[];return{get observers(){return e},next:n=>{for(const u of e)u.next&&u.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(u=>u!==n)}}),unsubscribe:()=>{e=[]}}},xe=e=>W(e)||!dr(e);function ie(e,t){if(xe(e)||xe(t))return e===t;if(ue(e)&&ue(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const n of r){const u=e[n];if(!s.includes(n))return!1;if(n!=="ref"){const f=t[n];if(ue(u)&&ue(f)||T(u)&&T(f)||Array.isArray(u)&&Array.isArray(f)?!ie(u,f):u!==f)return!1}}return!0}var Sr=e=>e.type==="select-multiple",$r=e=>Ge(e)||_e(e),Ie=e=>Ae(e)&&e.isConnected,wr=e=>{for(const t in e)if(te(e[t]))return!0;return!1};function pe(e,t={}){const r=Array.isArray(e);if(T(e)||r)for(const s in e)Array.isArray(e[s])||T(e[s])&&!wr(e[s])?(t[s]=Array.isArray(e[s])?[]:{},pe(e[s],t[s])):W(e[s])||(t[s]=!0);return t}function Dr(e,t,r){const s=Array.isArray(e);if(T(e)||s)for(const n in e)Array.isArray(e[n])||T(e[n])&&!wr(e[n])?C(t)||xe(r[n])?r[n]=Array.isArray(e[n])?pe(e[n],[]):{...pe(e[n])}:Dr(e[n],W(t)?{}:t[n],r[n]):r[n]=!ie(e[n],t[n]);return r}var me=(e,t)=>Dr(e,t,pe(t)),kr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>C(e)?e:t?e===""?NaN:e&&+e:r&&ee(e)?new Date(e):s?s(e):e;function je(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return Ke(t)?t.files:Ge(t)?pr(e.refs).value:Sr(t)?[...t.selectedOptions].map(({value:r})=>r):_e(t)?xr(e.refs).value:kr(C(t.value)?e.ref.value:t.value,e)}var Kr=(e,t,r,s)=>{const n={};for(const u of e){const f=o(t,u);f&&D(n,u,f._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},ye=e=>C(e)?e:Ve(e)?e.source:T(e)?Ve(e.value)?e.value.source:e.value:e;const or="AsyncFunction";var Gr=e=>(!e||!e.validate)&&!!(te(e.validate)&&e.validate.constructor.name===or||T(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===or)),Yr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function cr(e,t,r){const s=o(e,r);if(s||$e(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const u=n.join("."),f=o(t,u),g=o(e,u);if(f&&!Array.isArray(f)&&r!==u)return{name:r};if(g&&g.type)return{name:u,error:g};n.pop()}return{name:r}}var zr=(e,t,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,Jr=(e,t)=>!ve(o(e,t)).length&&U(e,t);const Qr={mode:Y.onSubmit,reValidateMode:Y.onChange,shouldFocusError:!0};function Xr(e={}){let t={...Qr,...e},r={submitCount:0,isDirty:!1,isLoading:te(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},n=T(t.defaultValues)||T(t.values)?M(t.defaultValues||t.values)||{}:{},u=t.shouldUnregister?{}:M(n),f={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,S=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:Be(),array:Be(),state:Be()},w=ge(t.mode),H=ge(t.reValidateMode),L=t.criteriaMode===Y.all,oe=i=>a=>{clearTimeout(S),S=setTimeout(i,a)},z=async i=>{if(v.isValid||i){const a=t.resolver?j((await O()).errors):await I(s,!0);a!==r.isValid&&b.state.next({isValid:a})}},Z=(i,a)=>{(v.isValidating||v.validatingFields)&&((i||Array.from(g.mount)).forEach(l=>{l&&(a?D(r.validatingFields,l,a):U(r.validatingFields,l))}),b.state.next({validatingFields:r.validatingFields,isValidating:!j(r.validatingFields)}))},p=(i,a=[],l,y,d=!0,c=!0)=>{if(y&&l){if(f.action=!0,c&&Array.isArray(o(s,i))){const h=l(o(s,i),y.argA,y.argB);d&&D(s,i,h)}if(c&&Array.isArray(o(r.errors,i))){const h=l(o(r.errors,i),y.argA,y.argB);d&&D(r.errors,i,h),Jr(r.errors,i)}if(v.touchedFields&&c&&Array.isArray(o(r.touchedFields,i))){const h=l(o(r.touchedFields,i),y.argA,y.argB);d&&D(r.touchedFields,i,h)}v.dirtyFields&&(r.dirtyFields=me(n,u)),b.state.next({name:i,isDirty:x(i,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else D(u,i,a)},J=(i,a)=>{D(r.errors,i,a),b.state.next({errors:r.errors})},Q=i=>{r.errors=i,b.state.next({errors:r.errors,isValid:!1})},_=(i,a,l,y)=>{const d=o(s,i);if(d){const c=o(u,i,C(l)?o(n,i):l);C(c)||y&&y.defaultChecked||a?D(u,i,a?c:je(d._f)):B(i,c),f.mount&&z()}},F=(i,a,l,y,d)=>{let c=!1,h=!1;const E={name:i},N=!!(o(s,i)&&o(s,i)._f&&o(s,i)._f.disabled);if(!l||y){v.isDirty&&(h=r.isDirty,r.isDirty=E.isDirty=x(),c=h!==E.isDirty);const P=N||ie(o(n,i),a);h=!!(!N&&o(r.dirtyFields,i)),P||N?U(r.dirtyFields,i):D(r.dirtyFields,i,!0),E.dirtyFields=r.dirtyFields,c=c||v.dirtyFields&&h!==!P}if(l){const P=o(r.touchedFields,i);P||(D(r.touchedFields,i,l),E.touchedFields=r.touchedFields,c=c||v.touchedFields&&P!==l)}return c&&d&&b.state.next(E),c?E:{}},V=(i,a,l,y)=>{const d=o(r.errors,i),c=v.isValid&&G(a)&&r.isValid!==a;if(e.delayError&&l?(m=oe(()=>J(i,l)),m(e.delayError)):(clearTimeout(S),m=null,l?D(r.errors,i,l):U(r.errors,i)),(l?!ie(d,l):d)||!j(y)||c){const h={...y,...c&&G(a)?{isValid:a}:{},errors:r.errors,name:i};r={...r,...h},b.state.next(h)}},O=async i=>{Z(i,!0);const a=await t.resolver(u,t.context,Kr(i||g.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return Z(i),a},$=async i=>{const{errors:a}=await O(i);if(i)for(const l of i){const y=o(a,l);y?D(r.errors,l,y):U(r.errors,l)}else r.errors=a;return a},I=async(i,a,l={valid:!0})=>{for(const y in i){const d=i[y];if(d){const{_f:c,...h}=d;if(c){const E=g.array.has(c.name),N=d._f&&Gr(d._f);N&&v.validatingFields&&Z([y],!0);const P=await qe(d,u,L,t.shouldUseNativeValidation&&!a,E);if(N&&v.validatingFields&&Z([y]),P[c.name]&&(l.valid=!1,a))break;!a&&(o(P,c.name)?E?Vr(r.errors,P,c.name):D(r.errors,c.name,P[c.name]):U(r.errors,c.name))}!j(h)&&await I(h,a,l)}}return l.valid},he=()=>{for(const i of g.unMount){const a=o(s,i);a&&(a._f.refs?a._f.refs.every(l=>!Ie(l)):!Ie(a._f.ref))&&De(i)}g.unMount=new Set},x=(i,a)=>(i&&a&&D(u,i,a),!ie(Ye(),n)),k=(i,a,l)=>Fr(i,g,{...f.mount?u:C(a)?n:ee(i)?{[i]:a}:a},l,a),R=i=>ve(o(f.mount?u:n,i,e.shouldUnregister?o(n,i,[]):[])),B=(i,a,l={})=>{const y=o(s,i);let d=a;if(y){const c=y._f;c&&(!c.disabled&&D(u,i,kr(a,c)),d=Ae(c.ref)&&W(a)?"":a,Sr(c.ref)?[...c.ref.options].forEach(h=>h.selected=d.includes(h.value)):c.refs?_e(c.ref)?c.refs.length>1?c.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(d)?!!d.find(E=>E===h.value):d===h.value)):c.refs[0]&&(c.refs[0].checked=!!d):c.refs.forEach(h=>h.checked=h.value===d):Ke(c.ref)?c.ref.value="":(c.ref.value=d,c.ref.type||b.values.next({name:i,values:{...u}})))}(l.shouldDirty||l.shouldTouch)&&F(i,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&de(i)},X=(i,a,l)=>{for(const y in a){const d=a[y],c=`${i}.${y}`,h=o(s,c);(g.array.has(i)||!xe(d)||h&&!h._f)&&!ue(d)?X(c,d,l):B(c,d,l)}},K=(i,a,l={})=>{const y=o(s,i),d=g.array.has(i),c=M(a);D(u,i,c),d?(b.array.next({name:i,values:{...u}}),(v.isDirty||v.dirtyFields)&&l.shouldDirty&&b.state.next({name:i,dirtyFields:me(n,u),isDirty:x(i,c)})):y&&!y._f&&!W(c)?X(i,c,l):B(i,c,l),We(i,g)&&b.state.next({...r}),b.values.next({name:f.mount?i:void 0,values:{...u}})},ce=async i=>{f.mount=!0;const a=i.target;let l=a.name,y=!0;const d=o(s,l),c=()=>a.type?je(d._f):yr(i),h=E=>{y=Number.isNaN(E)||ie(E,o(u,l,E))};if(d){let E,N;const P=c(),ae=i.type===Fe.BLUR||i.type===Fe.FOCUS_OUT,Lr=!Yr(d._f)&&!t.resolver&&!o(r.errors,l)&&!d._f.deps||zr(ae,o(r.touchedFields,l),r.isSubmitted,H,w),Ee=We(l,g,ae);D(u,l,P),ae?(d._f.onBlur&&d._f.onBlur(i),m&&m(0)):d._f.onChange&&d._f.onChange(i);const Ce=F(l,P,ae,!1),Rr=!j(Ce)||Ee;if(!ae&&b.values.next({name:l,type:i.type,values:{...u}}),Lr)return v.isValid&&(e.mode==="onBlur"?ae&&z():z()),Rr&&b.state.next({name:l,...Ee?{}:Ce});if(!ae&&Ee&&b.state.next({...r}),t.resolver){const{errors:tr}=await O([l]);if(h(P),y){const Mr=cr(r.errors,s,l),sr=cr(tr,s,Mr.name||l);E=sr.error,l=sr.name,N=j(tr)}}else Z([l],!0),E=(await qe(d,u,L,t.shouldUseNativeValidation))[l],Z([l]),h(P),y&&(E?N=!1:v.isValid&&(N=await I(s,!0)));y&&(d._f.deps&&de(d._f.deps),V(l,N,E,Ce))}},fe=(i,a)=>{if(o(r.errors,a)&&i.focus)return i.focus(),1},de=async(i,a={})=>{let l,y;const d=q(i);if(t.resolver){const c=await $(C(i)?i:d);l=j(c),y=i?!d.some(h=>o(c,h)):l}else i?(y=(await Promise.all(d.map(async c=>{const h=o(s,c);return await I(h&&h._f?{[c]:h}:h)}))).every(Boolean),!(!y&&!r.isValid)&&z()):y=l=await I(s);return b.state.next({...!ee(i)||v.isValid&&l!==r.isValid?{}:{name:i},...t.resolver||!i?{isValid:l}:{},errors:r.errors}),a.shouldFocus&&!y&&le(s,fe,i?d:g.mount),y},Ye=i=>{const a={...f.mount?u:n};return C(i)?a:ee(i)?o(a,i):i.map(l=>o(a,l))},ze=(i,a)=>({invalid:!!o((a||r).errors,i),isDirty:!!o((a||r).dirtyFields,i),error:o((a||r).errors,i),isValidating:!!o(r.validatingFields,i),isTouched:!!o((a||r).touchedFields,i)}),Cr=i=>{i&&q(i).forEach(a=>U(r.errors,a)),b.state.next({errors:i?r.errors:{}})},Je=(i,a,l)=>{const y=(o(s,i,{_f:{}})._f||{}).ref,d=o(r.errors,i)||{},{ref:c,message:h,type:E,...N}=d;D(r.errors,i,{...N,...a,ref:y}),b.state.next({name:i,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&y&&y.focus&&y.focus()},Or=(i,a)=>te(i)?b.values.subscribe({next:l=>i(k(void 0,a),l)}):k(i,a,!0),De=(i,a={})=>{for(const l of i?q(i):g.mount)g.mount.delete(l),g.array.delete(l),a.keepValue||(U(s,l),U(u,l)),!a.keepError&&U(r.errors,l),!a.keepDirty&&U(r.dirtyFields,l),!a.keepTouched&&U(r.touchedFields,l),!a.keepIsValidating&&U(r.validatingFields,l),!t.shouldUnregister&&!a.keepDefaultValue&&U(n,l);b.values.next({values:{...u}}),b.state.next({...r,...a.keepDirty?{isDirty:x()}:{}}),!a.keepIsValid&&z()},Qe=({disabled:i,name:a,field:l,fields:y,value:d})=>{if(G(i)&&f.mount||i){const c=i?void 0:C(d)?je(l?l._f:o(y,a)._f):d;D(u,a,c),F(a,c,!1,!1,!0)}},ke=(i,a={})=>{let l=o(s,i);const y=G(a.disabled)||G(e.disabled);return D(s,i,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:i}},name:i,mount:!0,...a}}),g.mount.add(i),l?Qe({field:l,disabled:G(a.disabled)?a.disabled:e.disabled,name:i,value:a.value}):_(i,!0,a.value),{...y?{disabled:a.disabled||e.disabled}:{},...t.progressive?{required:!!a.required,min:ye(a.min),max:ye(a.max),minLength:ye(a.minLength),maxLength:ye(a.maxLength),pattern:ye(a.pattern)}:{},name:i,onChange:ce,onBlur:ce,ref:d=>{if(d){ke(i,a),l=o(s,i);const c=C(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,h=$r(c),E=l._f.refs||[];if(h?E.find(N=>N===c):c===l._f.ref)return;D(s,i,{_f:{...l._f,...h?{refs:[...E.filter(Ie),c,...Array.isArray(o(n,i))?[{}]:[]],ref:{type:c.type,name:i}}:{ref:c}}}),_(i,!1,void 0,c)}else l=o(s,i,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(gr(g.array,i)&&f.action)&&g.unMount.add(i)}}},Xe=()=>t.shouldFocusError&&le(s,fe,g.mount),Ur=i=>{G(i)&&(b.state.next({disabled:i}),le(s,(a,l)=>{const y=o(s,l);y&&(a.disabled=y._f.disabled||i,Array.isArray(y._f.refs)&&y._f.refs.forEach(d=>{d.disabled=y._f.disabled||i}))},0,!1))},Ze=(i,a)=>async l=>{let y;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=M(u);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:c,values:h}=await O();r.errors=c,d=h}else await I(s);if(U(r.errors,"root"),j(r.errors)){b.state.next({errors:{}});try{await i(d,l)}catch(c){y=c}}else a&&await a({...r.errors},l),Xe(),setTimeout(Xe);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(r.errors)&&!y,submitCount:r.submitCount+1,errors:r.errors}),y)throw y},Tr=(i,a={})=>{o(s,i)&&(C(a.defaultValue)?K(i,M(o(n,i))):(K(i,a.defaultValue),D(n,i,M(a.defaultValue))),a.keepTouched||U(r.touchedFields,i),a.keepDirty||(U(r.dirtyFields,i),r.isDirty=a.defaultValue?x(i,M(o(n,i))):x()),a.keepError||(U(r.errors,i),v.isValid&&z()),b.state.next({...r}))},er=(i,a={})=>{const l=i?M(i):n,y=M(l),d=j(i),c=d?n:y;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues)for(const h of g.mount)o(r.dirtyFields,h)?D(c,h,o(u,h)):K(h,o(c,h));else{if(He&&C(i))for(const h of g.mount){const E=o(s,h);if(E&&E._f){const N=Array.isArray(E._f.refs)?E._f.refs[0]:E._f.ref;if(Ae(N)){const P=N.closest("form");if(P){P.reset();break}}}}s={}}u=e.shouldUnregister?a.keepDefaultValues?M(n):{}:M(c),b.array.next({values:{...c}}),b.values.next({values:{...c}})}g={mount:a.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!v.isValid||!!a.keepIsValid||!!a.keepDirtyValues,f.watch=!!e.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:d?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!ie(i,n)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:d?{}:a.keepDirtyValues?a.keepDefaultValues&&u?me(n,u):r.dirtyFields:a.keepDefaultValues&&i?me(n,i):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},rr=(i,a)=>er(te(i)?i(u):i,a);return{control:{register:ke,unregister:De,getFieldState:ze,handleSubmit:Ze,setError:Je,_executeSchema:O,_getWatch:k,_getDirty:x,_updateValid:z,_removeUnmounted:he,_updateFieldArray:p,_updateDisabledField:Qe,_getFieldArray:R,_reset:er,_resetDefaultValues:()=>te(t.defaultValues)&&t.defaultValues().then(i=>{rr(i,t.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:i=>{r={...r,...i}},_disableForm:Ur,_subjects:b,_proxyFormState:v,_setErrors:Q,get _fields(){return s},get _formValues(){return u},get _state(){return f},set _state(i){f=i},get _defaultValues(){return n},get _names(){return g},set _names(i){g=i},get _formState(){return r},set _formState(i){r=i},get _options(){return t},set _options(i){t={...t,...i}}},trigger:de,register:ke,handleSubmit:Ze,watch:Or,setValue:K,getValues:Ye,reset:rr,resetField:Tr,clearErrors:Cr,unregister:De,setError:Je,setFocus:(i,a={})=>{const l=o(s,i),y=l&&l._f;if(y){const d=y.refs?y.refs[0]:y.ref;d.focus&&(d.focus(),a.shouldSelect&&d.select())}},getFieldState:ze}}function lt(e={}){const t=A.useRef(),r=A.useRef(),[s,n]=A.useState({isDirty:!1,isValidating:!1,isLoading:te(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:te(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Xr(e),formState:s});const u=t.current.control;return u._options=e,we({subject:u._subjects.state,next:f=>{mr(f,u._proxyFormState,u._updateFormState,!0)&&n({...u._formState})}}),A.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),A.useEffect(()=>{if(u._proxyFormState.isDirty){const f=u._getDirty();f!==s.isDirty&&u._subjects.state.next({isDirty:f})}},[u,s.isDirty]),A.useEffect(()=>{e.values&&!ie(e.values,r.current)?(u._reset(e.values,u._options.resetOptions),r.current=e.values,n(f=>({...f}))):u._resetDefaultValues()},[e.values,u]),A.useEffect(()=>{e.errors&&u._setErrors(e.errors)},[e.errors,u]),A.useEffect(()=>{u._state.mount||(u._updateValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),A.useEffect(()=>{e.shouldUnregister&&u._subjects.values.next({values:u._getWatch()})},[e.shouldUnregister,u]),t.current.formState=hr(s,u),t.current}const fr=(e,t,r)=>{if(e&&"reportValidity"in e){const s=o(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},Er=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?fr(s.ref,r,e):s.refs&&s.refs.forEach(n=>fr(n,r,e))}},Zr=(e,t)=>{t.shouldUseNativeValidation&&Er(e,t);const r={};for(const s in e){const n=o(t.fields,s),u=Object.assign(e[s]||{},{ref:n&&n.ref});if(et(t.names||Object.keys(e),s)){const f=Object.assign({},o(r,s));D(f,"root",u),D(r,s,f)}else D(r,s,u)}return r},et=(e,t)=>e.some(r=>r.startsWith(t+"."));function ot(e,t,r){return t===void 0&&(t={}),r===void 0&&(r={}),function(s,n,u){try{return Promise.resolve(function(f,g){try{var m=(t.context,Promise.resolve(e[r.mode==="sync"?"validateSync":"validate"](s,Object.assign({abortEarly:!1},t,{context:n}))).then(function(S){return u.shouldUseNativeValidation&&Er({},u),{values:r.raw?s:S,errors:{}}}))}catch(S){return g(S)}return m&&m.then?m.then(void 0,g):m}(0,function(f){if(!f.inner)throw f;return{values:{},errors:Zr((g=f,m=!u.shouldUseNativeValidation&&u.criteriaMode==="all",(g.inner||[]).reduce(function(S,v){if(S[v.path]||(S[v.path]={message:v.message,type:v.type}),m){var b=S[v.path].types,w=b&&b[v.type];S[v.path]=Ar(v.path,m,S,v.type,w?[].concat(w,v.message):v.message)}return S},{})),u)};var g,m}))}catch(f){return Promise.reject(f)}}}export{nt as C,at as F,ut as a,ot as o,lt as u};
