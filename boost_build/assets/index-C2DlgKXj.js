import{b as L,j as e,P as S,K as Te,a as Pe,r as n,Q as Z,L as Ae,R as we,G as h,V as x,a3 as Re,aY as M,d as F,a4 as B,Y as ve,N as Ie,g as Ne,D as Oe}from"./index-Bb4T6yJS.js";import{P as Le}from"./breadcrumbs-BoNbTSIP.js";import{P as ke}from"./container-Mdzkb4R0.js";import{A as De}from"./helmet-BKDsicQe.js";import{S as $e}from"./Scrollbar-D2VArou7.js";import{E as G,C as Ue,a as Y,b as p,T as qe,c as Me,d as Fe,e as Be,S as Ge,f as He}from"./tableHeadings-FRSZ0z2m.js";import{u as Ye}from"./textDebounce-D7e2mMPI.js";import{C as N}from"./paginations-D9J1AZ49.js";import{I as ee}from"./Iconify-B2ea3Vhk.js";import Qe from"./SkeltonLoader-DM_yfHIA.js";import We from"./dataNotFound-Dm4Vz_hx.js";import{w as Ke,d as Ve,a as Xe,b as Je,c as Ze,e as ze}from"./AccessTimeFilled-BLM_-o--.js";import{L as H}from"./Label-BSVDv_JV.js";import{T as l}from"./Typography-BvK0EBjx.js";import{I as es}from"./IconButton-BS36y1hM.js";import{d as ss,T as ts}from"./DeleteRounded-BlGDnV9A.js";import{d as rs}from"./Search-fSuCmzN-.js";import{F as as,O as ns}from"./Select-D_KZ1HKa.js";import{I as z}from"./InputAdornment-_AAuA8Z-.js";import{B as Q}from"./Button-CoPqx7My.js";import{A as R}from"./apiErrorResonse-CCtXlH33.js";import{A as os}from"./antSwitch-BKUKAnS9.js";import{C as is}from"./index-Cn4t3Ues.js";import{d as ls,a as cs,b as ds}from"./Subject-Be8RYNxK.js";import{C as ms}from"./Card-Cg269qA4.js";import{P as us}from"./Popover-_oog1cCQ.js";import{M as ps}from"./MenuItem-Ym5Ln7NP.js";import{B as O}from"./Box-DzmxXICY.js";import{D as hs}from"./Divider-8oRsmKUf.js";import{S as u}from"./Stack-yqW3PSS6.js";import{F as xs}from"./FormHelperText-D8o68a4M.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./styled-BzESMtjz.js";import"./throttle-tVVNkgM1.js";import"./colorManipulator-C6WsgVx8.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./iconify-C-ngdJty.js";import"./Skeleton-Cv9Q_VQE.js";import"./KeyboardArrowRight--EGT-K8b.js";import"./LastPage-BwPgK0Bl.js";import"./Toolbar-BiSrIOBH.js";import"./useFormControl-oNyqkk4W.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./List-BGusPRli.js";import"./Switch-Dc5i2Mqq.js";import"./SwitchBase-B0q5c7pV.js";import"./index-D8g0v2aH.js";import"./Grow-BLrRft-L.js";import"./dividerClasses-B4fnud8L.js";import"./listItemTextClasses-Kx3W7iDp.js";import"./listItemIconClasses-CKdqSC5K.js";function gs(s){var P,i,y;const d=L(E=>E.customization);return s.loading?e.jsx(Qe,{colSpan:G.length+1,rows:5,columns:6,loaderMessage:"Please wait..."}):s.connectionError?e.jsx(Ue,{colspan:G.length+1,message:s.errorMessage}):((P=s==null?void 0:s.enqueryList)==null?void 0:P.length)===0?e.jsx(We,{colspan:G.length+1,message:"No support enquery found."}):e.jsx(e.Fragment,{children:(y=(i=s==null?void 0:s.enqueryList)==null?void 0:i.rows)==null?void 0:y.map((E,b)=>{const{id:A,user_id:_,fullname:g,email:m,description:o,subject:C,status:j,file_link:k,type:v}=E,T={fullname:g,email:m,subject:C,description:o,status:j,file_link:k,type:v,id:A};return s.selected.indexOf(g),e.jsxs(Y,{className:(d==null?void 0:d.navType)==="dark"?"dark_tableRow":"",children:[e.jsx(p,{children:`${s.srNo+b}.`}),e.jsx(p,{component:"td",scope:"row",children:e.jsx(l,{variant:"span",className:"user-name",noWrap:!0,children:`${g||""}`})}),e.jsx(p,{component:"td",children:e.jsx(l,{variant:"span",noWrap:!0,children:m})}),e.jsx(p,{className:"",align:"left",children:`${C}`}),e.jsxs(p,{className:"",align:"left",children:[j===1&&e.jsx(H,{color:"warning",children:"Pending"}),j===2&&e.jsx(H,{color:"success",children:"Resolved"}),j===3&&e.jsx(H,{color:"error",children:"Deleted"})]}),e.jsx(p,{className:"enquiry-message",align:"left",sx:{textAlign:"left"},children:e.jsx(l,{variant:"body",children:o?Ke(o):"NA"})}),e.jsx(p,{align:"right",children:e.jsx(es,{component:"label",size:"medium",color:"inherit",onClick:()=>s.handleActionDialog(!0,T),children:e.jsx(ee,{icon:"carbon:view-filled"})})})]},b)})})}se.propTypes={order:S.oneOf(["asc","desc"]),orderBy:S.string,rowCount:S.number,headLabel:S.array,numSelected:S.number,onRequestSort:S.func,onSelectAllClick:S.func};function se({order:s,orderBy:d,rowCount:P,headLabel:i,numSelected:y,onRequestSort:E,onSelectAllClick:b,handleSerchInputChange:A,searchText:_,handleClearSearchInput:g}){const m=L(o=>o.customization);return e.jsxs(qe,{children:[e.jsx(Y,{children:e.jsx(p,{component:"td",colSpan:10,sx:{p:1},children:e.jsx(as,{fullWidth:!0,variant:"outlined",children:e.jsx(ns,{onChange:A,value:_,sx:{maxHeight:"40px"},className:(m==null?void 0:m.navType)==="dark"?"dark_tableHead":"",placeholder:"Search name or email...",id:"outlined-adornment-weight",startAdornment:e.jsx(z,{position:"start",children:e.jsx(rs,{})}),endAdornment:_.length>0?e.jsx(z,{position:"end",children:e.jsx(Q,{onClick:g,sx:{color:Te.ERROR_MSG_COLOR},startIcon:e.jsx(ss,{}),children:"clear"})}):!1,"aria-describedby":"outlined-weight-helper-text",inputProps:{"aria-label":"weight"}})})})}),e.jsx(Y,{children:i.map(o=>e.jsx(p,{align:o.align,sortDirection:d===o.id?s:!1,sx:{py:1.5,textTransform:o.textTransform},children:e.jsx(Me,{hideSortIcon:!0,children:o.label})},o.id))},"user-table-heading-row")]})}function Et(){const s=L(t=>t.customization),{contact_us:d}=L(t=>t.filterOptions);let P=[];const i=Pe(),[y,E]=n.useState(null),[b,A]=n.useState("asc"),[_,g]=n.useState("name"),[m,o]=n.useState([]),[C,j]=n.useState(d.page_no),[k,v]=n.useState(d.srNo),[T,te]=n.useState(d.number_of_rows),[W,re]=n.useState(""),[ae,ne]=Ye(),[oe,ie]=n.useState(0),[D,$]=n.useState(!1),[le,K]=n.useState(!1),[ce,V]=n.useState(""),[de,me]=n.useState([]),[ue,w]=n.useState(!1),[a,pe]=n.useState(""),[X,he]=n.useState((a==null?void 0:a.status)!==1),xe=(t,r)=>{A(_===r&&b==="asc"?"desc":"asc"),g(r)},ge=t=>{if(t.target.checked){const r=P.map(c=>c.name);o(r);return}o([])},J=t=>{const r=t.target.value===void 0?"":t.target.value;re(r),ne(r)},je=(t,r)=>{j(r),v(T*r+1)},fe=t=>{j(0),te(parseInt(t.target.value,10)),v(1)},U=(t,r="")=>{w(t),pe(r)},I=()=>{E(null)},Se=async()=>{const t=X?1:2,r={fullname:a.fullname,email:a.email,subject:a.subject,type:a.type,description:a.description,file_link:a.file_link,status:t};try{i({type:x.PROCESSING});const{status:c,data:{message:f}}=await Re(`${M.UPDATE}/${a.id}`,r);c===F[200]?(i({type:x.SUCCESS,payload:{message:f}}),B.success(f),w(!1),q()):i({type:x.FAILURE,payload:{message:R()}}),window.scrollTo(0,0)}catch(c){i({type:x.FAILURE,payload:{message:R(c)}})}},ye=async t=>{try{i({type:x.PROCESSING});const{status:r,data:{message:c}}=await ve(`${M.DELETE}/${t}`);r===F[200]?(i({type:x.SUCCESS,payload:{message:c}}),B.success(c),w(!1),q()):i({type:x.FAILURE,payload:{message:R()}}),I(),U(!1)}catch(r){i({type:x.FAILURE,payload:{message:R(r)}}),B.error(`${r.response.data.message}`),I(),U(!1)}};async function q(){const t=C+1;$(!0);let r;const c=Oe.LOCALE;try{const f=await Ie(`${M.LIST}?${N.PAGE_NO.KEY}=${t}&${N.ROWS_PER_PAGE.KEY}=${T}&${N.SEARCH_TEXT.KEY}=${W}`),{status:Ee}=f,{data:{contactInquires:be,totalCounts:_e},success:Ce}=f.data;Ce&&Ee===F[200]?(me(be),$(!1),K(!1),ie(_e)):V(Ne[c].FETCHING_USERS_LIST)}catch(f){r=R(f),K(!0),V(r),$(!1)}}return n.useEffect(()=>{q()},[C,T,ae]),e.jsxs(e.Fragment,{children:[e.jsx(De,{title:Z.SUPPORT}),e.jsxs(ke,{className:"page-container users-page",heading:Z.SUPPORT,children:[e.jsx(Le,{breadcrumbs:[e.jsx(Ae,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:we.DASHBOARD,children:"dashboard"}),"Support-Enquires"]}),e.jsx(ms,{sx:{mt:4,boxShadow:3},className:(s==null?void 0:s.navType)==="dark"?"dark_card":"",children:e.jsxs($e,{children:[e.jsx(Fe,{children:e.jsxs(Be,{className:"list-table",children:[e.jsx(se,{order:b,orderBy:_,headLabel:Ge,rowCount:0,numSelected:m.length,onRequestSort:xe,onSelectAllClick:ge,handleSerchInputChange:J,searchText:W,handleClearSearchInput:J}),e.jsx(He,{children:e.jsx(gs,{loading:D,connectionError:le,errorMessage:ce,enqueryList:de,selected:m,handleActionDialog:U,srNo:k})})]})}),e.jsx(ts,{rowsPerPageOptions:N.ROWS_PER_PAGE_OPTIONS,component:"div",className:(s==null?void 0:s.navType)==="dark"?"dark_pagination":"",count:oe,rowsPerPage:T,page:C,onPageChange:je,onRowsPerPageChange:fe})]})})]}),e.jsx(us,{open:!!y,anchorEl:y,onClose:I,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{p:1,width:140,"& .MuiMenuItem-root":{px:1,typography:"body2",borderRadius:.75}}},children:e.jsxs(ps,{children:[e.jsx(ee,{icon:"material-symbols:supervised-user-circle",sx:{mr:2}}),"View"]})}),ue&&e.jsx(is,{open:w,handleClose:I,children:e.jsxs(O,{sx:{p:5},className:(s==null?void 0:s.navType)==="dark"?"dark_Modal":"",children:[e.jsx(l,{variant:"h4",color:"primary",align:"center",sx:{mb:2},children:"Details"}),e.jsx(hs,{sx:{mb:3}}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Ve,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Name:"})," ",a.fullname]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Xe,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Email:"})," ",a.email]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(ls,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Subject:"})," ",a.subject]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(cs,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Type:"})," ",a.type]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[a.status===1?e.jsx(Je,{color:"warning"}):e.jsx(Ze,{color:"success"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Status:"})," ",a.status===1?"Pending":"Solved"]})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(ze,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Description:"})," ",a.description]})]})}),a.file_link&&e.jsxs(h,{item:!0,xs:12,children:[e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(ds,{color:"primary"}),e.jsx(l,{variant:"body1",children:e.jsx("strong",{children:"Media:"})})]}),e.jsx(O,{height:200,width:200,children:e.jsx("img",{style:{height:"100%",width:"100%",objectFit:"cover"},src:a.file_link,alt:"media"})})]})]}),e.jsxs(u,{direction:"row",justifyContent:"end",alignItems:"center",my:2,children:[e.jsxs(O,{className:(s==null?void 0:s.navType)==="dark"?"dark_status":"",children:[e.jsx(l,{variant:"h5",children:"Change Status"}),e.jsx(xs,{children:"Pending to Solved and vice versa"})]}),e.jsx(O,{px:2,children:e.jsx(os,{onChange:t=>{he(t.target.checked),Se()},checked:X,sx:{variant:"success"}})})]}),e.jsxs(u,{direction:"row",justifyContent:"end",spacing:2,children:[e.jsx(Q,{disabled:D,variant:"outlined",color:"error",onClick:()=>ye(a.id),children:"Delete"}),e.jsx(Q,{disabled:D,variant:"outlined",onClick:()=>w(!1),children:"Close"})]})]})})]})}export{Et as default};
