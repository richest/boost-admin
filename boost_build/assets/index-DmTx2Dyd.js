import{b as D,T as ee,a as V,j as e,G as g,V as r,p as le,a1 as F,d as k,a4 as v,r as l,a3 as de,s as me,P as _,u as pe,L as U,a6 as ue,R as M,N as te,F as he,Q as xe,Y as ge}from"./index-Bb4T6yJS.js";import{P as fe}from"./container-Mdzkb4R0.js";import{A as Ee}from"./helmet-BKDsicQe.js";import{A as E}from"./apiErrorResonse-CCtXlH33.js";import{W as ye}from"./WebBreadCrumb-CplDcnjI.js";import{C as je,D as Se}from"./DeletePopup-iIO_CjFO.js";import{u as se,o as re}from"./yup-VhrNJgti.js";import{c as oe,a as z}from"./index.esm-B55s2Mzk.js";import{V as W}from"./regexRules-CPrFAOdY.js";import{I as w}from"./Iconify-B2ea3Vhk.js";import{P as J}from"./Popover-_oog1cCQ.js";import{B as q}from"./Box-B1asL3_Y.js";import{T as K}from"./Typography-BvK0EBjx.js";import{T as G}from"./TextField-Dv9saPdb.js";import{S as ae}from"./Stack-yqW3PSS6.js";import{L as ne}from"./LoadingButton-D3WD33Li.js";import{S as Te}from"./SkeltonCardLoader-BFqZXtrl.js";import{B as Ce}from"./Box-DzmxXICY.js";import{C as Ie}from"./Card-Cg269qA4.js";import{I as be}from"./IconButton-BS36y1hM.js";import{T as Z}from"./Tooltip-BPIgMGiH.js";import"./styled-BzESMtjz.js";import"./breadcrumbs-BoNbTSIP.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./Button-CoPqx7My.js";import"./colorManipulator-C6WsgVx8.js";import"./DeleteOutlineRounded-whF8ow73.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./useId-BQiMa7-Q.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useControlled-DpDQkWSS.js";import"./useMediaQuery-B2-mEylA.js";import"./iconify-C-ngdJty.js";import"./Grow-BLrRft-L.js";import"./createBox-Z02cO3O7.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./List-BGusPRli.js";import"./FormHelperText-D8o68a4M.js";import"./Skeleton-Cv9Q_VQE.js";import"./Avatar-CkCB1SYh.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./Popper-BrZsYCFQ.js";const Re=oe().shape({name:z().required(`${W.NAME.REQUIRED}`).max(30,`${W.NAME.MAX_LENGTH}`),description:z()}),Ae=({openAddModal:o,setOpenAddModal:s,categoryListCallBack:t,sectorId:b})=>{const{register:p,setValue:N,handleSubmit:y,trigger:u,formState:{errors:h}}=se({mode:"all",resolver:re(Re)}),O=D(c=>c.customization),x=ee.useRef(null),{loader:T,message:C,messageType:R}=D(c=>c.request),f=V(),i=async c=>{let d={name:c.name,description:c.description,sector_id:b};try{f({type:r.PROCESSING});const{status:j,data:{message:m}}=await le(F.CREATE,d);j===k[200]?(f({type:r.SUCCESS,payload:{message:m}}),v.success(m)):(f({type:r.FAILURE,payload:{message:E()}}),v.error(m))}catch(j){f({type:r.FAILURE,payload:{message:E(j)}})}s(!1),t()};return e.jsx(e.Fragment,{children:e.jsx(J,{open:o,anchorEl:x.current,onClose:()=>{s(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs(q,{sx:{padding:2,width:300,background:O.navType==="dark"?"#103C65":"#fff"},children:[e.jsxs(q,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(K,{variant:"h4",gutterBottom:!0,pb:4,children:"Create new sub-sector"}),e.jsx(w,{sx:{cursor:"pointer"},onClick:()=>s(!1),icon:"maki:cross",width:20,height:20})]}),e.jsx(g,{container:!0,spacing:2,mb:3,children:e.jsx("form",{onSubmit:y(i),noValidate:!0,children:e.jsxs(g,{item:!0,md:12,mt:4,children:[e.jsx(g,{mb:2,children:e.jsx(G,{...p("name"),label:"Name*",error:!!h.name,helperText:h.name?h.name.message:"",variant:"outlined",fullWidth:!0})}),e.jsx(g,{mb:2,children:e.jsx(G,{...p("description"),label:"Description*",error:!!h.description,helperText:h.description?h.description.message:"",variant:"outlined",fullWidth:!0})}),e.jsx(ae,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(ne,{loading:!!T,size:"medium",type:"submit",loadingPosition:"end",variant:"contained",children:T?"PLEASE WAIT...":"CREATE"})})]})})})]})})})},ve=oe().shape({name:z().required(`${W.NAME.REQUIRED}`).max(30,`${W.NAME.MAX_LENGTH}`),description:z()}),Le=({openEditModal:o,setOpenEditModal:s,categoryData:t,categoryListCallBack:b,sectorId:p})=>{const N=D(d=>d.customization),y=ee.useRef(null),{loader:u,message:h,messageType:O}=D(d=>d.request),x=V();l.useState(!1);const{register:T,setValue:C,handleSubmit:R,trigger:f,formState:{errors:i}}=se({mode:"all",resolver:re(ve)}),c=async d=>{const j={name:d.name,description:d.description,sector_id:p};try{x({type:r.PROCESSING});const{status:m,data:{message:A}}=await de(`${F.UPDATE}/${t==null?void 0:t.id}`,j);m===k[200]?(x({type:r.SUCCESS,payload:{message:A}}),v.success(A),s(!1),b()):(x({type:r.FAILURE,payload:{message:E()}}),v.error(A))}catch(m){x({type:r.FAILURE,payload:{message:E(m)}})}};return l.useEffect(()=>{t&&(C("name",t==null?void 0:t.name),C("description",t==null?void 0:t.description))},[t,C]),e.jsx(e.Fragment,{children:e.jsx(J,{open:o,anchorEl:y.current,onClose:()=>{s(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs(q,{sx:{padding:2,width:300,background:N.navType==="dark"?"#103C65":"#fff"},children:[e.jsxs(q,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(K,{variant:"h4",gutterBottom:!0,pb:4,children:"Edit sector"}),e.jsx(w,{sx:{cursor:"pointer"},onClick:()=>s(!1),icon:"maki:cross",width:20,height:20})]}),e.jsx(g,{container:!0,spacing:2,mb:3,children:e.jsx("form",{onSubmit:R(c),noValidate:!0,children:e.jsxs(g,{item:!0,md:12,mt:4,children:[e.jsx(g,{mb:2,children:e.jsx(G,{...T("name"),label:"Name*",error:!!i.name,helperText:i.name?i.name.message:"",variant:"outlined",fullWidth:!0})}),e.jsx(g,{mb:2,children:e.jsx(G,{...T("description"),label:"Description*",error:!!i.description,helperText:i.description?i.description.message:"",variant:"outlined",fullWidth:!0})}),e.jsx(ae,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(ne,{loading:!!u,size:"medium",type:"submit",loadingPosition:"end",variant:"contained",children:u?"PLEASE WAIT...":"UPDATE"})})]})})})]})})})};me("div")(({theme:o})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:o.spacing(8),height:o.spacing(8),justifyContent:"center",marginBottom:o.spacing(3)}));ie.propTypes={color:_.string,icon:_.string,title:_.string.isRequired,path:_.string.isRequired,sx:_.object};function ie({isLoading:o,path:s,title:t,color:b="primary",sx:p,handleOpenMenu:N,handlePopoverOpen:y,handlePopoverClose:u,id:h,hoveredUserId:O,anchorEl:x,categoryListCallBack:T,sectorId:C,setDeleteModal:R,...f}){const i=pe(),c=V(),d=D(I=>I.customization),[j,m]=l.useState(!1),[A,P]=l.useState(""),[H,Q]=l.useState(""),L=!!x;if(o&&o!==void 0)return e.jsx(Te,{});async function $(I){c({type:r.INIT_LOADER,payload:{loader:!0}});let a;try{const n=await te(I),{status:S}=n,{data:{sectorDetails:X},success:Y}=n.data;Y&&S===k[200]?(P(X),c({type:r.INIT_LOADER,payload:{loader:!1}})):c({type:r.FAILURE,payload:{message:E()}})}catch(n){a=E(n),c({type:r.FAILURE,payload:{message:a}})}}const B=()=>{m(!0),Q(C),$(`${F.GET_SUB_SECTOR}/${O}`)};return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"web-content-card",children:e.jsxs(Ie,{sx:{py:5,boxShadow:1,textAlign:"center",background:d.navType==="dark"?"#0e1522":i.palette.primary.light,...p},...f,children:[e.jsx(be,{className:"card_menu_icon",onClick:I=>y(I,h),children:e.jsx(w,{icon:"eva:more-vertical-outline",width:24,height:24})}),e.jsx(J,{open:L,anchorEl:x,onClose:u,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},sx:{boxShadow:8},children:e.jsxs("div",{className:"product_menu_item",children:[e.jsx(U,{onClick:()=>{B(),u()},variant:"contained",color:"primary",children:e.jsx(Z,{title:"Edit",arrow:!0,placement:"right",children:e.jsx(w,{icon:"eva:edit-outline",sx:{color:"rgba(0, 0, 0, 0.54)"}})})}),e.jsx(U,{onClick:()=>{R(!0),u()},variant:"contained",color:"success",style:{paddingTop:"5px"},children:e.jsx(Z,{title:"Delete",arrow:!0,placement:"right",children:e.jsx(w,{icon:"eva:trash-2-outline",sx:{color:"rgb(189 51 51)"}})})})]})}),e.jsx(ue,{style:{textDecoration:"none"},to:`${M.PROFILE_SETUP}/${t==null?void 0:t.replace(/[\s/]+/g,"-").toLowerCase()}`,state:{name:t},children:e.jsx(K,{variant:"h5",sx:{color:d.navType==="dark"?i.palette.primary.light:"#0e1522"},children:t})})]})}),e.jsx(Le,{openEditModal:j,setOpenEditModal:m,categoryData:A,categoryListCallBack:T,sectorId:H})]})}function Ct(){var $,B,I;const o=V(),s=he(),[t,b]=l.useState(!1),[p,N]=l.useState([]),[y,u]=l.useState(null),[h,O]=l.useState(10),[x,T]=l.useState(1),[C,R]=l.useState(null),[f,i]=l.useState(!1),[c,d]=l.useState(($=s==null?void 0:s.state)==null?void 0:$.id),j=(a,n)=>{R(a.currentTarget),u(n)},m=a=>{p.find(n=>n.id===a),u(a)},A=()=>{u(null)},P=()=>{R(null)},H=async()=>{try{o({type:r.PROCESSING});const{status:a,data:{message:n}}=await ge(`${F.DELETE}/${y}`);a===k[200]?(o({type:r.SUCCESS,payload:{message:n}}),v.success(n),L(),i(!1)):(o({type:r.FAILURE,payload:{message:E()}}),v.success(n)),P()}catch(a){o({type:r.FAILURE,payload:{message:E(a)}}),v.error(`${a.response.data.message}`),P()}};async function Q(a){o({type:r.INIT_LOADER,payload:{loader:!0}});let n;try{const S=await te(a),{status:X}=S,{data:{sectorsDetails:Y},success:ce}=S.data;ce&&X===k[200]?(N(Y.rows),o({type:r.INIT_LOADER,payload:{loader:!1}})):o({type:r.FAILURE,payload:{message:E()}})}catch(S){n=E(S),o({type:r.FAILURE,payload:{message:n}})}}const L=()=>{Q(`${F.LIST}?sector_id=${c}`)};return l.useEffect(()=>{L()},[x,h]),e.jsxs(e.Fragment,{children:[e.jsx(Ee,{title:xe.WEB_CONTENT}),e.jsxs(fe,{className:"page-container users-page",heading:"Web Content",children:[e.jsx(ye,{breadcrumbs:[e.jsx(U,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:M.DASHBOARD,children:"dashboard"}),e.jsx(U,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:M.WEB_CONTENT,children:"Web-content"}),e.jsx(U,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:M.PROFILE_SETUP,children:"profile sector"}),(B=s==null?void 0:s.state)==null?void 0:B.name]}),e.jsxs(g,{container:!0,spacing:3,sx:{pt:2},children:[p==null?void 0:p.map((a,n)=>{var S;return e.jsx(g,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(ie,{title:a.name,id:a==null?void 0:a.id,hoveredUserId:y,handleOpenMenu:m,handlePopoverOpen:j,handlePopoverClose:P,anchorEl:C,categoryListCallBack:L,sectorId:(S=s==null?void 0:s.state)==null?void 0:S.id,setDeleteModal:i})},n)}),e.jsx(g,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(je,{setOpenAddModal:b,title:"sub-sector"})})]})]}),t&&e.jsx(Ae,{sectorId:(I=s==null?void 0:s.state)==null?void 0:I.id,openAddModal:t,setOpenAddModal:b,categoryListCallBack:L}),f&&e.jsx(Se,{title:"Sub-Sector",cancelAction:A,deleteAction:H,id:y,setIsOpen:i,isOpen:f})]})}export{Ct as default};
