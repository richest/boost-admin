import{a as z,f as B,j as a,G as V,K as c,V as t,p as U,ah as T,d as F,a4 as L}from"./index-Bb4T6yJS.js";import{d as Y}from"./CancelTwoTone-g9I4gqmS.js";import{d as q}from"./AddPhotoAlternate-Dq9K76ig.js";import{A as n}from"./apiErrorResonse-CCtXlH33.js";import{T as H}from"./Tooltip-BPIgMGiH.js";import{S as K}from"./Skeleton-Cv9Q_VQE.js";import{A as Q}from"./Avatar-CkCB1SYh.js";import{S as W}from"./Stack-yqW3PSS6.js";import{T as J}from"./Typography-BvK0EBjx.js";import{F as N}from"./FormHelperText-D8o68a4M.js";const te=$=>{var x,y,E,S,R,C,A,I;const{imageObj:e,setImageObj:m,errors:d,register:v,name:s,setValue:D,trigger:g,loader:G}=$,r=z();B();const{onChange:f,...M}=v(s),h=async o=>{const l={upload_image_response_id:o};try{r({type:t.PROCESSING});const{status:p,data:{message:i,data:u}}=await U(T.DELETE_IMAGE,l);p===F[200]?(m({}),D(s,{}),r({type:t.SUCCESS,payload:{}})):r({type:t.FAILURE,payload:{message:n()}}),L.success(i)}catch(p){r({type:t.FAILURE,payload:{message:n(p)}})}},w=async o=>{var i,u;if(!o.target.files[0])return;(i=e==null?void 0:e.uploaded_images)!=null&&i.upload_image_response_id&&h((u=e==null?void 0:e.uploaded_images)==null?void 0:u.upload_image_response_id);let l=o.target.files[0];const p=new FormData;p.append("upload_image",l);try{r({type:t.PROCESSING});const{status:_,data:{message:P,data:k}}=await U(T.UPLOAD_IMAGE,p);_===F[200]?(m(k),r({type:t.SUCCESS,payload:{}})):r({type:t.FAILURE,payload:{message:n()}}),L.success(P)}catch(_){r({type:t.FAILURE,payload:{message:n(_)}})}};return a.jsx(a.Fragment,{children:a.jsxs(V,{position:"relative",mb:4,children:[((x=e==null?void 0:e.uploaded_images)==null?void 0:x.upload_image_url)!==null&&((y=e==null?void 0:e.uploaded_images)==null?void 0:y.upload_image_url)!==void 0?a.jsx(H,{placement:"top",title:"Click to remove image",children:a.jsx(Y,{sx:{color:c.ERROR_MSG_COLOR,position:"absolute",right:"5px",top:"5px",zIndex:"9999",cursor:"pointer",fontSize:"18px"},onClick:()=>{var o,l;(o=e==null?void 0:e.uploaded_images)!=null&&o.upload_image_response_id&&h((l=e==null?void 0:e.uploaded_images)==null?void 0:l.upload_image_response_id),f({target:{name:s,value:[]}}),g(s)}})}):"",a.jsxs("label",{htmlFor:`${(E=e==null?void 0:e.uploaded_images)!=null&&E.upload_image_url?null:s}`,children:[G?a.jsx(K,{variant:"rectangular",width:"100%",height:"10em"}):a.jsx(Q,{sx:{width:"auto",height:"10em",border:`${(S=e==null?void 0:e.uploaded_images)!=null&&S.upload_image_url?null:`2.5px dashed ${d[s]?"#ff4842":"#20A2B8"}`}`,color:`${d[s]?"#ff4842":"#fff"}`,cursor:`${(R=e==null?void 0:e.uploaded_images)!=null&&R.upload_image_url?null:"pointer"}`,backgroundColor:`${(C=e==null?void 0:e.uploaded_images)!=null&&C.upload_image_url,"#e6ecec"}`},variant:"rounded",src:(A=e==null?void 0:e.uploaded_images)==null?void 0:A.upload_image_url,className:"create-blog-image",children:a.jsxs(W,{container:!0,alignItems:"center",justifyContent:"center",children:[a.jsx(q,{sx:{fontSize:"3em",color:`${d[s]?"#ff4842":c.PRIMARY_COLOR}`}}),a.jsx(J,{color:c.PRIMARY_COLOR,variant:"h4",children:"Upload file"}),a.jsx(N,{error:!!((I=e==null?void 0:e.uploaded_images)!=null&&I.upload_image_url),children:"Allowed *.jpeg, *.jpg, *.png max size of 5 MB."})]})}),a.jsx("input",{...M,type:"file",id:s,accept:"image/*",name:s,onChange:o=>{w(o),f(o),g(s)},style:{display:"none"}})]}),d[s]&&a.jsx(N,{error:!0,children:d[s].message})]})})};export{te as U};
