import{b as M,T as q,a as z,r as a,j as e,G as m,K as H,a4 as y,V as o,p as V,aj as F,d as _,Q,L as k,R as v,Y,N as K}from"./index-Bb4T6yJS.js";import{P as X}from"./container-Mdzkb4R0.js";import{A as J}from"./helmet-BKDsicQe.js";import{W as Z}from"./WebBreadCrumb-CplDcnjI.js";import{W as ee}from"./WebContentTemplateCard-DQnKWPur.js";import{C as te,D as se}from"./DeletePopup-iIO_CjFO.js";import{u as re,o as oe}from"./yup-VhrNJgti.js";import{c as ae,a as ne,d as ie}from"./index.esm-B55s2Mzk.js";import{V as $}from"./regexRules-CPrFAOdY.js";import{d as le}from"./CancelTwoTone-g9I4gqmS.js";import{d as ce}from"./AddAPhoto-D4lISSRu.js";import{I as pe}from"./Iconify-B2ea3Vhk.js";import{A as x}from"./apiErrorResonse-CCtXlH33.js";import{P as me}from"./Popover-_oog1cCQ.js";import{B}from"./Box-B1asL3_Y.js";import{T as de}from"./Typography-BvK0EBjx.js";import{A as ue}from"./Avatar-CkCB1SYh.js";import{T as ge}from"./Tooltip-BPIgMGiH.js";import{F as G}from"./FormHelperText-D8o68a4M.js";import{S as W}from"./Stack-yqW3PSS6.js";import{T as fe}from"./TextField-Dv9saPdb.js";import{L as he}from"./LoadingButton-D3WD33Li.js";import"./styled-BzESMtjz.js";import"./breadcrumbs-BoNbTSIP.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./Button-CoPqx7My.js";import"./SkeltonCardLoader-BFqZXtrl.js";import"./Card-Cg269qA4.js";import"./Skeleton-Cv9Q_VQE.js";import"./colorManipulator-C6WsgVx8.js";import"./Box-DzmxXICY.js";import"./createBox-Z02cO3O7.js";import"./IconButton-BS36y1hM.js";import"./DeleteOutlineRounded-whF8ow73.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./useId-BQiMa7-Q.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useControlled-DpDQkWSS.js";import"./useMediaQuery-B2-mEylA.js";import"./iconify-C-ngdJty.js";import"./Grow-BLrRft-L.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./Popper-BrZsYCFQ.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./List-BGusPRli.js";const xe=ae().shape({name:ne().required(`${$.NAME.REQUIRED}`).max(30,`${$.NAME.MAX_LENGTH}`),icon:ie().required("Icon is required").test("fileSize","Icon sizie can not be more than 5 MB",s=>(s==null?void 0:s.length)===0?!0:(s==null?void 0:s.length)&&s[0].size<=5242880).test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",s=>s.length===0?!0:s.length&&["image/jpeg","image/png","image/jpg"].includes(s[0].type))}),ye=({openAddModal:s,setOpenAddModal:d,categoryListCallBack:C})=>{const{register:c,setValue:w,handleSubmit:E,trigger:u,formState:{errors:n}}=re({mode:"all",resolver:oe(xe)}),{onChange:R,...b}=c("icon"),L=M(t=>t.customization),O=q.useRef(null),{loader:g,message:D,messageType:S}=M(t=>t.request),f=z(),[U,j]=a.useState(!1),[i,A]=a.useState(null),P=()=>{j(!0)},h=()=>{g||j(!1)},r=async t=>{var p;if(((p=t.icon)==null?void 0:p.length)===0)y.error("Icon is required");else{let T=new FormData;const I={name:t.name};Object.keys(I).forEach(function(l){T.append(l,I[l])}),t.icon[0]&&T.append("icon",t.icon[0]);try{f({type:o.PROCESSING});const{status:l,data:{message:N}}=await V(F.CREATE,T);l===_[200]?(f({type:o.SUCCESS,payload:{message:N}}),y.success(N)):(f({type:o.FAILURE,payload:{message:x()}}),y.error(N))}catch(l){f({type:o.FAILURE,payload:{message:x(l)}})}d(!1),C()}};return e.jsx(e.Fragment,{children:e.jsx(me,{open:s,anchorEl:O.current,onClose:()=>{d(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs(B,{sx:{padding:2,width:300,background:L.navType==="dark"?"#103C65":"#fff"},children:[e.jsxs(B,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(de,{variant:"h4",gutterBottom:!0,pb:4,children:"Create new template gallery category"}),e.jsx(pe,{sx:{cursor:"pointer"},onClick:()=>d(!1),icon:"maki:cross",width:20,height:20})]}),e.jsxs(m,{container:!0,spacing:2,mb:3,children:[e.jsxs(m,{item:!0,md:12,children:[e.jsxs(m,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",position:"relative",sx:{marginTop:"20px"},children:[e.jsxs("div",{onMouseEnter:P,onMouseLeave:h,children:[e.jsx(ue,{alt:"",sx:{width:120,height:120,border:`2px dashed ${n.icon?"#ff4842":"#20a2b8"}`,color:`${n.icon?"#ff4842":"#fff"}`,background:"#20a2b896"},color:"danger",src:i&&URL.createObjectURL(i)}),i!=null?e.jsx(ge,{placement:"top",title:"Click to remove icon",children:e.jsx(le,{sx:{color:H.ERROR_MSG_COLOR,background:"#fff",borderRadius:"50%",position:"absolute",top:0,left:"55%",cursor:"pointer",fontSize:"18px"},onClick:()=>{A(null),j(!1),R({target:{name:"icon",value:[]}}),u("icon")}})}):"",!i&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx("label",{className:"uploadFileInput",htmlFor:"uploadFileInput",children:e.jsx(ce,{color:"#fff"})})}),e.jsx("input",{...b,type:"file",id:"uploadFileInput",accept:"image/*",name:"icon",onChange:t=>{A(t.target.files[0]),R(t),u("icon")},style:{display:"none"}})]}),n.icon&&e.jsx(G,{sx:{my:2,px:5,textAlign:"center"},error:!0,children:n.icon.message})]}),e.jsx(W,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",width:"100%",mb:2,style:{textAlign:"center"},children:e.jsx(G,{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",color:L.navType==="dark"?"#fff":"#000"},children:"Click to upload icon"})})]}),e.jsx(m,{item:!0,md:12,children:e.jsxs("form",{onSubmit:E(r),noValidate:!0,children:[e.jsx(fe,{...c("name"),label:"Name*",error:!!n.name,helperText:n.name?n.name.message:"",variant:"outlined",fullWidth:!0}),e.jsx(W,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(he,{loading:!!g,size:"medium",type:"submit",loadingPosition:"end",variant:"contained",children:g?"PLEASE WAIT...":"CREATE"})})]})})]})]})})})},ft=()=>{const s=z(),[d,C]=a.useState(!1),[c,w]=a.useState([]),[E,u]=a.useState(null),[n,R]=a.useState(10),[b,L]=a.useState(1),[O,g]=a.useState(null),[D,S]=a.useState(!1),f=(r,t)=>{g(r.currentTarget),u(t)},U=r=>{c.find(t=>t.id===r),u(r)},j=()=>{u(null)},i=()=>{g(null)},A=async()=>{try{s({type:o.PROCESSING});const{status:r,data:{message:t}}=await Y(`${F.DELETE}/${E}`);r===_[200]?(s({type:o.SUCCESS,payload:{message:t}}),y.success(t),S(!1),h()):(s({type:o.FAILURE,payload:{message:x()}}),y.success(t)),i()}catch(r){s({type:o.FAILURE,payload:{message:x(r)}}),y.error(`${r.response.data.message}`),i()}};async function P(r){s({type:o.INIT_LOADER,payload:{loader:!0}});let t;try{const p=await K(r),{status:T}=p,{data:{templateDetails:I},success:l}=p.data;l&&T===_[200]?(w(I.rows),s({type:o.INIT_LOADER,payload:{loader:!1}})):s({type:o.FAILURE,payload:{message:x()}})}catch(p){t=x(p),s({type:o.FAILURE,payload:{message:t}})}}const h=()=>{P(`${F.LIST}`)};return a.useEffect(()=>{h()},[b,n]),e.jsxs(e.Fragment,{children:[e.jsx(J,{title:Q.WEB_CONTENT}),e.jsxs(X,{className:"page-container users-page",heading:"Web Content",children:[e.jsx(Z,{breadcrumbs:[e.jsx(k,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:v.DASHBOARD,children:"dashboard"}),e.jsx(k,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:v.WEB_CONTENT,children:"Web-content"}),"Template-gallery"]}),e.jsxs(m,{container:!0,spacing:3,sx:{pt:2},children:[c==null?void 0:c.map((r,t)=>e.jsx(m,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(ee,{title:r.name,icon:r.icon,id:r==null?void 0:r.id,hoveredUserId:E,handleOpenMenu:U,handlePopoverOpen:f,handlePopoverClose:i,anchorEl:O,categoryListCallBack:h,setDeleteModal:S})},t)),e.jsx(m,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(te,{setOpenAddModal:C})})]}),d&&e.jsx(ye,{openAddModal:d,setOpenAddModal:C,categoryListCallBack:h}),D&&e.jsx(se,{title:"template",cancelAction:j,deleteAction:A,id:E,setIsOpen:S,isOpen:D})]})]})};export{ft as default};
