import{b as $,T as ee,a as Q,r as d,j as e,G as b,K as te,a4 as O,V as o,p as fe,a5 as z,d as B,a3 as he,s as ge,P as U,u as xe,L as M,R as K,N as se,Q as je,Y as ye}from"./index-Bb4T6yJS.js";import{W as Ee}from"./WebBreadCrumb-CplDcnjI.js";import{P as Se}from"./container-Mdzkb4R0.js";import{A as Ie}from"./helmet-BKDsicQe.js";import{C as be,D as Ce}from"./DeletePopup-iIO_CjFO.js";import{u as ne,o as re}from"./yup-VhrNJgti.js";import{c as oe,a as ae,d as ie}from"./index.esm-B55s2Mzk.js";import{V as D}from"./regexRules-CPrFAOdY.js";import{d as ce}from"./CancelTwoTone-g9I4gqmS.js";import{d as le}from"./AddAPhoto-D4lISSRu.js";import{I as P}from"./Iconify-B2ea3Vhk.js";import{A as L}from"./apiErrorResonse-CCtXlH33.js";import{P as Y}from"./Popover-_oog1cCQ.js";import{B as G}from"./Box-B1asL3_Y.js";import{T as J}from"./Typography-BvK0EBjx.js";import{A as de}from"./Avatar-CkCB1SYh.js";import{T as W}from"./Tooltip-BPIgMGiH.js";import{F as H}from"./FormHelperText-D8o68a4M.js";import{S as V}from"./Stack-yqW3PSS6.js";import{T as pe}from"./TextField-Dv9saPdb.js";import{L as me}from"./LoadingButton-D3WD33Li.js";import"./WebContentTemplateCard-DQnKWPur.js";import{S as Te}from"./SkeltonCardLoader-BFqZXtrl.js";import{B as Re}from"./Box-DzmxXICY.js";import{C as Ae}from"./Card-Cg269qA4.js";import{I as Le}from"./IconButton-BS36y1hM.js";import{a as Z}from"./colorManipulator-C6WsgVx8.js";import"./breadcrumbs-BoNbTSIP.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./Button-CoPqx7My.js";import"./styled-BzESMtjz.js";import"./DeleteOutlineRounded-whF8ow73.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./useId-BQiMa7-Q.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useControlled-DpDQkWSS.js";import"./useMediaQuery-B2-mEylA.js";import"./iconify-C-ngdJty.js";import"./Grow-BLrRft-L.js";import"./createBox-Z02cO3O7.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./Popper-BrZsYCFQ.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./List-BGusPRli.js";import"./Skeleton-Cv9Q_VQE.js";const ve=oe().shape({name:ae().required(`${D.NAME.REQUIRED}`).max(30,`${D.NAME.MAX_LENGTH}`),icon:ie().required("Icon is required").test("fileSize","Icon sizie can not be more than 5 MB",t=>(t==null?void 0:t.length)===0?!0:(t==null?void 0:t.length)&&t[0].size<=5242880).test("fileType","Only *.jpeg, *.jpg, *.png type of images are allowed.",t=>t.length===0?!0:t.length&&["image/jpeg","image/png","image/jpg"].includes(t[0].type))}),we=({openAddModal:t,setOpenAddModal:p,categoryListCallBack:s})=>{const{register:c,setValue:v,handleSubmit:w,trigger:y,formState:{errors:g}}=ne({mode:"all",resolver:re(ve)}),{onChange:k,...E}=c("icon"),F=$(n=>n.customization),C=ee.useRef(null),{loader:u,message:N,messageType:m}=$(n=>n.request),x=Q(),[T,j]=d.useState(!1),[f,R]=d.useState(null),h=()=>{j(!0)},S=()=>{u||j(!1)},r=async n=>{var I;if(((I=n.icon)==null?void 0:I.length)===0)O.error("Icon is required");else{let a=new FormData;const i={name:n.name};Object.keys(i).forEach(function(l){a.append(l,i[l])}),n.icon[0]&&a.append("thumbnail",n.icon[0]);try{x({type:o.PROCESSING});const{status:l,data:{message:A}}=await fe(z.CREATE,a);l===B[200]?(x({type:o.SUCCESS,payload:{message:A}}),O.success(A)):(x({type:o.FAILURE,payload:{message:L()}}),O.error(A))}catch(l){x({type:o.FAILURE,payload:{message:L(l)}})}p(!1),s()}};return e.jsx(e.Fragment,{children:e.jsx(Y,{open:t,anchorEl:C.current,onClose:()=>{p(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs(G,{sx:{padding:2,width:300,background:F.navType==="dark"?"#103C65":"#fff"},children:[e.jsxs(G,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(J,{variant:"h4",gutterBottom:!0,pb:4,children:"Create new sector"}),e.jsx(P,{sx:{cursor:"pointer"},onClick:()=>p(!1),icon:"maki:cross",width:20,height:20})]}),e.jsxs(b,{container:!0,spacing:2,mb:3,children:[e.jsxs(b,{item:!0,md:12,children:[e.jsxs(b,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",position:"relative",sx:{marginTop:"20px"},children:[e.jsxs("div",{onMouseEnter:h,onMouseLeave:S,children:[e.jsx(de,{alt:"",sx:{width:120,height:120,border:`2px dashed ${g.icon?"#ff4842":"#20a2b8"}`,color:`${g.icon?"#ff4842":"#fff"}`,background:"#20a2b896"},color:"danger",src:f&&URL.createObjectURL(f)}),f!=null?e.jsx(W,{placement:"top",title:"Click to remove icon",children:e.jsx(ce,{sx:{color:te.ERROR_MSG_COLOR,background:"#fff",borderRadius:"50%",position:"absolute",top:0,left:"55%",cursor:"pointer",fontSize:"18px"},onClick:()=>{R(null),j(!1),k({target:{name:"icon",value:[]}}),y("icon")}})}):"",!f&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx("label",{className:"uploadFileInput",htmlFor:"uploadFileInput",children:e.jsx(le,{color:"#fff"})})}),e.jsx("input",{...E,type:"file",id:"uploadFileInput",accept:"image/*",name:"icon",onChange:n=>{R(n.target.files[0]),k(n),y("icon")},style:{display:"none"}})]}),g.icon&&e.jsx(H,{sx:{my:2,px:5,textAlign:"center"},error:!0,children:g.icon.message})]}),e.jsx(V,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",width:"100%",mb:2,style:{textAlign:"center"},children:e.jsx(H,{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",color:F.navType==="dark"?"#fff":"#000"},children:"Click to upload icon"})})]}),e.jsx(b,{item:!0,md:12,children:e.jsxs("form",{onSubmit:w(r),noValidate:!0,children:[e.jsx(pe,{...c("name"),label:"Name*",error:!!g.name,helperText:g.name?g.name.message:"",variant:"outlined",fullWidth:!0}),e.jsx(V,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(me,{loading:!!u,size:"medium",type:"submit",loadingPosition:"end",variant:"contained",children:u?"PLEASE WAIT...":"CREATE"})})]})})]})]})})})},Oe=oe().shape({name:ae().required(`${D.NAME.REQUIRED}`).max(30,`${D.NAME.MAX_LENGTH}`),icon:ie().test("fileSize","Icon's size cannot be more than 5 MB",(t,p)=>{var c;const{preSelectedImage:s}=p.options.context;return s||t.length===0?!0:((c=t[0])==null?void 0:c.size)<=5242880}).test("fileType","Only *.jpeg, *.jpg, *.png types are allowed.",(t,p)=>{var c;const{preSelectedImage:s}=p.options.context;return s||t.length===0?!0:["image/jpeg","image/png","image/jpg"].includes((c=t[0])==null?void 0:c.type)})}),ke=({openEditModal:t,setOpenEditModal:p,categoryData:s,categoryListCallBack:c})=>{const v=$(i=>i.customization),w=ee.useRef(null),{loader:y,message:g,messageType:k}=$(i=>i.request),E=Q(),[F,C]=d.useState(!1),[u,N]=d.useState(null),[m,x]=d.useState(null),{register:T,setValue:j,handleSubmit:f,trigger:R,formState:{errors:h}}=ne({mode:"all",resolver:re(Oe),context:{preSelectedImage:m}}),{onChange:S,...r}=T("icon"),n=()=>{C(!0)},I=()=>{y||C(!1)},a=async i=>{var l;if(m===null||((l=i.icon)==null?void 0:l.length)===0)O.error("Icon is required");else{let A=new FormData;const q={name:i.name};Object.keys(q).forEach(function(_){A.append(_,q[_])}),m?A.append("thumbnail",m):A.append("thumbnail",i.icon[0]);try{E({type:o.PROCESSING});const{status:_,data:{message:X}}=await he(`${z.UPDATE}/${s==null?void 0:s.id}`,A);_===B[200]?(E({type:o.SUCCESS,payload:{message:X}}),O.success(X),p(!1),c()):(E({type:o.FAILURE,payload:{message:L()}}),O.error(X))}catch(_){E({type:o.FAILURE,payload:{message:L(_)}})}}};return d.useEffect(()=>{s&&(j("name",s==null?void 0:s.name),j("icon",s==null?void 0:s.thumbnail),x(s==null?void 0:s.thumbnail))},[s,j]),e.jsx(e.Fragment,{children:e.jsx(Y,{open:t,anchorEl:w.current,onClose:()=>{p(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs(G,{sx:{padding:2,width:300,background:v.navType==="dark"?"#103C65":"#fff"},children:[e.jsxs(G,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(J,{variant:"h4",gutterBottom:!0,pb:4,children:"Edit sector"}),e.jsx(P,{sx:{cursor:"pointer"},onClick:()=>p(!1),icon:"maki:cross",width:20,height:20})]}),e.jsxs(b,{container:!0,spacing:2,mb:3,children:[e.jsxs(b,{item:!0,md:12,children:[e.jsxs(b,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",position:"relative",sx:{marginTop:"20px"},children:[e.jsxs("div",{onMouseEnter:n,onMouseLeave:I,children:[e.jsx(de,{alt:"",sx:{width:120,height:120,border:`2px dashed ${h.icon?"#ff4842":"#20a2b8"}`,color:`${h.icon?"#ff4842":"#fff"}`,background:"#20a2b896"},color:"danger",src:m||u&&URL.createObjectURL(u)}),m||u!=null?e.jsx(W,{placement:"top",title:"Click to remove icon",children:e.jsx(ce,{sx:{color:te.ERROR_MSG_COLOR,background:"#fff",borderRadius:"50%",position:"absolute",top:0,left:"55%",cursor:"pointer",fontSize:"18px"},onClick:()=>{N(null),x(null),C(!1),S({target:{name:"icon",value:[]}}),R("icon")}})}):"",!m&&!u&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx("label",{className:"uploadFileInput",htmlFor:"uploadFileInput",children:e.jsx(le,{color:"#fff"})})}),e.jsx("input",{...r,type:"file",id:"uploadFileInput",accept:"image/*",name:"icon",onChange:i=>{N(i.target.files[0]),S(i),R("icon")},style:{display:"none"}})]}),h.icon&&e.jsx(H,{sx:{my:2,px:5,textAlign:"center"},error:!0,children:h.icon.message})]}),e.jsx(V,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",width:"100%",mb:2,style:{textAlign:"center"},children:e.jsx(H,{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",color:v.navType==="dark"?"#fff":"#000"},children:"Click to upload icon"})})]}),e.jsx(b,{item:!0,md:12,children:e.jsxs("form",{onSubmit:f(a),noValidate:!0,children:[e.jsx(pe,{...T("name"),label:"Name*",error:!!h.name,helperText:h.name?h.name.message:"",variant:"outlined",fullWidth:!0}),e.jsx(V,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(me,{loading:!!y,size:"medium",type:"submit",loadingPosition:"end",variant:"contained",children:y?"PLEASE WAIT...":"UPDATE"})})]})})]})]})})})},Ne=ge("div")(({theme:t})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:t.spacing(8),height:t.spacing(8),justifyContent:"center",marginBottom:t.spacing(3)}));ue.propTypes={color:U.string,icon:U.string,title:U.string.isRequired,path:U.string.isRequired,sx:U.object};function ue({isLoading:t,path:p,title:s,icon:c,color:v="primary",sx:w,handleOpenMenu:y,handlePopoverOpen:g,handlePopoverClose:k,id:E,hoveredUserId:F,anchorEl:C,categoryListCallBack:u,setDeleteModal:N,...m}){const x=xe(),T=Q(),j=$(a=>a.customization),[f,R]=d.useState(!1),[h,S]=d.useState(""),r=!!C;if(t&&t!==void 0)return e.jsx(Te,{});async function n(a){T({type:o.INIT_LOADER,payload:{loader:!0}});let i;try{const l=await se(a),{status:A}=l,{data:{sectorDetails:q},success:_}=l.data;_&&A===B[200]?(S(q),T({type:o.INIT_LOADER,payload:{loader:!1}})):T({type:o.FAILURE,payload:{message:L()}})}catch(l){i=L(l),T({type:o.FAILURE,payload:{message:i}})}}const I=()=>{R(!0),n(`${z.GET_SECTOR}/${F}`)};return e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"web-content-card",children:e.jsxs(Ae,{sx:{py:5,boxShadow:1,textAlign:"center",background:j.navType==="dark"?"#0e1522":x.palette.primary.light,...w},...m,children:[e.jsx(Le,{className:"card_menu_icon",onClick:a=>g(a,E),children:e.jsx(P,{icon:"eva:more-vertical-outline",width:24,height:24})}),e.jsx(Y,{open:r,anchorEl:C,onClose:k,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},sx:{boxShadow:8},children:e.jsxs("div",{className:"product_menu_item",children:[e.jsx(M,{onClick:()=>{I(),k()},variant:"contained",color:"primary",children:e.jsx(W,{title:"Edit",arrow:!0,placement:"right",children:e.jsx(P,{icon:"eva:edit-outline",sx:{color:"rgba(0, 0, 0, 0.54)"}})})}),e.jsx(M,{onClick:()=>{N(!0),k()},variant:"contained",color:"success",style:{paddingTop:"5px"},children:e.jsx(W,{title:"Delete",arrow:!0,placement:"right",children:e.jsx(P,{icon:"eva:trash-2-outline",sx:{color:"rgb(189 51 51)"}})})})]})}),e.jsxs(M,{style:{textDecoration:"none"},to:`${K.PROFILE_SETUP}/${s==null?void 0:s.replace(/[\s/]+/g,"-").toLowerCase()}`,state:{name:s,id:E},children:[e.jsx(Ne,{className:"product_card_icon",sx:{color:a=>a.palette[v].dark,backgroundImage:a=>`linear-gradient(135deg, ${Z(a.palette[v].dark,0)} 0%, ${Z(a.palette[v].dark,.24)} 100%)`},children:e.jsx("img",{src:c,alt:"icon",className:"icon_products"})}),e.jsx(J,{variant:"h5",sx:{color:j.navType==="dark"?x.palette.primary.light:"#0e1522"},children:s})]})]})}),e.jsx(ke,{openEditModal:f,setOpenEditModal:R,categoryData:h,categoryListCallBack:u})]})}function wt(){const t=Q(),[p,s]=d.useState(!1),[c,v]=d.useState([]),[w,y]=d.useState(null),[g,k]=d.useState(10),[E,F]=d.useState(1),[C,u]=d.useState(null),[N,m]=d.useState(!1),x=(r,n)=>{u(r.currentTarget),y(n)},T=r=>{c.find(n=>n.id===r),y(r)},j=()=>{y(null)},f=()=>{u(null)},R=async()=>{try{t({type:o.PROCESSING});const{status:r,data:{message:n}}=await ye(`${z.DELETE}/${w}`);r===B[200]?(t({type:o.SUCCESS,payload:{message:n}}),O.success(n),m(!1),S()):(t({type:o.FAILURE,payload:{message:L()}}),O.success(n)),f()}catch(r){t({type:o.FAILURE,payload:{message:L(r)}}),O.error(`${r.response.data.message}`),f()}};async function h(r){t({type:o.INIT_LOADER,payload:{loader:!0}});let n;try{const I=await se(r),{status:a}=I,{data:{sectorsDetails:i},success:l}=I.data;l&&a===B[200]?(v(i.rows),t({type:o.INIT_LOADER,payload:{loader:!1}})):t({type:o.FAILURE,payload:{message:L()}})}catch(I){n=L(I),t({type:o.FAILURE,payload:{message:n}})}}const S=()=>{h(`${z.LIST}`)};return d.useEffect(()=>{S()},[E,g]),e.jsxs(e.Fragment,{children:[e.jsx(Ie,{title:je.WEB_CONTENT}),e.jsxs(Se,{className:"page-container users-page",heading:"Web Content",children:[e.jsx(Ee,{breadcrumbs:[e.jsx(M,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:K.DASHBOARD,children:"dashboard"}),e.jsx(M,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:K.WEB_CONTENT,children:"Web-content"}),"profile-setup sector"]}),e.jsxs(b,{container:!0,spacing:3,sx:{pt:2},children:[c==null?void 0:c.map((r,n)=>e.jsx(b,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(ue,{title:r.name,icon:r.thumbnail,id:r==null?void 0:r.id,hoveredUserId:w,handleOpenMenu:T,handlePopoverOpen:x,handlePopoverClose:f,anchorEl:C,categoryListCallBack:S,setDeleteModal:m})},n)),e.jsx(b,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(be,{setOpenAddModal:s})})]})]}),p&&e.jsx(we,{openAddModal:p,setOpenAddModal:s,categoryListCallBack:S}),N&&e.jsx(Ce,{title:"Sector",cancelAction:j,deleteAction:R,id:w,setIsOpen:m,isOpen:N})]})}export{wt as default};
