import{b as z,T as D,a as K,r as j,j as e,G as R,K as ee,a4 as $,V as m,a3 as te,aj as X,d as Y,s as ne,P as T,u as se,L as G,a6 as re,N as oe}from"./index-Bb4T6yJS.js";import{I as k}from"./Iconify-B2ea3Vhk.js";import{S as ie}from"./SkeltonCardLoader-BFqZXtrl.js";import{u as ae,o as le}from"./yup-VhrNJgti.js";import{c as ce,a as de,d as me}from"./index.esm-B55s2Mzk.js";import{V as q}from"./regexRules-CPrFAOdY.js";import{d as pe}from"./CancelTwoTone-g9I4gqmS.js";import{d as ue}from"./AddAPhoto-D4lISSRu.js";import{A as L}from"./apiErrorResonse-CCtXlH33.js";import{P as J}from"./Popover-_oog1cCQ.js";import{B as V}from"./Box-B1asL3_Y.js";import{T as Z}from"./Typography-BvK0EBjx.js";import{A as fe}from"./Avatar-CkCB1SYh.js";import{T as U}from"./Tooltip-BPIgMGiH.js";import{F as H}from"./FormHelperText-D8o68a4M.js";import{S as W}from"./Stack-yqW3PSS6.js";import{T as he}from"./TextField-Dv9saPdb.js";import{L as xe}from"./LoadingButton-D3WD33Li.js";import{B as ge}from"./Box-DzmxXICY.js";import{C as je}from"./Card-Cg269qA4.js";import{I as ye}from"./IconButton-BS36y1hM.js";import{a as Q}from"./colorManipulator-C6WsgVx8.js";const Ee=ce().shape({name:de().required(`${q.NAME.REQUIRED}`).max(30,`${q.NAME.MAX_LENGTH}`),icon:me().test("fileSize","Icon's size cannot be more than 5 MB",(n,c)=>{var i;const{preSelectedImage:t}=c.options.context;return t||n.length===0?!0:((i=n[0])==null?void 0:i.size)<=5242880}).test("fileType","Only *.jpeg, *.jpg, *.png types are allowed.",(n,c)=>{var i;const{preSelectedImage:t}=c.options.context;return t||n.length===0?!0:["image/jpeg","image/png","image/jpg"].includes((i=n[0])==null?void 0:i.type)})}),Te=({openEditModal:n,setOpenEditModal:c,categoryData:t,categoryListCallBack:i})=>{const f=z(s=>s.customization),w=D.useRef(null),{loader:S,message:P,messageType:I}=z(s=>s.request),h=K(),[B,x]=j.useState(!1),[p,b]=j.useState(null),[o,y]=j.useState(null),{register:u,setValue:g,handleSubmit:O,trigger:E,formState:{errors:a}}=ae({mode:"all",resolver:le(Ee),context:{preSelectedImage:o}}),{onChange:C,..._}=u("icon"),F=()=>{x(!0)},M=()=>{S||x(!1)},r=async s=>{var A;(o===null||((A=s.icon)==null?void 0:A.length)===0)&&$.error("Icon is required");let l=new FormData;const v={name:s.name};Object.keys(v).forEach(function(d){l.append(d,v[d])}),o?l.append("icon",o):l.append("icon",s.icon[0]);try{h({type:m.PROCESSING});const{status:d,data:{message:N}}=await te(`${X.UPDATE}/${t==null?void 0:t.id}`,l);d===Y[200]?(h({type:m.SUCCESS,payload:{message:N}}),$.success(N),c(!1),i()):(h({type:m.FAILURE,payload:{message:L()}}),$.error(N))}catch(d){h({type:m.FAILURE,payload:{message:L(d)}})}};return j.useEffect(()=>{t&&(g("name",t==null?void 0:t.name),g("icon",t==null?void 0:t.icon),y(t==null?void 0:t.icon))},[t,g]),e.jsx(e.Fragment,{children:e.jsx(J,{open:n,anchorEl:w.current,onClose:()=>{c(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs(V,{sx:{padding:2,width:300,background:f.navType==="dark"?"#103C65":"#fff"},children:[e.jsxs(V,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Z,{variant:"h4",gutterBottom:!0,pb:4,children:"Edit template gallery category"}),e.jsx(k,{sx:{cursor:"pointer"},onClick:()=>c(!1),icon:"maki:cross",width:20,height:20})]}),e.jsxs(R,{container:!0,spacing:2,mb:3,children:[e.jsxs(R,{item:!0,md:12,children:[e.jsxs(R,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",position:"relative",sx:{marginTop:"20px"},children:[e.jsxs("div",{onMouseEnter:F,onMouseLeave:M,children:[e.jsx(fe,{alt:"",sx:{width:120,height:120,border:`2px dashed ${a.icon?"#ff4842":"#20a2b8"}`,color:`${a.icon?"#ff4842":"#fff"}`,background:"#20a2b896"},color:"danger",src:o||p&&URL.createObjectURL(p)}),o||p!=null?e.jsx(U,{placement:"top",title:"Click to remove icon",children:e.jsx(pe,{sx:{color:ee.ERROR_MSG_COLOR,background:"#fff",borderRadius:"50%",position:"absolute",top:0,left:"55%",cursor:"pointer",fontSize:"18px"},onClick:()=>{b(null),y(null),x(!1),C({target:{name:"icon",value:[]}}),E("icon")}})}):"",!o&&!p&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx("label",{className:"uploadFileInput",htmlFor:"uploadFileInput",children:e.jsx(ue,{color:"#fff"})})}),e.jsx("input",{..._,type:"file",id:"uploadFileInput",accept:"image/*",name:"icon",onChange:s=>{b(s.target.files[0]),C(s),E("icon")},style:{display:"none"}})]}),a.icon&&e.jsx(H,{sx:{my:2,px:5,textAlign:"center"},error:!0,children:a.icon.message})]}),e.jsx(W,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",width:"100%",mb:2,style:{textAlign:"center"},children:e.jsx(H,{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",color:f.navType==="dark"?"#fff":"#000"},children:"Click to upload icon"})})]}),e.jsx(R,{item:!0,md:12,children:e.jsxs("form",{onSubmit:O(r),noValidate:!0,children:[e.jsx(he,{...u("name"),label:"Name*",error:!!a.name,helperText:a.name?a.name.message:"",variant:"outlined",fullWidth:!0}),e.jsx(W,{direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:e.jsx(xe,{loading:!!S,size:"medium",type:"submit",loadingPosition:"end",variant:"contained",children:S?"PLEASE WAIT...":"UPDATE"})})]})})]})]})})})},Se=ne("div")(({theme:n})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:n.spacing(8),height:n.spacing(8),justifyContent:"center",marginBottom:n.spacing(3)}));Ie.propTypes={color:T.string,icon:T.string,title:T.string.isRequired,path:T.string.isRequired,sx:T.object};function Ie({isLoading:n,path:c,title:t,icon:i,color:f="primary",sx:w,handleOpenMenu:S,handlePopoverOpen:P,handlePopoverClose:I,id:h,hoveredUserId:B,anchorEl:x,categoryListCallBack:p,setDeleteModal:b,...o}){const y=se(),u=K(),g=z(r=>r.customization),[O,E]=j.useState(!1),[a,C]=j.useState(""),_=!!x;if(n&&n!==void 0)return e.jsx(ie,{});async function F(r){u({type:m.INIT_LOADER,payload:{loader:!0}});let s;try{const l=await oe(r),{status:v}=l,{data:{productDetails:A},success:d}=l.data;d&&v===Y[200]?(C(A),u({type:m.INIT_LOADER,payload:{loader:!1}})):u({type:m.FAILURE,payload:{message:L()}})}catch(l){s=L(l),u({type:m.FAILURE,payload:{message:s}})}}const M=()=>{E(!0),F(`${X.GET_TEMPLATE}/${B}`)};return e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"web-content-card",children:e.jsxs(je,{sx:{py:5,boxShadow:1,textAlign:"center",background:g.navType==="dark"?"#0e1522":y.palette.primary.light,...w},...o,children:[e.jsx(ye,{className:"card_menu_icon",onClick:r=>P(r,h),children:e.jsx(k,{icon:"eva:more-vertical-outline",width:24,height:24})}),e.jsx(J,{open:_,anchorEl:x,onClose:I,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},sx:{boxShadow:8},children:e.jsxs("div",{className:"product_menu_item",children:[e.jsx(G,{onClick:()=>{M(),I()},variant:"contained",color:"primary",children:e.jsx(U,{title:"Edit",arrow:!0,placement:"right",children:e.jsx(k,{icon:"eva:edit-outline",sx:{color:"rgba(0, 0, 0, 0.54)"}})})}),e.jsx(G,{onClick:()=>{b(!0),I()},variant:"contained",color:"success",style:{paddingTop:"5px"},children:e.jsx(U,{title:"Delete",arrow:!0,placement:"right",children:e.jsx(k,{icon:"eva:trash-2-outline",sx:{color:"rgb(189 51 51)"}})})})]})}),e.jsxs(re,{style:{textDecoration:"none"},to:"#",state:{name:t},children:[e.jsx(Se,{sx:{color:r=>r.palette[f].dark,backgroundImage:r=>`linear-gradient(135deg, ${Q(r.palette[f].dark,0)} 0%, ${Q(r.palette[f].dark,.24)} 100%)`},children:e.jsx("img",{src:i,alt:"icon"})}),e.jsx(Z,{variant:"h5",sx:{color:g.navType==="dark"?y.palette.primary.light:"#0e1522"},children:t})]})]})}),e.jsx(Te,{openEditModal:O,setOpenEditModal:E,categoryData:a,categoryListCallBack:p})]})}export{Ie as W};
