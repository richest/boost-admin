import{P as n,s as ge,u as he,b as ee,j as e,a as Ee,r as s,f as Se,Q as ye,G as m,L as v,R as y,V as r,Y as xe,a7 as J,d as N,a4 as x,N as fe,$ as Te,g as Pe,p as _e,a8 as Re,D as Ce}from"./index-Bb4T6yJS.js";import{P as Ae}from"./breadcrumbs-BoNbTSIP.js";import{P as je}from"./container-Mdzkb4R0.js";import{A as Oe}from"./helmet-BKDsicQe.js";import{d as Ie}from"./ReplyAll-BO-qW86R.js";import"./Scrollbar-D2VArou7.js";import{A as g}from"./apiErrorResonse-CCtXlH33.js";import{U as R}from"./paginations-D9J1AZ49.js";import{u as Le}from"./textDebounce-D7e2mMPI.js";import{A as be}from"./index-D3fnKi1d.js";import{I as De}from"./Iconify-B2ea3Vhk.js";import{S as Ue}from"./SkeltonCardLoader-BFqZXtrl.js";import{B as te}from"./Button-CoPqx7My.js";import{C as ve}from"./Card-Cg269qA4.js";import{T as Ne}from"./Typography-BvK0EBjx.js";import{a as Z}from"./colorManipulator-C6WsgVx8.js";import{S as we}from"./Stack-yqW3PSS6.js";import{P as $e}from"./Pagination-BX3HLmip.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./styled-BzESMtjz.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./throttle-tVVNkgM1.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./DeleteOutlineRounded-whF8ow73.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./useMediaQuery-B2-mEylA.js";import"./LoadingButton-D3WD33Li.js";import"./iconify-C-ngdJty.js";import"./Skeleton-Cv9Q_VQE.js";import"./Avatar-CkCB1SYh.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./LastPage-BwPgK0Bl.js";n.oneOf(["asc","desc"]),n.string,n.number,n.array,n.number,n.func,n.func;const ke=ge("div")(({theme:i})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:i.spacing(8),height:i.spacing(8),justifyContent:"center",marginBottom:i.spacing(3)}));w.propTypes={color:n.string,icon:n.string,title:n.string.isRequired,path:n.string.isRequired,sx:n.object};function w({isLoading:i,path:a,title:C,icon:f,color:T="primary",sx:A,handleDelete:h,handleOpenMenu:se,handlePopoverOpen:d,handlePopoverClose:$,id:j,hoveredUserId:ae,anchorEl:k,handleCreateTemplate:O,...c}){const P=he(),I=ee(l=>l.customization);return i&&i!==void 0?e.jsx(Ue,{}):e.jsx(te,{style:{textDecoration:"none"},onClick:()=>O(j,C),className:"web-content-card w-100",sx:{width:"100%",display:"block"},children:e.jsxs(ve,{sx:{py:5,boxShadow:1,textAlign:"center",background:I.navType==="dark"?"#103C65":P.palette.primary.light,...A},className:"w-100",...c,children:[e.jsx(ke,{className:"product_card_icon",sx:{color:l=>l.palette[T].light,backgroundImage:l=>`linear-gradient(135deg, ${Z(l.palette[T].light,0)} 0%, ${Z(l.palette[T].light,.24)} 100%)`},children:f?e.jsx("img",{src:f,alt:"icon",className:"icon_products"}):e.jsx(De,{icon:"eva:more-vertical-outline",width:24,height:70})}),e.jsx(Ne,{variant:"h4",sx:{color:I.navType==="dark"?P.palette.primary.light:"#0e1522"},children:C})]})})}const Lt=()=>{const{user:i}=ee(t=>t.filterOptions),a=Ee(),[C,f]=s.useState(null),[T,A]=s.useState(null),[h,se]=s.useState(i.number_of_rows),[d,$]=s.useState(i.page_no),[j,ae]=s.useState(i.srNo),[k,O]=s.useState(0),[c,P]=s.useState([]),[I,l]=s.useState(!1),[Fe,F]=s.useState(!1),[Me,M]=s.useState(""),[L,Be]=s.useState(i.role_id),[_,b]=s.useState(null),[Ge,oe]=s.useState({}),[B,He]=s.useState(""),[re,qe]=Le(),[G,D]=s.useState(!1);s.useState(!1);const ne=Se(),[H,q]=s.useState(null),Y=(t,o)=>{q(t.currentTarget),b(o)},z=()=>{q(null)},K=t=>{const o=c.find(E=>E.id===t);b(t),oe(o)},Q=t=>{D(t)},U=()=>{f(null),A(null),b(null)},ie=(t,o)=>{$(o)},ce=async()=>{try{a({type:r.PROCESSING});const{status:t,data:{message:o}}=await xe(`${J.DELETE}/${_}`);t===N[200]?(a({type:r.SUCCESS,payload:{message:o}}),x.success("Product deleted successfull."),V()):a({type:r.FAILURE,payload:{message:g()}}),U(),Q(!1)}catch(t){a({type:r.FAILURE,payload:{message:g(t)}}),x.error(`${t.response.data.message}`),U(),Q(!1)}},V=()=>{const t=d===0?1:d,o=L||"";le(`${J.LIST}?${R.PAGE_NO.KEY}=${t}&${R.ROWS_PER_PAGE.KEY}=${h}&${R.ROLE_ID.KEY}=${o}&${R.SEARCH_TEXT.KEY}=${B}`,d,o)};async function le(t,o,E){l(!0),a({type:r.INIT_LOADER,payload:{loader:!0}});let p;const S=Ce.LOCALE;try{const u=await fe(t),{status:pe}=u,{data:{productsDetails:de,totalCounts:ue},success:me}=u.data;me&&pe===N[200]?(P(de.rows),l(!1),F(!1),O(ue),a({type:r.INIT_LOADER,payload:{loader:!1}}),a({type:Te.USERS,payload:{key:"user",value:{role_id:E,page_no:o,number_of_rows:h,search_text:B,srNo:j}}})):(M(Pe[S].FETCHING_USERS_LIST),a({type:r.FAILURE,payload:{message:g()}}))}catch(u){p=g(u),F(!0),M(p),l(!1),a({type:r.FAILURE,payload:{message:p}})}}const W=()=>{D(!0)},X=async(t,o)=>{const E={product_id:t,created_by_admin:1};try{a({type:r.PROCESSING});const{status:p,data:{message:S,data:{unique_id:u}}}=await _e(Re.CREATE,E);p===N[200]?(a({type:r.SUCCESS,payload:{message:S}}),x.success(S),ne(`/dashboard/templates/create/${u.replace(/[\s/]+/g,"-").toLowerCase()}`)):(a({type:r.FAILURE,payload:{message:g()}}),x.error(S))}catch(p){a({type:r.FAILURE,payload:{message:g(p)}}),x.error(p)}};return s.useEffect(()=>{V()},[d,h,L,re]),e.jsxs(e.Fragment,{children:[e.jsx(Oe,{title:ye.SELECT_PRODUCT}),e.jsxs(je,{className:"page-container users-page",heading:"Select Product",children:[e.jsxs(m,{container:!0,justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[e.jsx(m,{item:!0,children:e.jsx(Ae,{breadcrumbs:[e.jsx(v,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:y.DASHBOARD,children:"dashboard"}),e.jsx(v,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:y.TEMPLATE_LIST,children:"Templates"}),"Select Product"]})}),e.jsx(m,{item:!0,mr:1,children:e.jsx(v,{className:"",to:y.TEMPLATE_LIST,children:e.jsx(te,{sx:{borderRadius:"2pt"},variant:"contained",color:"primary",startIcon:e.jsx(Ie,{}),children:"Back"})})})]}),e.jsxs(m,{container:!0,spacing:3,sx:{pt:2},children:[c.map(t=>e.jsx(m,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(w,{path:y.HEADER_FOOTER,color:"primary",title:t.name,icon:t.icon,id:t==null?void 0:t.id,hoveredUserId:_,handleOpenMenu:K,handlePopoverOpen:Y,handlePopoverClose:z,handleDelete:W,anchorEl:H,handleCreateTemplate:X})})),(c==null?void 0:c.length)!==0&&e.jsx(m,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:e.jsx(w,{path:y.HEADER_FOOTER,color:"primary",title:"Blank Templates",icon:"https://res.cloudinary.com/dwl5gzbuz/image/upload/v1728477587/kcwg2ubpjio5xirltjvg.png",hoveredUserId:_,handleOpenMenu:K,handlePopoverOpen:Y,handlePopoverClose:z,handleDelete:W,anchorEl:H,handleCreateTemplate:X})})]}),(c==null?void 0:c.length)>0&&e.jsx(we,{spacing:3,sx:{mt:2},children:e.jsx($e,{style:{display:"flex",justifyContent:"center"},count:Math.ceil(k/h),page:d,onChange:ie,color:"primary",variant:"outlined",shape:"rounded"})})]}),G&&e.jsx(be,{cancelAction:U,deleteAction:ce,id:_,setIsOpen:D,isOpen:G})]})};export{Lt as default};
