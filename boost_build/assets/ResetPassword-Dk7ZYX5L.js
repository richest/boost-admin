import{r as o,e as M,f as N,j as e,L as E,D as F,p as G,c as W,d as U,R as k,g as B,H,A as V,G as s}from"./index-Bb4T6yJS.js";import{A as q,a as $}from"./AuthCardWrapper-DjHBGg-k.js";import{A as z}from"./new-logo-DR1RGENx.js";import{I as h}from"./Iconify-B2ea3Vhk.js";import{u as Q,o as Y}from"./yup-VhrNJgti.js";import{c as J,a as f,b as K}from"./index.esm-B55s2Mzk.js";import{a as X,V as j}from"./regexRules-CPrFAOdY.js";import{A as Z}from"./apiErrorResonse-CCtXlH33.js";import{B as t}from"./Box-DzmxXICY.js";import{A as g}from"./Alert-BwGk8Equ.js";import{T as w}from"./TextField-Dv9saPdb.js";import{I as S}from"./InputAdornment-_AAuA8Z-.js";import{I as A}from"./IconButton-BS36y1hM.js";import{L as ee}from"./LoadingButton-D3WD33Li.js";import{S as se}from"./Stack-yqW3PSS6.js";import{T as re}from"./Typography-BvK0EBjx.js";import"./MainCard-CmUxCtU6.js";import"./Card-Cg269qA4.js";import"./Divider-8oRsmKUf.js";import"./dividerClasses-B4fnud8L.js";import"./CardContent-Bzjt-mT4.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./iconify-C-ngdJty.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./ButtonBase-D0CLtmKS.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./useId-BQiMa7-Q.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./useSlotProps-CkCdCphK.js";import"./Grow-BLrRft-L.js";import"./List-BGusPRli.js";import"./useControlled-DpDQkWSS.js";import"./FormHelperText-D8o68a4M.js";import"./Button-CoPqx7My.js";import"./styled-BzESMtjz.js";const te=J().shape({password:f().required("Password is required").matches(X.PASSWORD,"Password must contain at least 8 characters, one uppercase letter, one lowercase letter, one number and one special character"),confirmPassword:f().required(j.CONFIRMED_PASSWORD.REQUIRED).oneOf([K("password")],j.CONFIRMED_PASSWORD.NOT_IDENTICAL)}),oe=()=>{const[a,P]=o.useState(!1),[c,y]=o.useState(!1),[m,i]=o.useState(!1),[p,d]=o.useState(""),[x,I]=o.useState(""),{token:R}=M(),C=N(),{register:u,handleSubmit:O,reset:v,formState:L}=Q({mode:"onTouched",resolver:Y(te)}),{errors:r}=L,T=async b=>{d(""),i(!0);try{const l=F.LOCALE,n=await G(W.RESET_PASSWORD,{password:b.password,token:R}),{status:D}=n,{success:_}=n.data;_&&D===U[200]?(i(!1),I("Your password has updated!"),v(),setTimeout(()=>{C(k.LOGIN)},2e3)):(d(B[l].ERROR_MESSAGE),i(!1))}catch(l){const n=Z(l);d(n),i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("form",{onSubmit:O(T),noValidate:!0,children:e.jsxs(t,{spacing:3,children:[p!==""?e.jsx(t,{sx:{width:"100%"},spacing:2,children:e.jsx(g,{sx:{px:2,py:0},variant:"outlined",severity:"error",children:e.jsx("strong",{children:p})})}):"",x!==""?e.jsx(t,{sx:{width:"100%"},spacing:2,children:e.jsx(g,{sx:{px:2,py:0},variant:"outlined",severity:"success",children:e.jsx("strong",{children:x})})}):e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx(w,{sx:{my:1,width:"100%"},...u("password"),name:"password",autoComplete:"true",label:"Password",type:a?"text":"password",error:!!r.password,helperText:r.password?r.password.message:"",InputProps:{endAdornment:e.jsx(S,{position:"end",children:e.jsx(A,{onClick:()=>P(!a),edge:"end",children:e.jsx(h,{icon:a?"eva:eye-fill":"eva:eye-off-fill"})})})}}),e.jsx(w,{sx:{my:1,width:"100%"},...u("confirmPassword"),type:c?"text":"password",name:"confirmPassword",autoComplete:"true",label:"Confirm password",error:!!r.confirmPassword,helperText:r.confirmPassword?r.confirmPassword.message:"",InputProps:{endAdornment:e.jsx(S,{position:"end",children:e.jsx(A,{onClick:()=>y(!c),edge:"end",children:e.jsx(h,{icon:c?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),e.jsx(t,{sx:{mt:2},children:e.jsx(ee,{fullWidth:!0,loading:!!m,disabled:m,size:"large",type:"submit",variant:"contained",color:"primary",children:m?"Please Wait...":"Submit"})})]})]})}),e.jsx(t,{align:"center",justifyContent:"space-between",sx:{my:1},children:e.jsx(E,{to:"/login",variant:"subtitle1",underline:"hover",align:"center",children:"Back to Log In"})})]})},qe=()=>e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsxs("title",{children:[" Reset-Password | ",V," "]})}),e.jsx(q,{children:e.jsx(s,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(s,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx($,{children:e.jsxs(s,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(s,{item:!0,sx:{mb:2},children:e.jsx(E,{to:"#","aria-label":"logo",children:e.jsx("img",{className:"mauto",width:"200",src:z,alt:"logo"})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:e.jsx(s,{item:!0,children:e.jsx(se,{alignItems:"center",justifyContent:"center",spacing:1,children:e.jsx(re,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your new password to continue"})})})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(oe,{})})]})})})})})})})]});export{qe as default};
