import{s as ge,P as x,u as he,b as Z,j as e,a6 as xe,L as T,a as Se,r as s,f as Ee,Q as fe,G as S,R,V as i,Y as ye,a8 as K,d as Q,a4 as V,N as Te,$ as je,g as _e,D as Ae}from"./index-Bb4T6yJS.js";import{P as Oe}from"./breadcrumbs-BoNbTSIP.js";import{P as Le}from"./container-Mdzkb4R0.js";import{A as Pe}from"./helmet-BKDsicQe.js";import{d as be}from"./Add-CMcxYLjt.js";import{A as y}from"./apiErrorResonse-CCtXlH33.js";import{C as W}from"./paginations-D9J1AZ49.js";import{u as Ce}from"./textDebounce-D7e2mMPI.js";import{A as Ie}from"./index-D3fnKi1d.js";import{I as v}from"./Iconify-B2ea3Vhk.js";import{S as Ne}from"./SkeltonCardLoader-BFqZXtrl.js";import{C as Re}from"./Card-Cg269qA4.js";import{I as ve}from"./IconButton-BS36y1hM.js";import{P as De}from"./Popover-_oog1cCQ.js";import{T as J}from"./Tooltip-BPIgMGiH.js";import{T as Ue}from"./Typography-BvK0EBjx.js";import{a as X}from"./colorManipulator-C6WsgVx8.js";/* empty css              */import"./confetti.module-CQHQ3kM5.js";import{B as we}from"./Button-CoPqx7My.js";import"./Stack-yqW3PSS6.js";import"./styled-BzESMtjz.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./DeleteOutlineRounded-whF8ow73.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./useMediaQuery-B2-mEylA.js";import"./LoadingButton-D3WD33Li.js";import"./iconify-C-ngdJty.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./Skeleton-Cv9Q_VQE.js";import"./Avatar-CkCB1SYh.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./Grow-BLrRft-L.js";import"./Popper-BrZsYCFQ.js";const Fe=ge("div")(({theme:a})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:a.spacing(8),height:a.spacing(8),justifyContent:"center",marginBottom:a.spacing(3)}));ee.propTypes={color:x.string,icon:x.string,title:x.string.isRequired,path:x.string.isRequired,sx:x.object};function ee({isLoading:a,path:r,title:D,icon:U,data:c,color:p="primary",sx:m,handleDelete:w,handleOpenMenu:F,handlePopoverOpen:j,handlePopoverClose:E,id:d,uniqueId:u,anchorEl:_,...M}){const g=he(),l=Z(n=>n.customization),A=!!_[d];return a&&a!==void 0?e.jsx(Ne,{}):(console.log(c==null?void 0:c.preview_image,"ododduiowud"),e.jsx(xe,{style:{textDecoration:"none"},to:"#",className:"web-content-card",children:e.jsxs(Re,{sx:{py:5,boxShadow:1,textAlign:"center",background:l.navType==="dark"?"#103C65":g.palette.primary.light,...m},...M,children:[e.jsx(ve,{onClick:n=>j(n,d),sx:{position:"absolute",top:0,right:0},children:e.jsx(v,{icon:"eva:more-vertical-outline",width:24,height:24})}),e.jsx(De,{open:A,anchorEl:_[d],onClose:()=>E(d),anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:e.jsxs("div",{className:"product_menu_item",style:{padding:g.spacing(2)},children:[e.jsx(T,{to:`/dashboard/templates/create/${u==null?void 0:u.replace(/[\s/]+/g,"-").toLowerCase()}`,variant:"contained",color:"primary",children:e.jsx(J,{title:"Edit",arrow:!0,placement:"right",children:e.jsx(v,{icon:"eva:edit-outline",sx:{color:"rgba(0, 0, 0, 0.54)"}})})}),e.jsx(T,{onClick:w,variant:"contained",color:"success",sx:{mt:1},children:e.jsx(J,{title:"Delete",arrow:!0,placement:"right",children:e.jsx(v,{icon:"eva:trash-2-outline",sx:{color:"rgb(189 51 51)"}})})})]})}),e.jsx(Fe,{sx:{color:n=>n.palette[p].light,backgroundImage:n=>`linear-gradient(135deg, ${X(n.palette[p].light,0)} 0%, ${X(n.palette[p].light,.24)} 100%)`},children:e.jsx("img",{src:(c==null?void 0:c.preview_image)||"https://res.cloudinary.com/dwl5gzbuz/image/upload/v1738148606/project-thumb_laxubz.png",alt:"icon",style:{borderRadius:50,objectFit:"cover"},className:"icon_products"})}),e.jsx(Ue,{variant:"h4",sx:{color:l.navType==="dark"?g.palette.primary.light:"#0e1522"},children:D})]})}))}const Rt=()=>{const{user:a}=Z(t=>t.filterOptions),r=Se(),[D,U]=s.useState(null),[c,p]=s.useState(null);s.useState("asc"),s.useState([]),s.useState("name");const[m,w]=s.useState(a.number_of_rows),[F,j]=s.useState({}),[E,d]=s.useState(a.page_no),[u,_]=s.useState(a.srNo),[M,g]=s.useState(0),[l,A]=s.useState([]),[n,O]=s.useState(!1),[Me,$]=s.useState(!1),[$e,k]=s.useState(""),[L,ke]=s.useState(a.role_id),[G,P]=s.useState(null),[Ge,te]=s.useState({}),[se,Be]=s.useState(""),[oe,ze]=Ce(),[B,b]=s.useState(!1);s.useState(!1),Ee();const[z,H]=s.useState({}),ae=(t,o)=>{H(h=>({...h,[o]:t.currentTarget})),P(o)},re=t=>{H(o=>({...o,[t]:null}))};console.log("anchoel",z);const ne=t=>{const o=l.find(h=>h.id===t);P(t),te(o)},Y=t=>{b(t)},C=()=>{U(null),p(null),P(null)},ie=async()=>{try{r({type:i.PROCESSING});const{status:t,data:{message:o}}=await ye(`${K.DELETE}/${G}`);t===Q[200]?(r({type:i.SUCCESS,payload:{message:o}}),V.success(o),q()):r({type:i.FAILURE,payload:{message:y()}}),C(),Y(!1)}catch(t){r({type:i.FAILURE,payload:{message:y(t)}}),V.error(`${t.response.data.message}`),C(),Y(!1)}},q=()=>{const o=L||"";ce(`${K.LIST}?${W.PAGE_NO.KEY}=1&${W.ROWS_PER_PAGE.KEY}=${m}`,E,o)};async function ce(t,o,h){O(!0),r({type:i.INIT_LOADER,payload:{loader:!0}});let I;const pe=Ae.LOCALE;try{const f=await Te(t),{status:me}=f,{data:{templateDetails:N,totalCounts:de},success:ue}=f.data;ue&&me===Q[200]?(A(N.rows),j(N),console.log(N,"templateDetails"),O(!1),$(!1),g(de),r({type:i.INIT_LOADER,payload:{loader:!1}}),r({type:je.USERS,payload:{key:"user",value:{role_id:h,page_no:o,number_of_rows:m,search_text:se,srNo:u}}})):(k(_e[pe].FETCHING_USERS_LIST),r({type:i.FAILURE,payload:{message:y()}}))}catch(f){I=y(f),$(!0),k(I),O(!1),r({type:i.FAILURE,payload:{message:I}})}}const le=()=>{b(!0)};return s.useEffect(()=>{q()},[E,m,L,oe]),e.jsxs(e.Fragment,{children:[e.jsx(Pe,{title:fe.TEMPLATES}),e.jsxs(Le,{className:"page-container users-page",heading:"Templates",children:[e.jsxs(S,{container:!0,justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[e.jsx(S,{item:!0,children:e.jsx(Oe,{breadcrumbs:[e.jsx(T,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:R.DASHBOARD,children:"dashboard"}),"Templates"]})}),e.jsx(S,{item:!0,mr:1,children:e.jsx(T,{className:"",to:R.SELECT_PRODUCT,children:e.jsx(we,{sx:{borderRadius:"2pt"},variant:"contained",color:"primary",startIcon:e.jsx(be,{}),children:"NEW TEMPLATE"})})})]}),e.jsxs(S,{container:!0,spacing:3,sx:{pt:2},children:[!l.length&&e.jsx("p",{className:"text-center",children:"No Template Found"}),l.map(t=>e.jsx(S,{item:!0,xs:12,sm:6,md:2,children:e.jsx(ee,{TemplateImages:F,data:t,path:R.HEADER_FOOTER,color:"primary",title:t.name,icon:t.icon,id:t.id,uniqueId:t==null?void 0:t.unique_id,handleOpenMenu:ne,handlePopoverOpen:ae,handlePopoverClose:re,handleDelete:le,anchorEl:z})},t.id))]})]}),B&&e.jsx(Ie,{cancelAction:C,deleteAction:ie,id:G,setIsOpen:b,isOpen:B})]})};export{Rt as default};
