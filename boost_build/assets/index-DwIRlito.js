import{P as f,b as k,j as e,K as Te,a as Pe,r as n,Q as N,L as Ae,R as Re,G as h,V as x,a3 as we,aY as B,d as F,a4 as H,Y as Ie,N as ve,g as Ne,D as Oe}from"./index-Bb4T6yJS.js";import{P as Le}from"./breadcrumbs-BoNbTSIP.js";import{P as ke}from"./container-Mdzkb4R0.js";import{A as De}from"./helmet-BKDsicQe.js";import{S as $e}from"./Scrollbar-D2VArou7.js";import{T as Ue,a as Q,b as p,c as qe,E as G,C as Me,d as Be,e as Fe,S as He,f as Ge}from"./tableHeadings-FRSZ0z2m.js";import{u as Ye}from"./textDebounce-D7e2mMPI.js";import{C as O}from"./paginations-D9J1AZ49.js";import{A as w}from"./apiErrorResonse-CCtXlH33.js";import{A as Qe}from"./antSwitch-BKUKAnS9.js";import{w as We,d as Ke,a as Ve,b as Xe,c as Je,e as Ze}from"./AccessTimeFilled-BLM_-o--.js";import{C as ze}from"./index-Cn4t3Ues.js";import{I as ee}from"./Iconify-B2ea3Vhk.js";import{d as es,a as ss,b as ts}from"./Subject-Be8RYNxK.js";import{d as rs,T as as}from"./DeleteRounded-BlGDnV9A.js";import{d as ns}from"./Search-fSuCmzN-.js";import{F as os,O as is}from"./Select-D_KZ1HKa.js";import{I as z}from"./InputAdornment-_AAuA8Z-.js";import{B as W}from"./Button-CoPqx7My.js";import ls from"./SkeltonLoader-DM_yfHIA.js";import cs from"./dataNotFound-Dm4Vz_hx.js";import{L as Y}from"./Label-BSVDv_JV.js";import{T as l}from"./Typography-BvK0EBjx.js";import{I as ds}from"./IconButton-BS36y1hM.js";import{C as ms}from"./Card-Cg269qA4.js";import{P as us}from"./Popover-_oog1cCQ.js";import{M as ps}from"./MenuItem-Ym5Ln7NP.js";import{B as L}from"./Box-DzmxXICY.js";import{D as hs}from"./Divider-8oRsmKUf.js";import{S as u}from"./Stack-yqW3PSS6.js";import{F as xs}from"./FormHelperText-D8o68a4M.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./styled-BzESMtjz.js";import"./throttle-tVVNkgM1.js";import"./colorManipulator-C6WsgVx8.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./Switch-Dc5i2Mqq.js";import"./SwitchBase-B0q5c7pV.js";import"./useFormControl-oNyqkk4W.js";import"./index-D8g0v2aH.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./iconify-C-ngdJty.js";import"./KeyboardArrowRight--EGT-K8b.js";import"./LastPage-BwPgK0Bl.js";import"./Toolbar-BiSrIOBH.js";import"./List-BGusPRli.js";import"./Skeleton-Cv9Q_VQE.js";import"./Grow-BLrRft-L.js";import"./dividerClasses-B4fnud8L.js";import"./listItemTextClasses-Kx3W7iDp.js";import"./listItemIconClasses-CKdqSC5K.js";se.propTypes={order:f.oneOf(["asc","desc"]),orderBy:f.string,rowCount:f.number,headLabel:f.array,numSelected:f.number,onRequestSort:f.func,onSelectAllClick:f.func};function se({order:s,orderBy:d,rowCount:P,headLabel:i,numSelected:y,onRequestSort:E,onSelectAllClick:b,handleSerchInputChange:A,searchText:C,handleClearSearchInput:g}){const m=k(o=>o.customization);return e.jsxs(Ue,{children:[e.jsx(Q,{children:e.jsx(p,{component:"td",colSpan:10,sx:{p:1},children:e.jsx(os,{fullWidth:!0,variant:"outlined",children:e.jsx(is,{onChange:A,value:C,sx:{maxHeight:"40px"},className:(m==null?void 0:m.navType)==="dark"?"dark_tableHead":"",placeholder:"Search name or email...",id:"outlined-adornment-weight",startAdornment:e.jsx(z,{position:"start",children:e.jsx(ns,{})}),endAdornment:C.length>0?e.jsx(z,{position:"end",children:e.jsx(W,{onClick:g,sx:{color:Te.ERROR_MSG_COLOR},startIcon:e.jsx(rs,{}),children:"clear"})}):!1,"aria-describedby":"outlined-weight-helper-text",inputProps:{"aria-label":"weight"}})})})}),e.jsx(Q,{children:i.map(o=>e.jsx(p,{align:o.align,sortDirection:d===o.id?s:!1,sx:{py:1.5,textTransform:o.textTransform},children:e.jsx(qe,{hideSortIcon:!0,children:o.label})},o.id))},"user-table-heading-row")]})}function gs(s){var P,i,y;const d=k(E=>E.customization);return s.loading?e.jsx(ls,{colSpan:G.length+1,rows:5,columns:6,loaderMessage:"Please wait..."}):s.connectionError?e.jsx(Me,{colspan:G.length+1,message:s.errorMessage}):((P=s==null?void 0:s.enqueryList)==null?void 0:P.length)===0?e.jsx(cs,{colspan:G.length+1,message:"No support enquery found."}):e.jsx(e.Fragment,{children:(y=(i=s==null?void 0:s.enqueryList)==null?void 0:i.rows)==null?void 0:y.map((E,b)=>{const{id:A,user_id:C,fullname:g,email:m,description:o,subject:_,status:j,file_link:D,type:I}=E,T={fullname:g,email:m,subject:_,description:o,status:j,file_link:D,type:I,id:A};return s.selected.indexOf(g),e.jsxs(Q,{className:(d==null?void 0:d.navType)==="dark"?"dark_tableRow":"",children:[e.jsx(p,{children:`${s.srNo+b}.`}),e.jsx(p,{component:"td",scope:"row",children:e.jsx(l,{variant:"span",className:"user-name",noWrap:!0,children:`${g||""}`})}),e.jsx(p,{component:"td",children:e.jsx(l,{variant:"span",noWrap:!0,children:m})}),e.jsx(p,{className:"",align:"left",children:`${_}`}),e.jsxs(p,{className:"",align:"left",children:[j===1&&e.jsx(Y,{color:"warning",children:"Pending"}),j===2&&e.jsx(Y,{color:"success",children:"Resolved"}),j===3&&e.jsx(Y,{color:"error",children:"Deleted"})]}),e.jsx(p,{className:"enquiry-message",align:"left",sx:{textAlign:"left"},children:e.jsx(l,{variant:"body",children:o?We(o):"NA"})}),e.jsx(p,{align:"right",children:e.jsx(ds,{component:"label",size:"medium",color:"inherit",onClick:()=>s.handleActionDialog(!0,T),children:e.jsx(ee,{icon:"carbon:view-filled"})})})]},b)})})}function Et(){const s=k(t=>t.customization),{contact_us:d}=k(t=>t.filterOptions);let P=[];const i=Pe(),[y,E]=n.useState(null),[b,A]=n.useState("asc"),[C,g]=n.useState("name"),[m,o]=n.useState([]),[_,j]=n.useState(d.page_no),[D,I]=n.useState(d.srNo),[T,te]=n.useState(d.number_of_rows),[K,re]=n.useState(""),[ae,ne]=Ye(),[oe,ie]=n.useState(0),[$,U]=n.useState(!1),[le,V]=n.useState(!1),[ce,X]=n.useState(""),[de,me]=n.useState([]),[ue,R]=n.useState(!1),[a,pe]=n.useState(""),[J,he]=n.useState((a==null?void 0:a.status)!==1),xe=(t,r)=>{A(C===r&&b==="asc"?"desc":"asc"),g(r)},ge=t=>{if(t.target.checked){const r=P.map(c=>c.name);o(r);return}o([])},Z=t=>{const r=t.target.value===void 0?"":t.target.value;re(r),ne(r)},je=(t,r)=>{j(r),I(T*r+1)},Se=t=>{j(0),te(parseInt(t.target.value,10)),I(1)},q=(t,r="")=>{R(t),pe(r)},v=()=>{E(null)},fe=async()=>{const t=J?1:2,r={fullname:a.fullname,email:a.email,subject:a.subject,type:a.type,description:a.description,file_link:a.file_link,status:t};try{i({type:x.PROCESSING});const{status:c,data:{message:S}}=await we(`${B.UPDATE}/${a.id}`,r);c===F[200]?(i({type:x.SUCCESS,payload:{message:S}}),H.success(S),R(!1),M()):i({type:x.FAILURE,payload:{message:w()}}),window.scrollTo(0,0)}catch(c){i({type:x.FAILURE,payload:{message:w(c)}})}},ye=async t=>{try{i({type:x.PROCESSING});const{status:r,data:{message:c}}=await Ie(`${B.DELETE}/${t}`);r===F[200]?(i({type:x.SUCCESS,payload:{message:c}}),H.success(c),R(!1),M()):i({type:x.FAILURE,payload:{message:w()}}),v(),q(!1)}catch(r){i({type:x.FAILURE,payload:{message:w(r)}}),H.error(`${r.response.data.message}`),v(),q(!1)}};async function M(){const t=_+1;U(!0);let r;const c=Oe.LOCALE;try{const S=await ve(`${B.LIST}?${O.PAGE_NO.KEY}=${t}&${O.ROWS_PER_PAGE.KEY}=${T}&${O.SEARCH_TEXT.KEY}=${K}`),{status:Ee}=S,{data:{contactInquires:be,totalCounts:Ce},success:_e}=S.data;_e&&Ee===F[200]?(me(be),U(!1),V(!1),ie(Ce)):X(Ne[c].FETCHING_USERS_LIST)}catch(S){r=w(S),V(!0),X(r),U(!1)}}return n.useEffect(()=>{M()},[_,T,ae]),e.jsxs(e.Fragment,{children:[e.jsx(De,{title:N.SUBSCRIPTION}),e.jsxs(ke,{className:"page-container users-page",heading:N.SUPPORT,children:[e.jsx(Le,{breadcrumbs:[e.jsx(Ae,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:Re.DASHBOARD,children:N.DASHBOARD}),N.SUBSCRIPTION]}),e.jsx(ms,{sx:{mt:4,boxShadow:3},className:(s==null?void 0:s.navType)==="dark"?"dark_card":"",children:e.jsxs($e,{children:[e.jsx(Be,{children:e.jsxs(Fe,{className:"list-table",children:[e.jsx(se,{order:b,orderBy:C,headLabel:He,rowCount:0,numSelected:m.length,onRequestSort:xe,onSelectAllClick:ge,handleSerchInputChange:Z,searchText:K,handleClearSearchInput:Z}),e.jsx(Ge,{children:e.jsx(gs,{loading:$,connectionError:le,errorMessage:ce,enqueryList:de,selected:m,handleActionDialog:q,srNo:D})})]})}),e.jsx(as,{rowsPerPageOptions:O.ROWS_PER_PAGE_OPTIONS,component:"div",className:(s==null?void 0:s.navType)==="dark"?"dark_pagination":"",count:oe,rowsPerPage:T,page:_,onPageChange:je,onRowsPerPageChange:Se})]})})]}),e.jsx(us,{open:!!y,anchorEl:y,onClose:v,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{p:1,width:140,"& .MuiMenuItem-root":{px:1,typography:"body2",borderRadius:.75}}},children:e.jsxs(ps,{children:[e.jsx(ee,{icon:"material-symbols:supervised-user-circle",sx:{mr:2}}),"View"]})}),ue&&e.jsx(ze,{open:R,handleClose:v,children:e.jsxs(L,{sx:{p:5},className:(s==null?void 0:s.navType)==="dark"?"dark_Modal":"",children:[e.jsx(l,{variant:"h4",color:"primary",align:"center",sx:{mb:2},children:"Details"}),e.jsx(hs,{sx:{mb:3}}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Ke,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Name:"})," ",a.fullname]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Ve,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Email:"})," ",a.email]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(es,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Subject:"})," ",a.subject]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(ss,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Type:"})," ",a.type]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[a.status===1?e.jsx(Xe,{color:"warning"}):e.jsx(Je,{color:"success"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Status:"})," ",a.status===1?"Pending":"Solved"]})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Ze,{color:"primary"}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Description:"})," ",a.description]})]})}),a.file_link&&e.jsxs(h,{item:!0,xs:12,children:[e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(ts,{color:"primary"}),e.jsx(l,{variant:"body1",children:e.jsx("strong",{children:"Media:"})})]}),e.jsx(L,{height:200,width:200,children:e.jsx("img",{style:{height:"100%",width:"100%",objectFit:"cover"},src:a.file_link,alt:"media"})})]})]}),e.jsxs(u,{direction:"row",justifyContent:"end",alignItems:"center",my:2,children:[e.jsxs(L,{className:(s==null?void 0:s.navType)==="dark"?"dark_status":"",children:[e.jsx(l,{variant:"h5",children:"Change Status"}),e.jsx(xs,{children:"Pending to Solved and vice versa"})]}),e.jsx(L,{px:2,children:e.jsx(Qe,{onChange:t=>{he(t.target.checked),fe()},checked:J,sx:{variant:"success"}})})]}),e.jsxs(u,{direction:"row",justifyContent:"end",spacing:2,children:[e.jsx(W,{disabled:$,variant:"outlined",color:"error",onClick:()=>ye(a.id),children:"Delete"}),e.jsx(W,{disabled:$,variant:"outlined",onClick:()=>R(!1),children:"Close"})]})]})})]})}export{Et as default};
