import{E as Ye,j as e,P as f,r as a,b as j,X as Qe,K as z,u as de,a as Xe,f as Ze,Q as Je,G as B,L as ae,R as ne,V as p,Y as es,U as H,d as q,Z as ss,N as ts,$ as os,g as rs,D as as}from"./index-Bb4T6yJS.js";import{P as ns}from"./breadcrumbs-BoNbTSIP.js";import{P as is}from"./container-Mdzkb4R0.js";import{A as ls}from"./helmet-BKDsicQe.js";import{r as cs}from"./createSvgIcon-Cvxe-UMk.js";import{T as ds}from"./textErrorMessage-CWeXfsj3.js";import{S as us}from"./Scrollbar-D2VArou7.js";import{d as ms,T as ps}from"./DeleteRounded-BlGDnV9A.js";import{d as hs}from"./Search-fSuCmzN-.js";import{T as xs,a as W,b as g,c as gs,g as P,C as Ss,d as fs,e as js,f as Es}from"./tableHeadings-FRSZ0z2m.js";import{F as ys,O as As}from"./Select-D_KZ1HKa.js";import{I as ie}from"./InputAdornment-_AAuA8Z-.js";import{B as N}from"./Button-CoPqx7My.js";import{A as C}from"./apiErrorResonse-CCtXlH33.js";import{U as I}from"./paginations-D9J1AZ49.js";import{u as Cs}from"./textDebounce-D7e2mMPI.js";import{d as vs,a as Rs}from"./WatchLaterTwoTone-Un0YEEeT.js";import{I as T}from"./Iconify-B2ea3Vhk.js";import{L as Ts}from"./Label-BSVDv_JV.js";import bs from"./SkeltonLoader-DM_yfHIA.js";import Us from"./dataNotFound-Dm4Vz_hx.js";import{T as le}from"./Typography-BvK0EBjx.js";import{I as Ls}from"./IconButton-BS36y1hM.js";import{D as ue,a as me,b as pe,c as he,d as xe,e as Os}from"./DeleteOutlineRounded-whF8ow73.js";import{u as ge}from"./useMediaQuery-B2-mEylA.js";import{S as Se}from"./Stack-yqW3PSS6.js";import{L as fe}from"./LoadingButton-D3WD33Li.js";import{C as Is}from"./Card-Cg269qA4.js";import{P as Ps}from"./Popover-_oog1cCQ.js";import{M as ce}from"./MenuItem-Ym5Ln7NP.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./styled-BzESMtjz.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./Alert-BwGk8Equ.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./throttle-tVVNkgM1.js";import"./colorManipulator-C6WsgVx8.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./KeyboardArrowRight--EGT-K8b.js";import"./LastPage-BwPgK0Bl.js";import"./Toolbar-BiSrIOBH.js";import"./useFormControl-oNyqkk4W.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./List-BGusPRli.js";import"./iconify-C-ngdJty.js";import"./Skeleton-Cv9Q_VQE.js";import"./Grow-BLrRft-L.js";import"./dividerClasses-B4fnud8L.js";import"./listItemTextClasses-Kx3W7iDp.js";import"./listItemIconClasses-CKdqSC5K.js";var V={},Ns=Ye;Object.defineProperty(V,"__esModule",{value:!0});var je=V.default=void 0,_s=Ns(cs()),Ds=e;je=V.default=(0,_s.default)((0,Ds.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");Ee.propTypes={order:f.oneOf(["asc","desc"]),orderBy:f.string,rowCount:f.number,headLabel:f.array,numSelected:f.number,onRequestSort:f.func,onSelectAllClick:f.func};function Ee({order:n,orderBy:i,rowCount:t,headLabel:c,numSelected:d,onRequestSort:E,onSelectAllClick:x,onUserTypeSelection:h,userTypeSelection:r,handleSerchInputChange:u,searchText:m,handleClearSearchInput:b}){a.useState(r?r-1:0),j(l=>l.auth)[Qe.APP_SETTINGS];const v=j(l=>l.customization);return e.jsxs(xs,{children:[e.jsx(W,{className:"user-roles-row",children:e.jsx(g,{component:"td",colSpan:7,sx:{p:1},children:e.jsx(ys,{fullWidth:!0,variant:"outlined",children:e.jsx(As,{className:(v==null?void 0:v.navType)==="dark"?"dark_tableHead":"",onChange:u,value:m,sx:{maxHeight:"40px"},placeholder:"Search name or email...",id:"outlined-adornment-weight",startAdornment:e.jsx(ie,{position:"start",children:e.jsx(hs,{})}),endAdornment:m.length>0?e.jsx(ie,{position:"end",children:e.jsx(N,{onClick:b,sx:{color:z.ERROR_MSG_COLOR},startIcon:e.jsx(ms,{}),children:"clear"})}):!1,"aria-describedby":"outlined-weight-helper-text",inputProps:{"aria-label":"weight"}})})})}),e.jsx(W,{children:c.map(l=>e.jsx(g,{align:l.align,sortDirection:i===l.id?n:!1,sx:{py:1.5,textTransform:l.textTransform},children:e.jsx(gs,{hideSortIcon:!0,children:l.label})},l.id))},"user-table-heading-row")]})}function ws(n){const i=j(t=>t.customization);return n.loading?e.jsx(bs,{colSpan:P.length+1,rows:5,columns:7,loaderMessage:"Please wait..."}):n.connectionError?e.jsx(Ss,{colspan:P.length+1,message:n.errorMessage}):n.userList.length===0?e.jsx(Us,{colspan:P.length+1,message:"Users not found."}):(console.log("userList---",n.userList),e.jsx(e.Fragment,{children:n.userList.map((t,c)=>{const{id:d,name:E,email:x,isVerified:h,user_profile_detail:r,status:u}=t;return e.jsxs(W,{className:(i==null?void 0:i.navType)==="dark"?"dark_tableRow":"",children:[e.jsx(g,{children:`${n.srNo+c}.`}),e.jsx(g,{component:"td",scope:"row",children:e.jsx(le,{variant:"",className:"user-name captialize",noWrap:!0,children:r!=null&&r.lastName?`${r==null?void 0:r.firstName} ${r==null?void 0:r.lastName}`:(r==null?void 0:r.firstName)||"---"})}),e.jsx(g,{component:"td",children:e.jsx(le,{variant:"",noWrap:!0,children:x})}),e.jsx(g,{align:"left",sx:{textAlign:"center"},children:h===1?e.jsx(vs,{sx:{color:z.SUCCESS_COLOR,fontSize:"20px"}}):e.jsx(Rs,{sx:{color:z.WARNING_COLOR,fontSize:"20px"}})}),e.jsx(g,{align:"left",className:"uppercase",sx:{textAlign:"center"},children:e.jsx(Ts,{color:u===1?"success":"warning",children:u===1?"Active":"Inactive"})}),e.jsx(g,{align:"right",children:e.jsx(Ls,{size:"small",color:"inherit",onClick:m=>n.handleOpenMenu(m,d),children:e.jsx(T,{icon:"eva:more-vertical-fill"})})})]},c)})}))}function ks(n){const{setIsOpen:i,cancelAction:t,deleteAction:c}=n,{loader:d}=j(u=>u.request),E=!0,x=de(),h=ge(x.breakpoints.down("md")),r=(u,m)=>{m&&m==="backdropClick"||(i(!1),t&&t())};return e.jsx("div",{children:e.jsxs(ue,{fullScreen:h,open:E,onClose:r,"aria-labelledby":"responsive-dialog-title",children:[e.jsx(me,{id:"responsive-dialog-title",children:"Delete user"}),e.jsx(pe,{children:e.jsx(he,{children:"Are you sure you want to delete user?"})}),e.jsx(xe,{children:e.jsxs(Se,{direction:"row",spacing:2,children:[e.jsx(N,{disabled:d,variant:"outlined",onClick:r,children:"CANCEL"}),e.jsx(fe,{loading:d,size:"small",type:"submit",color:"error",loadingPosition:"start",startIcon:e.jsx(Os,{}),variant:"contained",onClick:()=>c?c():!1,children:d?"DELETING...":"DELETE"})]})})]})})}function $s(n){const{setIsOpen:i,cancelAction:t,undoAction:c}=n,{loader:d}=j(u=>u.request),E=!0,x=de(),h=ge(x.breakpoints.down("md")),r=(u,m)=>{m&&m==="backdropClick"||(i(!1),t&&t())};return e.jsx("div",{children:e.jsxs(ue,{fullScreen:h,open:E,onClose:r,"aria-labelledby":"responsive-dialog-title",children:[e.jsx(me,{id:"responsive-dialog-title",children:"Delete user"}),e.jsx(pe,{children:e.jsx(he,{children:"Are you sure you want to recover this user?"})}),e.jsx(xe,{children:e.jsxs(Se,{direction:"row",spacing:2,children:[e.jsx(N,{disabled:d,variant:"outlined",onClick:r,children:"CANCEL"}),e.jsx(fe,{loading:d,size:"small",type:"submit",color:"error",loadingPosition:"start",startIcon:e.jsx(T,{icon:"iconoir:undo-circle",sx:{mr:2}}),variant:"contained",onClick:()=>c?c():!1,children:d?"Recovering...":"Undo"})]})})]})})}const Gt=()=>{const{user:n}=j(s=>s.filterOptions),i=j(s=>s.customization),t=Xe(),[c,d]=a.useState(null),[E,x]=a.useState(null),[h,r]=a.useState("asc"),[u,m]=a.useState([]),[b,v]=a.useState("name"),[l,ye]=a.useState(n.number_of_rows),[U,_]=a.useState(n.page_no),[K,D]=a.useState(n.srNo),[Ae,Ce]=a.useState(0),[Y,ve]=a.useState([]),[Re,w]=a.useState(!1),[Te,Q]=a.useState(!1),[X,Z]=a.useState(""),[L,be]=a.useState(n.role_id),[y,J]=a.useState(null),[k,Ue]=a.useState({}),[$,Le]=a.useState(""),[Oe,Ie]=Cs(),[ee,se]=a.useState(!1),[te,oe]=a.useState(!1),Pe=Ze();let Ne=[];const _e=(s,o)=>{const A=Y.find(R=>R.id===o);d(s.currentTarget),J(o),Ue(A)},M=s=>{se(s)},F=s=>{oe(s)},S=()=>{d(null),x(null),J(null)},De=s=>{Pe(s)},we=(s,o)=>{r(b===o&&h==="asc"?"desc":"asc"),v(o)},ke=s=>{if(s.target.checked){const o=Ne.map(A=>A.name);m(o);return}m([])},$e=(s,o)=>{_(o),D(l*o+1)},Me=s=>{_(0),ye(parseInt(s.target.value,10)),D(1)},Fe=(s,o=null)=>{_(0),be(o!==null?o:null),D(1)},re=s=>{const o=s.target.value===void 0?"":s.target.value;Le(o),Ie(o)},Ge=async()=>{try{t({type:p.PROCESSING});const{status:s,data:{message:o}}=await es(`${H.DELETE_USER}/${y}`);s===q[200]?(t({type:p.SUCCESS,payload:{message:o}}),G()):t({type:p.FAILURE,payload:{message:C()}}),S(),M(!1)}catch(s){t({type:p.FAILURE,payload:{message:C(s)}}),S(),M(!1)}},Be=async()=>{try{t({type:p.PROCESSING});const{status:s,data:{message:o}}=await ss(`${H.UNDO_DELETE_USER}?id=${y}`,{});s===q[200]?(t({type:p.SUCCESS,payload:{message:o}}),G()):t({type:p.FAILURE,payload:{message:C()}}),S(),F(!1)}catch(s){t({type:p.FAILURE,payload:{message:C(s)}}),S(),F(!1)}},G=()=>{const s=U+1,o=L||"";He(`${H.LIST}?${I.PAGE_NO.KEY}=${s}&${I.ROWS_PER_PAGE.KEY}=${l}&${I.SEARCH_TEXT.KEY}=${$}`,U,o)};async function He(s,o,A){w(!0),t({type:p.INIT_LOADER,payload:{loader:!0}});let R;const qe=as.LOCALE;try{const O=await ts(s),{status:ze}=O,{data:{userList:We,TotalCounts:Ve},success:Ke}=O.data;Ke&&ze===q[200]?(ve(We),w(!1),Q(!1),Ce(Ve),t({type:p.INIT_LOADER,payload:{loader:!1}}),t({type:os.USERS,payload:{key:"user",value:{role_id:A,page_no:o,number_of_rows:l,search_text:$,srNo:K}}})):(Z(rs[qe].FETCHING_USERS_LIST),t({type:p.FAILURE,payload:{message:C()}}))}catch(O){R=C(O),Q(!0),Z(R),w(!1),t({type:p.FAILURE,payload:{message:R}})}}return a.useEffect(()=>{G()},[U,l,L,Oe]),e.jsxs(e.Fragment,{children:[e.jsx(ls,{title:Je.USERS}),e.jsxs(is,{className:"page-container users-page",heading:"Users",children:[e.jsxs(B,{container:!0,justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[e.jsx(B,{item:!0,children:e.jsx(ns,{breadcrumbs:[e.jsx(ae,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:ne.DASHBOARD,children:"dashboard"}),"Users"]})}),e.jsx(B,{item:!0,mr:1,children:e.jsx(ae,{className:"",to:ne.USER_CREATE,children:e.jsx(N,{sx:{borderRadius:"2pt"},variant:"contained",color:"primary",endIcon:e.jsx(je,{}),children:"NEW USER"})})})]}),e.jsx(ds,{message:X}),e.jsx(Is,{sx:{mt:4,boxShadow:3},className:(i==null?void 0:i.navType)==="dark"?"dark_card":"",children:e.jsxs(us,{children:[e.jsx(fs,{children:e.jsxs(js,{className:"list-table",children:[e.jsx(Ee,{order:h,orderBy:b,headLabel:P,rowCount:0,numSelected:u.length,onRequestSort:we,onSelectAllClick:ke,onUserTypeSelection:Fe,handleSerchInputChange:re,searchText:$,userTypeSelection:L,handleClearSearchInput:re}),e.jsx(Es,{children:e.jsx(ws,{loading:Re,connectionError:Te,errorMessage:X,userList:Y,selected:u,handleOpenMenu:_e,srNo:K})})]})}),e.jsx(ps,{rowsPerPageOptions:I.ROWS_PER_PAGE_OPTIONS,component:"div",className:(i==null?void 0:i.navType)==="dark"?"dark_pagination":"",count:Ae,rowsPerPage:l,page:U,onPageChange:$e,onRowsPerPageChange:Me})]})})]}),e.jsxs(Ps,{open:!!c,anchorEl:c,onClose:S,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{p:1,width:140,"& .MuiMenuItem-root":{typography:"body2",borderRadius:.75}}},children:[e.jsxs(ce,{onClick:()=>y?De(`${y}`):!1,children:[e.jsx(T,{icon:"material-symbols:supervised-user-circle",sx:{mr:2,color:"primary"}}),"View"]}),Object.keys(k).length>0&&e.jsx(ce,{onClick:()=>k.status===3?F(!0):M(!0),sx:{color:"error.main"},children:k.status===3?e.jsxs(e.Fragment,{children:[e.jsx(T,{icon:"iconoir:undo-circle",sx:{mr:2}}),"Undo"]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{color:"red",icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})})]}),ee&&e.jsx(ks,{cancelAction:S,deleteAction:Ge,id:y,setIsOpen:se,isOpen:ee}),te&&e.jsx($s,{cancelAction:S,undoAction:Be,id:y,setIsOpen:oe,isOpen:te})]})};export{Gt as default};
