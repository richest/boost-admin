import{s as q,P as d,u as V,b as U,j as t,a6 as W,a as z,r as T,Q as L,G as s,L as C,R as x,V as m,a3 as K,ah as v,d as R,a4 as M,N as H,g as J,D as Y}from"./index-Bb4T6yJS.js";import{P as X}from"./breadcrumbs-BoNbTSIP.js";import{P as Z}from"./container-Mdzkb4R0.js";import{A as tt}from"./helmet-BKDsicQe.js";import{d as et}from"./Send-CIV9xzto.js";import{u as rt,o as st,a as at}from"./yup-VhrNJgti.js";import{c as B,f as ot,a as it}from"./index.esm-B55s2Mzk.js";import{A}from"./apiErrorResonse-CCtXlH33.js";import{I as nt}from"./Iconify-B2ea3Vhk.js";import{S as ct}from"./SkeltonCardLoader-BFqZXtrl.js";import{C as N}from"./Card-Cg269qA4.js";import{T as f}from"./Typography-BvK0EBjx.js";import{d as lt}from"./Add-CMcxYLjt.js";import{d as mt}from"./Delete-DOmi5ats.js";import{d as dt}from"./ArrowBack-huGvzFdU.js";import{B as I}from"./Button-CoPqx7My.js";import{S as w}from"./Skeleton-Cv9Q_VQE.js";import{B as pt}from"./Box-DzmxXICY.js";import{T as ut}from"./TextField-Dv9saPdb.js";import{S as gt}from"./Stack-yqW3PSS6.js";import{L as ht}from"./LoadingButton-D3WD33Li.js";import"./Breadcrumbs-CYgmF-zU.js";import"./ButtonBase-D0CLtmKS.js";import"./useSlotProps-CkCdCphK.js";import"./styled-BzESMtjz.js";import"./createSvgIcon-Cvxe-UMk.js";import"./useId-BQiMa7-Q.js";import"./useControlled-DpDQkWSS.js";import"./iconify-C-ngdJty.js";import"./Box-B1asL3_Y.js";import"./createBox-Z02cO3O7.js";import"./Avatar-CkCB1SYh.js";import"./index-D8g0v2aH.js";import"./useSlot-KITjY7au.js";import"./colorManipulator-C6WsgVx8.js";import"./Select-D_KZ1HKa.js";import"./useFormControl-oNyqkk4W.js";import"./Popover-_oog1cCQ.js";import"./Modal-BEZPFFVa.js";import"./Portal-DOJFZdR8.js";import"./Grow-BLrRft-L.js";import"./List-BGusPRli.js";import"./FormHelperText-D8o68a4M.js";q("div")(({theme:e})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:e.spacing(8),height:e.spacing(8),justifyContent:"center",marginBottom:e.spacing(3)}));k.propTypes={color:d.string,icon:d.string,title:d.string.isRequired,path:d.string.isRequired,sx:d.object};function k({isLoading:e,path:i,title:y,sx:j,...E}){const p=V(),u=U(S=>S.customization);return e&&e!==void 0?t.jsx(ct,{}):t.jsx(W,{style:{textDecoration:"none"},to:i,state:{category:y.replace(/[\s/]+/g,"-").toLowerCase()},className:"web-content-card",children:t.jsxs(N,{sx:{py:5,boxShadow:1,textAlign:"center",background:u.navType==="dark"?"#0e1522":p.palette.primary.light,...j},...E,children:[t.jsx(nt,{icon:"lsicon:folder-filled",width:30,height:30,style:{color:"#20a2b8"}}),t.jsx(f,{variant:"h4",sx:{color:u.navType==="dark"?p.palette.primary.light:"#0e1522"},children:y})]})})}const xt=B().shape({categories:ot().of(B().shape({title:it().trim().required("Title is required.")}))}),ne=()=>{const e=z(),{loader:i}=U(o=>o.request),[y,j]=T.useState(""),[E,p]=T.useState([]),{register:u,setValue:S,handleSubmit:P,trigger:ft,control:D,formState:{errors:c}}=rt({mode:"all",resolver:st(xt),defaultValues:{categories:[{title:""}]}}),{fields:b,append:$,remove:F}=at({control:D,name:"categories"}),Q=async o=>{let r={key:"QUESTION_BANK",section:"CATEGORY",value:JSON.stringify({categories:o.categories}),status:1};try{e({type:m.PROCESSING});const{status:a,data:{message:n}}=await K(v.UPDATE,r);a===R[200]?(e({type:m.SUCCESS,payload:{message:n}}),M.success(n),_()):e({type:m.FAILURE,payload:{message:A()}})}catch(a){e({type:m.FAILURE,payload:{message:A(a)}})}};async function G(o){e({type:m.INIT_LOADER,payload:{loader:!0}});const r=Y.LOCALE;try{const a=await H(o),{status:n}=a,{data:l,success:g}=a.data;if(g&&n===R[200]){const h=JSON.parse(l==null?void 0:l.value),{categories:O}=h;S("categories",O),p(O)}else j(J[r].FETCHING_USERS_LIST)}catch(a){A(a)}e({type:m.INIT_LOADER,payload:{loader:!1}})}const _=()=>{G(`${v.GET}?key=QUESTION_BANK&section=CATEGORY`)};return T.useEffect(()=>{_()},[]),t.jsxs(t.Fragment,{children:[t.jsx(tt,{title:L.QUESTION_BANK}),t.jsxs(Z,{className:"page-container users-page",heading:L.QUESTION_BANK,children:[t.jsxs(s,{container:!0,justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[t.jsx(s,{item:!0,children:t.jsx(X,{breadcrumbs:[t.jsx(C,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:x.DASHBOARD,children:"dashboard"}),t.jsx(C,{style:{color:"rgb(99, 115, 129)",textDecoration:"none"},to:x.WEB_CONTENT,children:"web content"}),"Question Bank Category"]})}),t.jsx(s,{item:!0,mr:1,children:t.jsx(C,{className:"h-link",to:x.WEB_CONTENT,children:t.jsx(I,{sx:{borderRadius:"2pt"},variant:"contained",color:"primary",startIcon:t.jsx(dt,{}),children:"Back"})})})]}),t.jsx(f,{pt:4,variant:"h3",children:"Categories"}),i?t.jsx(w,{variant:"rectangular",width:"100%",height:110}):t.jsx(s,{container:!0,spacing:3,sx:{pt:2},children:E.map((o,r)=>t.jsx(s,{item:!0,xs:12,sm:4,md:3,lg:2.4,children:t.jsx(k,{path:`${x.QUESTION_BANK}/${o.title.replace(/[\s/]+/g,"-").toLowerCase()}`,title:o.title})},r))}),t.jsx(N,{sx:{mt:4,boxShadow:3},children:t.jsx(s,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:t.jsxs(s,{item:!0,md:12,children:[t.jsx(f,{px:3,variant:"h4",children:"Add or update category"}),t.jsx(N,{className:"profile-right-section",sx:{p:3},children:t.jsxs("form",{onSubmit:P(Q),noValidate:!0,children:[t.jsx(s,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,my:2,children:b.map((o,r)=>{var a,n,l,g,h;return t.jsx(s,{item:!0,xs:12,sm:6,md:4,children:i?t.jsx(w,{variant:"rectangular",width:"100%",height:118}):t.jsxs(t.Fragment,{children:[t.jsx(pt,{sx:{mb:2},children:t.jsx(f,{variant:"h5",children:`Category ${r+1}`})}),t.jsx(s,{mb:4,children:t.jsx(ut,{...u(`categories[${r}].title`),label:"Title*",disabled:i,error:!!((n=(a=c==null?void 0:c.categories)==null?void 0:a[r])!=null&&n.title),helperText:(h=(g=(l=c==null?void 0:c.categories)==null?void 0:l[r])==null?void 0:g.title)==null?void 0:h.message,name:`categories[${r}].title`,variant:"outlined",fullWidth:!0})}),b.length>1&&t.jsx(s,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:t.jsx(I,{type:"button",size:"medium",startIcon:t.jsx(mt,{}),variant:"outlined",onClick:()=>{F(r)},color:"error",children:"Category"})})]})},o.id)})}),t.jsx(s,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mt:2,children:t.jsx(I,{type:"button",size:"medium",startIcon:t.jsx(lt,{}),variant:"outlined",onClick:()=>$({title:""}),children:"Category"})}),t.jsx(gt,{direction:"row",justifyContent:"center",alignItems:"center",my:2,children:t.jsx(ht,{loading:!!i,size:"medium",type:"submit",loadingPosition:"end",endIcon:t.jsx(et,{}),variant:"contained",children:i?"PLEASE WAIT...":"SUBMIT"})})]})})]})})})]})]})};export{ne as default};
